<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>êµ´ì°©ê¸° ì•ˆì „ë³´ê±´ ì‘ì—…ì§€ì¹¨ | í˜„ì¥ ì•ˆì „ì‘ì—… ì ˆì°¨Â·ì²´í¬ë¦¬ìŠ¤íŠ¸</title>
  <meta name="description" content="êµ´ì°©ê¸° êµ´ì°©Â·ìƒì°¨Â·íŒŒì‡„Â·ì •ì§€ì‘ì—… ì•ˆì „ë³´ê±´ ì‘ì—…ì§€ì¹¨(ì „ë„/ì¶©ëŒ/í˜‘ì°©/ê°ì „ ì˜ˆë°©), ì‘ì—… ì „Â·ì¤‘Â·í›„ ì ˆì°¨, ì¼ì¼ì ê²€ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì œê³µ" />
  <meta name="theme-color" content="#004080" />

  <!-- Pretendard -->
  <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css" />

  <style>
    :root{
      --blue:#004080;         /* ë™ì§„ ë¸”ë£¨ ê³„ì—´ */
      --blue2:#007bff;
      --ink:#0b1220;
      --muted:#586174;
      --bg:#f5f8ff;
      --card:#ffffff;
      --line:rgba(0,64,128,.14);
      --shadow:0 18px 60px rgba(0,64,128,.10);
      --radius:18px;
      --radius2:26px;
    }
    [data-theme="dark"]{
      --ink:#eaf1ff;
      --muted:#b8c4da;
      --bg:#071225;
      --card:#0b1b33;
      --line:rgba(127,170,255,.18);
      --shadow:0 18px 60px rgba(0,0,0,.35);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Pretendard, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans KR", Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 600px at 18% 10%, rgba(0,123,255,.18), transparent 55%),
        radial-gradient(900px 520px at 80% 0%, rgba(0,64,128,.22), transparent 50%),
        var(--bg);
      line-height:1.7;
      overflow-x:hidden;
    }

    a{color:inherit; text-decoration:none}
    .container{width:min(1200px, calc(100% - 40px)); margin:0 auto}

    /* Top bar */
    .topbar{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(14px);
      background:linear-gradient(180deg, rgba(255,255,255,.72), rgba(255,255,255,.52));
      border-bottom:1px solid rgba(0,64,128,.10);
    }
    [data-theme="dark"] .topbar{
      background:linear-gradient(180deg, rgba(11,27,51,.78), rgba(11,27,51,.55));
      border-bottom:1px solid rgba(127,170,255,.14);
    }
    .topbar-inner{
      display:flex; align-items:center; justify-content:space-between;
      padding:12px 0;
      gap:16px;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
      font-weight:900;
      letter-spacing:-.02em;
    }
    .logo{
      width:38px; height:38px; border-radius:12px;
      background:linear-gradient(135deg, var(--blue), var(--blue2));
      box-shadow:0 14px 40px rgba(0,64,128,.25);
      position:relative;
      overflow:hidden;
    }
    .logo:before{
      content:"";
      position:absolute; inset:-40%;
      background:conic-gradient(from 120deg, rgba(255,255,255,.0), rgba(255,255,255,.55), rgba(255,255,255,.0));
      animation:spin 4.5s linear infinite;
    }
    @keyframes spin{to{transform:rotate(360deg)}}
    .brand small{display:block; font-size:12px; color:var(--muted); font-weight:700; margin-top:2px}

    .nav{
      display:flex; gap:14px; flex-wrap:wrap; justify-content:flex-end;
      font-size:13px; font-weight:800; color:var(--muted);
    }
    .nav a{
      padding:8px 10px; border-radius:999px;
      border:1px solid transparent;
    }
    .nav a:hover{border-color:var(--line); background:rgba(0,64,128,.06); color:var(--ink)}

    .actions{display:flex; align-items:center; gap:10px}
    .btn{
      border:1px solid var(--line);
      background:rgba(255,255,255,.65);
      color:var(--ink);
      border-radius:999px;
      padding:10px 12px;
      font-weight:900;
      cursor:pointer;
      transition:.18s ease;
      display:inline-flex; align-items:center; gap:8px;
    }
    [data-theme="dark"] .btn{background:rgba(11,27,51,.65)}
    .btn:hover{transform:translateY(-1px); box-shadow:0 10px 22px rgba(0,64,128,.12)}
    .btn.primary{
      background:linear-gradient(135deg,var(--blue),var(--blue2));
      border-color:transparent;
      color:#fff;
      box-shadow:0 18px 45px rgba(0,64,128,.22);
    }
    .btn.primary:hover{box-shadow:0 22px 55px rgba(0,64,128,.28)}

    /* Hero */
    .hero{padding:42px 0 22px}
    .hero-grid{
      display:grid; gap:22px;
      grid-template-columns: 1.15fr .85fr;
      align-items:stretch;
    }
    @media (max-width: 980px){
      .hero-grid{grid-template-columns:1fr}
      .nav{display:none}
    }

    .hero-card{
      background:linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.70));
      border:1px solid rgba(0,64,128,.14);
      border-radius:var(--radius2);
      box-shadow:var(--shadow);
      padding:26px;
      position:relative;
      overflow:hidden;
    }
    [data-theme="dark"] .hero-card{
      background:linear-gradient(180deg, rgba(11,27,51,.86), rgba(11,27,51,.66));
    }
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding:7px 12px; border-radius:999px;
      background:rgba(0,64,128,.08);
      border:1px solid rgba(0,64,128,.14);
      color:var(--ink);
      font-weight:900; font-size:12px;
    }
    [data-theme="dark"] .badge{
      background:rgba(127,170,255,.10);
      border:1px solid rgba(127,170,255,.18);
    }
    .dot{width:8px; height:8px; border-radius:99px; background:linear-gradient(135deg,var(--blue),var(--blue2))}
    h1{
      margin:14px 0 10px;
      font-size:36px;
      letter-spacing:-.03em;
      line-height:1.15;
    }
    @media (max-width: 560px){ h1{font-size:28px} }
    .lead{margin:0; color:var(--muted); font-weight:700}
    .hero-kpis{
      display:grid; grid-template-columns:repeat(3,1fr); gap:12px;
      margin-top:18px;
    }
    .kpi{
      background:rgba(0,64,128,.06);
      border:1px solid rgba(0,64,128,.12);
      border-radius:16px;
      padding:12px;
    }
    [data-theme="dark"] .kpi{
      background:rgba(127,170,255,.08);
      border-color:rgba(127,170,255,.16);
    }
    .kpi b{display:block; font-size:12px; color:var(--muted)}
    .kpi strong{display:block; margin-top:4px; font-size:18px}

    .hero-side{
      display:grid; gap:14px;
      align-content:start;
    }
    .mini{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:0 12px 34px rgba(0,64,128,.08);
      padding:16px;
    }
    .mini h3{margin:0 0 8px; font-size:14px}
    .mini p{margin:0; color:var(--muted); font-weight:650; font-size:13px}

    /* Sections */
    section{padding:26px 0}
    .section-title{
      display:flex; align-items:flex-end; justify-content:space-between; gap:16px;
      margin:0 0 14px;
    }
    .section-title h2{
      margin:0;
      font-size:22px;
      letter-spacing:-.02em;
    }
    .section-title .hint{color:var(--muted); font-weight:700; font-size:13px}

    .grid{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:14px;
    }
    @media (max-width: 980px){ .grid{grid-template-columns:1fr} }

    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:18px;
      box-shadow:0 12px 30px rgba(0,64,128,.08);
    }
    .card h3{margin:0 0 10px; font-size:16px}
    .card p{margin:0; color:var(--muted); font-weight:650}
    .list{margin:10px 0 0; padding-left:18px; color:var(--muted); font-weight:650}
    .list li{margin:6px 0}

    /* Risk table */
    .toolbar{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between;
      margin:10px 0 12px;
    }
    .search{
      flex:1;
      display:flex; gap:10px; flex-wrap:wrap;
      align-items:center;
    }
    .input, select{
      border:1px solid var(--line);
      background:rgba(255,255,255,.7);
      color:var(--ink);
      border-radius:12px;
      padding:10px 12px;
      font-weight:800;
      outline:none;
      min-width: 180px;
    }
    [data-theme="dark"] .input, [data-theme="dark"] select{
      background:rgba(11,27,51,.7);
    }
    .input{flex:1; min-width:220px}
    .table-wrap{
      overflow:auto;
      border-radius:16px;
      border:1px solid var(--line);
      background:var(--card);
    }
    table{
      border-collapse:separate;
      border-spacing:0;
      width:100%;
      min-width:860px;
      font-size:13px;
    }
    thead th{
      position:sticky; top:0;
      background:linear-gradient(180deg, rgba(0,64,128,.10), rgba(0,64,128,.06));
      color:var(--ink);
      text-align:left;
      padding:12px 12px;
      border-bottom:1px solid var(--line);
      font-weight:950;
      z-index:1;
    }
    tbody td{
      padding:12px 12px;
      border-bottom:1px solid rgba(0,64,128,.10);
      color:var(--muted);
      vertical-align:top;
      font-weight:650;
    }
    tbody tr:hover td{background:rgba(0,64,128,.04); color:var(--ink)}
    .tag{
      display:inline-flex; align-items:center; gap:6px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(0,64,128,.14);
      background:rgba(0,64,128,.06);
      color:var(--ink);
      font-weight:950;
      font-size:12px;
      white-space:nowrap;
    }

    /* Steps */
    .steps{
      display:grid; gap:14px;
      grid-template-columns:repeat(3,1fr);
    }
    @media (max-width: 980px){ .steps{grid-template-columns:1fr} }
    .step{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:18px;
      box-shadow:0 12px 30px rgba(0,64,128,.08);
    }
    .step .no{
      width:34px; height:34px; border-radius:12px;
      display:grid; place-items:center;
      background:linear-gradient(135deg,var(--blue),var(--blue2));
      color:#fff; font-weight:950;
      box-shadow:0 14px 30px rgba(0,64,128,.18);
    }
    .step h3{margin:10px 0 8px; font-size:16px}
    .step ul{margin:0; padding-left:18px; color:var(--muted); font-weight:650}
    .step li{margin:6px 0}

    /* Checklist */
    .checklist{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius2);
      padding:18px;
      box-shadow:var(--shadow);
    }
    .cl-head{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      flex-wrap:wrap;
      margin-bottom:12px;
    }
    .cl-head h3{margin:0; font-size:16px}
    .cl-meta{
      display:flex; gap:10px; flex-wrap:wrap;
    }
    .cl-meta .input{min-width:180px; flex:unset}
    .cl-items{
      display:grid; gap:10px;
    }
    .cl-item{
      display:flex; gap:10px; align-items:flex-start;
      padding:12px 12px;
      border-radius:16px;
      border:1px solid rgba(0,64,128,.12);
      background:rgba(0,64,128,.05);
    }
    [data-theme="dark"] .cl-item{
      border-color:rgba(127,170,255,.16);
      background:rgba(127,170,255,.08);
    }
    .cl-item input[type="checkbox"]{
      margin-top:4px;
      width:18px; height:18px;
      accent-color: var(--blue2);
      cursor:pointer;
    }
    .cl-item b{display:block; font-size:13px}
    .cl-item small{display:block; color:var(--muted); font-weight:650; margin-top:2px}
    .progress{
      height:10px;
      background:rgba(0,64,128,.10);
      border:1px solid rgba(0,64,128,.12);
      border-radius:999px;
      overflow:hidden;
    }
    .bar{
      height:100%;
      width:0%;
      background:linear-gradient(90deg,var(--blue),var(--blue2));
      transition:width .25s ease;
    }

    /* Footer */
    footer{
      padding:26px 0 40px;
      color:var(--muted);
      font-weight:700;
      font-size:12px;
    }
    .foot{
      display:flex; align-items:flex-start; justify-content:space-between; gap:16px;
      flex-wrap:wrap;
      border-top:1px solid rgba(0,64,128,.12);
      padding-top:16px;
    }

    /* Print */
    @media print{
      .topbar, .actions, .nav, .btn, .toolbar, .hint, .hero-side { display:none !important; }
      body{background:#fff}
      .hero{padding:0}
      .hero-card, .card, .step, .checklist { box-shadow:none !important; }
      .container{width:100%}
      a{color:#000}
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="container">
      <div class="topbar-inner">
        <div class="brand">
          <div class="logo" aria-hidden="true"></div>
          <div>
            êµ´ì°©ê¸° ì•ˆì „ë³´ê±´ ì‘ì—…ì§€ì¹¨
            <small>í˜„ì¥ ì‘ì—…ì ˆì°¨ Â· ìœ„í—˜ìš”ì¸ Â· ì¼ì¼ì ê²€ ì²´í¬ë¦¬ìŠ¤íŠ¸</small>
          </div>
        </div>

        <nav class="nav" aria-label="ì£¼ìš” ë©”ë‰´">
          <a href="#overview">ê°œìš”</a>
          <a href="#attachments">ì¥ë¹„Â·ì‘ì—…ì¥ì¹˜</a>
          <a href="#risks">ìœ„í—˜ìš”ì¸/ëŒ€ì±…</a>
          <a href="#procedure">ì‘ì—…ì ˆì°¨</a>
          <a href="#checklist">ì¼ì¼ì ê²€</a>
        </nav>

        <div class="actions">
          <button class="btn" id="themeBtn" type="button" title="ë‹¤í¬ëª¨ë“œ ì „í™˜">ğŸŒ™ í…Œë§ˆ</button>
          <button class="btn" id="printBtn" type="button" title="ì¸ì‡„/ì €ì¥(PDF)">ğŸ–¨ï¸ ì¸ì‡„</button>
          <a class="btn primary" href="#checklist" title="ë°”ë¡œ ì ê²€í•˜ê¸°">âœ… ë°”ë¡œ ì ê²€</a>
        </div>
      </div>
    </div>
  </div>

  <header class="hero">
    <div class="container">
      <div class="hero-grid">
        <div class="hero-card">
          <span class="badge"><span class="dot"></span> í˜„ì¥ ì ìš©í˜• Â· ì•ˆì „ì‘ì—… í‘œì¤€</span>
          <h1>êµ´ì°©ê¸° ì‘ì—… ì¬í•´ë¥¼<br/>â€œì ˆì°¨ + í†µì œ + ì ê²€â€ìœ¼ë¡œ ì˜ˆë°©í•©ë‹ˆë‹¤.</h1>
          <p class="lead">
            êµ´ì°©ê¸° êµ´ì°©Â·ìƒì°¨Â·íŒŒì‡„Â·ì •ì§€ ì‘ì—…ì—ì„œ ë°œìƒ ê°€ëŠ¥í•œ <b>ì¹¨í•˜Â·ì „ë„Â·ì¶”ë½Â·í˜‘ì°©</b> ë“±ì„ ì˜ˆë°©í•˜ê¸° ìœ„í•œ
            ì‘ì—…ë‹¨ê³„ë³„ ì§€ì¹¨ì„ í•œ í™”ë©´ìœ¼ë¡œ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.
          </p>

          <div class="hero-kpis" role="list">
            <div class="kpi" role="listitem">
              <b>ì¤‘ì  ì¬í•´ìœ í˜•</b>
              <strong>ì „ë„Â·ì „ë½</strong>
            </div>
            <div class="kpi" role="listitem">
              <b>ì¤‘ì  ì¬í•´ìœ í˜•</b>
              <strong>ì¶©ëŒÂ·í˜‘ì°©</strong>
            </div>
            <div class="kpi" role="listitem">
              <b>ì¤‘ì  ì¬í•´ìœ í˜•</b>
              <strong>ì¶©ëŒ</strong>
            </div>
          </div>

          <div style="margin-top:16px; display:flex; gap:10px; flex-wrap:wrap;">
            <a class="btn" href="#risks">âš ï¸ ìœ„í—˜ìš”ì¸ ë°”ë¡œë³´ê¸°</a>
            <a class="btn" href="#procedure">ğŸ§­ ì‘ì—…ì ˆì°¨</a>
            <a class="btn" href="#checklist">ğŸ§¾ ì²´í¬ë¦¬ìŠ¤íŠ¸</a>
          </div>

          <p style="margin:14px 0 0; color:var(--muted); font-weight:700; font-size:12px;">
            â€» ë³¸ í˜ì´ì§€ëŠ” â€œKOSHA GUIDE C-105-2022 êµ´ì°©ê¸° ì•ˆì „ë³´ê±´ì‘ì—… ì§€ì¹¨(2022.12)â€ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ í˜„ì¥ í™œìš©ì„±ì„ ìœ„í•´ ì¬êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
          </p>
        </div>

        <aside class="hero-side" aria-label="í•µì‹¬ ìš”ì•½">
          <div class="mini">
            <h3>ğŸ¯ ì ìš©ë²”ìœ„</h3>
            <p>êµ´ì°©ê¸°ë¥¼ ì‚¬ìš©í•˜ëŠ” ê±´ì„¤í˜„ì¥ì˜ í† ì‚¬ êµ´ì°©Â·ìƒì°¨Â·íŒŒì‡„Â·ì •ì§€ ì‘ì—…</p>
          </div>
          <div class="mini">
            <h3>ğŸ§  í•µì‹¬ ì›ì¹™</h3>
            <p>ì‘ì—…ê³„íš(ìœ„í—˜ì„±í‰ê°€) â†’ ì‘ì—… ì „ ì ê²€ â†’ ì‘ì—… ì¤‘ í†µì œ â†’ ì¢…ë£ŒÂ·ì£¼ì°¨Â·ì˜ˆë°©ì •ë¹„</p>
          </div>
          <div class="mini">
            <h3>ğŸ” í˜„ì¥ í¬ì¸íŠ¸</h3>
            <p>ì‘ì—…ë°˜ê²½ ì¶œì…í†µì œ + ìœ ë„ì ë°°ì¹˜ + í›„ì§„ê²½ë³´ê¸°/í›„ë°©ì˜ìƒ/ê²½ê³ ìŒ ì‘ë™ í™•ì¸</p>
          </div>
        </aside>
      </div>
    </div>
  </header>

  <main>
    <!-- OVERVIEW -->
    <section id="overview">
      <div class="container">
        <div class="section-title">
          <h2>ê°œìš”</h2>
          <div class="hint">ëª©ì Â·ì •ì˜Â·ì ìš©ë²”ìœ„ë¥¼ í•œëˆˆì—</div>
        </div>

        <div class="grid">
          <div class="card">
            <h3>1) ëª©ì </h3>
            <p>êµ´ì°©ê¸° êµ´ì°©Â·ìƒì°¨Â·íŒŒì‡„Â·ì •ì§€ ì‘ì—…ì—ì„œ ë°œìƒ ê°€ëŠ¥í•œ ì¥ë¹„ ì¹¨í•˜Â·ì „ë„Â·ì¶”ë½Â·í˜‘ì°© ì¬í•´ ì˜ˆë°©ì„ ìœ„í•œ ì‘ì—…ë‹¨ê³„ë³„ ì•ˆì „ì‘ì—… ì‚¬í•­ì„ ì •í•¨.</p>
          </div>
          <div class="card">
            <h3>2) ì ìš©ë²”ìœ„</h3>
            <p>êµ´ì°©ê¸°ë¥¼ ì‚¬ìš©í•˜ëŠ” ê±´ì„¤í˜„ì¥ì˜ í† ì‚¬ êµ´ì°©Â·ìƒì°¨Â·íŒŒì‡„Â·ì •ì§€ ì‘ì—…ì— ì ìš©.</p>
          </div>
          <div class="card">
            <h3>3) êµ´ì°©ê¸°(ì •ì˜)</h3>
            <p>í•˜ë¶€êµ¬ì¡° ì›€ì§ì„ ì—†ì´ 360Â° íšŒì „, ì‘ì—…ëª©ì ì— ë”°ë¥¸ ì„ íƒì‘ì—…ì¥ì¹˜ íƒˆÂ·ì¥ì°© ê°€ëŠ¥(ë¬´í•œê¶¤ë„/íƒ€ì´ì–´ì‹ ë¶„ë¥˜).</p>
          </div>
        </div>
      </div>
    </section>

    <!-- ATTACHMENTS -->
    <section id="attachments">
      <div class="container">
        <div class="section-title">
          <h2>ì¥ë¹„Â·ì„ íƒì‘ì—…ì¥ì¹˜(Attachment) ì´í•´</h2>
          <div class="hint">ì‘ì—… ëª©ì ì— ë§ëŠ” ì¥ë¹„/ì¥ì¹˜ ì„ ì •ì´ ì‚¬ê³ ë¥¼ ì¤„ì…ë‹ˆë‹¤</div>
        </div>

        <div class="grid">
          <div class="card">
            <h3>í•˜ë¶€ì¥ì¹˜ ê¸°ì¤€ ë¶„ë¥˜</h3>
            <ul class="list">
              <li><b>ë¬´í•œê¶¤ë„ì‹</b>: ê²¬ì¸ë ¥ í¬ê³  ìŠµì§€Â·ëª¨ë˜ì§€ë°˜Â·ê²½ì‚¬ì§€ ë“± í—˜ì§€ ì‘ì—… ìœ ë¦¬</li>
              <li><b>íƒ€ì´ì–´ì‹</b>: ê¸°ë™ì„±/ì´ë™ê±°ë¦¬ ê¸´ ì‘ì—…ì¥ ìœ ë¦¬(ì£¼í–‰ì†ë„ 30~40km/h ìˆ˜ì¤€)</li>
            </ul>
          </div>

          <div class="card">
            <h3>ëŒ€í‘œ ì„ íƒì‘ì—…ì¥ì¹˜</h3>
            <ul class="list">
              <li><b>ë²„í‚·</b>: êµ´ì°©Â·ìƒì°¨ ê¸°ë³¸</li>
              <li><b>í´ë¨ì‰˜</b>: ìˆ˜ì§ êµ´ì°©/í´ë¨ì‰˜ ì‘ì—…</li>
              <li><b>ë¸Œë ˆì´ì»¤</b>: ì½˜í¬ë¦¬íŠ¸/ì•”ì„ íŒŒì‡„</li>
              <li><b>í€µì»¤í”ŒëŸ¬</b>: ì‘ì—…ì¥ì¹˜ ì‹ ì† êµì²´ ì—°ê²°ì¥ì¹˜</li>
              <li><b>ë¸”ë ˆì´ë“œ</b>: ì¸¡êµ¬ ë©”ì›€/ì†ŒëŸ‰ í‰íƒ„í™”</li>
            </ul>
          </div>

          <div class="card">
            <h3>ê´€ë¦¬ í¬ì¸íŠ¸</h3>
            <ul class="list">
              <li><b>í€µì»¤í”ŒëŸ¬ ì•ˆì „í•€</b> ì²´ê²°ìƒíƒœ í™•ì¸</li>
              <li>ì‘ì—… ì „ ì•ˆì „ì¥ì¹˜(ì „ì¡°ë“±/í›„ì‚¬ê²½/ê²½ê´‘ë“±/ê²½ê³ ìŒ/í›„ë°©ì¹´ë©”ë¼ ë“±) ì‘ë™ í™•ì¸</li>
              <li>ëª©ì  ì™¸ ì‚¬ìš©(ê²¬ì¸Â·ìš´ë°˜ ë“±) ê¸ˆì§€ ì›ì¹™ ì¤€ìˆ˜</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- RISKS -->
    <section id="risks">
      <div class="container">
        <div class="section-title">
          <h2>ì¤‘ì  ìœ„í—˜ìš”ì¸ ë° ì•ˆì „ëŒ€ì±…</h2>
          <div class="hint">í˜„ì¥ êµìœ¡Â·TBM ë•Œ ë°”ë¡œ ì“°ëŠ” í‘œ</div>
        </div>

        <div class="toolbar">
          <div class="search">
            <input class="input" id="q" placeholder="ì˜ˆ) í›„ì§„ê²½ë³´ê¸°, ì „ë„, í€µì»¤í”ŒëŸ¬, ê³ ì••ì„ â€¦" />
            <select id="type">
              <option value="">ì¬í•´ìœ í˜•(ì „ì²´)</option>
              <option value="ì „ë„Â·ì „ë½">ì „ë„Â·ì „ë½</option>
              <option value="ì¶©ëŒ">ì¶©ëŒ</option>
              <option value="í˜‘ì°©">í˜‘ì°©</option>
              <option value="ê°ì „">ê°ì „</option>
            </select>
          </div>
          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn" id="reset" type="button">â†º ì´ˆê¸°í™”</button>
          </div>
        </div>

        <div class="table-wrap" role="region" aria-label="ìœ„í—˜ìš”ì¸ ë° ì•ˆì „ëŒ€ì±… í‘œ" tabindex="0">
          <table>
            <thead>
              <tr>
                <th style="width:160px">ì¬í•´ìœ í˜•</th>
                <th>ìœ„í—˜ìš”ì¸(ì˜ˆì‹œ)</th>
                <th>ì•ˆì „ëŒ€ì±…(í•µì‹¬)</th>
              </tr>
            </thead>
            <tbody id="riskBody"></tbody>
          </table>
        </div>

        <p style="margin:10px 0 0; color:var(--muted); font-weight:700; font-size:12px;">
          â€» í‘œ í•­ëª©ì€ ì§€ì¹¨ì˜ â€œì¤‘ì  ìœ í•´Â·ìœ„í—˜ìš”ì¸ íŒŒì•…â€ ë‚´ìš©ì„ í˜„ì¥ í™œìš©í˜•ìœ¼ë¡œ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.
        </p>
      </div>
    </section>

    <!-- PROCEDURE -->
    <section id="procedure">
      <div class="container">
        <div class="section-title">
          <h2>êµ´ì°©ê¸° ì•ˆì „ì‘ì—… ì ˆì°¨</h2>
          <div class="hint">ì‘ì—…ê³„íš â†’ ì‘ì—… ì „ â†’ ì‘ì—… ì¤‘ â†’ ì¢…ë£Œ</div>
        </div>

        <div class="steps">
          <div class="step">
            <div class="no">1</div>
            <h3>ì‘ì—…ê³„íš ìˆ˜ë¦½Â·ê²€í† </h3>
            <ul>
              <li>ìœ„í—˜ì„±í‰ê°€ë¡œ ìœ í•´Â·ìœ„í—˜ìš”ì¸ íŒŒì•… â†’ ë¹ˆë„/ê°•ë„ ì¶”ì • â†’ ê°ì†ŒëŒ€ì±… ìˆ˜ë¦½</li>
              <li>ì‘ì—…ì—¬ê±´/ë¬¼ëŸ‰/ìš´ë°˜ì¥ë¹„ ì¡°í•© ê³ ë ¤í•˜ì—¬ êµ´ì°©ê¸° ì„ ì •</li>
              <li>ìš´ì „ì ë³´í˜¸(í—¤ë“œê°€ë“œ ì„¤ì¹˜) ë“± ì•ˆì „ì‚¬ì–‘ í™•ì¸</li>
            </ul>
          </div>

          <div class="step">
            <div class="no">2</div>
            <h3>ì‘ì—… ì „ ì¤€ìˆ˜ì‚¬í•­</h3>
            <ul>
              <li>ê´€ë¦¬ê°ë…ì: ìš´ì „ì ìê²©(ë©´í—ˆ)Â·êµìœ¡ ì´ìˆ˜ í™•ì¸(ë¬´ìê²© ìš´ì „ ê¸ˆì§€)</li>
              <li>ëˆ„ìˆ˜Â·ëˆ„ìœ Â·ì™¸ê´€ ì´ìƒ í™•ì¸</li>
              <li>ì „ì¡°ë“±/í›„ì‚¬ê²½/ê²½ê´‘ë“±/ê²½ê³ ìŒ(ì „Â·í›„ì§„)/í›„ë°©ì¹´ë©”ë¼ ë“± ì‘ë™ í™•ì¸</li>
              <li>ì§€ë°˜ìƒíƒœÂ·ì´ë™ê²½ë¡œ ì‚¬ì „ í™•ì¸(ì¹¨í•˜Â·ì „ë„ ì˜ˆë°©)</li>
              <li>ì‘ì—…ë°˜ê²½ ë‚´ ê·¼ë¡œì/ì¥ì• ë¬¼ ìœ ë¬´ í™•ì¸</li>
              <li>í€µì»¤í”ŒëŸ¬ ì•ˆì „í•€ ì •ìƒì²´ê²° í™•ì¸(í‘œì‹ ë“±ìœ¼ë¡œ í™•ì¸ ìš©ì´í™”)</li>
            </ul>
          </div>

          <div class="step">
            <div class="no">3</div>
            <h3>ì‘ì—… ì¤‘ ì¤€ìˆ˜ì‚¬í•­</h3>
            <ul>
              <li>ì¥ë¹„ ë§¤ë‰´ì–¼ ì¤€ìˆ˜, ê²½ë¡œ/ì§€í˜•/ì§€ë°˜/ê²½ì‚¬ë„ í™•ì¸ í›„ ìš´í–‰</li>
              <li>ì‘ì—…ë°˜ê²½ ë‚´ ê·¼ë¡œì í™•ì¸, ê´€ê³„ì ì™¸ ì¶œì…ê¸ˆì§€Â·ìœ ë„ì ë°°ì¹˜</li>
              <li>ê¸‰ì‘ìŠ¤ëŸ° ì‘ë™ ê¸ˆì§€, ì‹œì•¼ ë¬¸ì œ ì‹œ ìœ ë„ì ì‹ í˜¸ì— ë”°ë¼ ì‘ì—…</li>
              <li>ê²½ì‚¬ì§€ ì €ì† ì´ë™, ë¸”ë ˆì´ë“œ í•˜ë¶€ ë°©í–¥ ìœ„ì¹˜, ë¶ ê¸‰ì„ íšŒ ê¸ˆì§€</li>
              <li>ì¢Œì„ì•ˆì „ë  ì°©ìš©</li>
              <li>ë¶ˆì•ˆì „í–‰ë™ ê¸ˆì§€(ì—”ì§„ ê°€ë™ ì¤‘ ì´íƒˆ, ì¥ì¹˜ ì˜¬ë¦°ì±„ ì •ì°¨, ë²„í‚·ìœ¼ë¡œ ë°€ë©° ì£¼í–‰ ë“±)</li>
              <li>ì§€í•˜ë§¤ì„¤ë¬¼/ì¥ì• ë¬¼ ë°œê²¬ ì‹œ ì¦‰ì‹œ ì •ì§€Â·ë³´ê³  í›„ ì§€ì‹œì— ë”°ë¼ ì‘ì—…</li>
            </ul>
          </div>
        </div>

        <div style="margin-top:14px" class="card">
          <h3>ì‘ì—… ì¢…ë£Œ(ì£¼ì°¨Â·ì •ì§€Â·ì´íƒˆ)</h3>
          <ul class="list">
            <li>í‰íƒ„í•œ ì¥ì†Œ ì£¼ì°¨(ë¶ˆê°€í”¼í•œ ê²½ì‚¬ì§€ ì£¼ì°¨ ì‹œ êµ¬ë¦„ë°©ì§€ ë“± ì¡°ì¹˜)</li>
            <li>ì„ íƒì‘ì—…ì¥ì¹˜ë¥¼ ì•ˆì „í•œ ì§€ë°˜ì— ë‚´ë ¤ë†“ê³  ì—”ì§„ ì •ì§€</li>
            <li>ì£¼ì°¨ë¸Œë ˆì´í¬ â†’ í‚¤ ì œê±° â†’ ë¬¸/ì°½ ì ê¸ˆ í›„ ì´íƒˆ</li>
            <li>ì¼ì¼ì ê²€ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ ì˜ˆë°©ì •ë¹„ ë° ì´ë ¥ê´€ë¦¬</li>
          </ul>
        </div>
      </div>
    </section>

<!-- ================= TBM SCRIPT GENERATOR ================= -->
<section id="tbm">
  <div class="container">
    <div class="section-title">
      <h2>ì‘ì—… ì „ ì•ˆì „êµìœ¡(TBM) 10ì´ˆ ìŠ¤í¬ë¦½íŠ¸</h2>
      <div class="hint">í˜„ì¥ëª…Â·ì‘ì—…ë‚´ìš© ì…ë ¥ â†’ ì¦‰ì‹œ ìƒì„±</div>
    </div>

    <div class="card">
      <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px;">
        <input class="input" id="tbmSite" placeholder="í˜„ì¥ëª… (ì˜ˆ: íŒŒì£¼ â—‹â—‹í˜„ì¥)" />
        <input class="input" id="tbmWork" placeholder="ì˜¤ëŠ˜ ì‘ì—…ë‚´ìš© (ì˜ˆ: êµ´ì°© ë° ìƒì°¨ì‘ì—…)" />
      </div>

      <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
        <button class="btn primary" id="genTBM">ğŸ™ï¸ 10ì´ˆ TBM ìƒì„±</button>
        <button class="btn" id="copyTBM">ğŸ“‹ ë¬¸êµ¬ ë³µì‚¬</button>
      </div>

      <div style="margin-top:14px;">
        <textarea id="tbmResult" rows="5"
          style="width:100%; border-radius:14px; padding:12px; font-weight:700; line-height:1.6;"
          placeholder="ì—¬ê¸°ì— ì‘ì—… ì „ ì•ˆì „êµìœ¡ ë¬¸êµ¬ê°€ ìƒì„±ë©ë‹ˆë‹¤."></textarea>
      </div>
    </div>
  </div>
</section>


    <!-- CHECKLIST -->
    <section id="checklist">
      <div class="container">
        <div class="section-title">
          <h2>êµ´ì°©ê¸° ì•ˆì „ì ê²€ ì²´í¬ë¦¬ìŠ¤íŠ¸(ì¼ì¼ì ê²€)</h2>
          <div class="hint">ì²´í¬ ìƒíƒœëŠ” ë¸Œë¼ìš°ì €ì— ì €ì¥ë©ë‹ˆë‹¤(í˜„ì¥ìš©)</div>
        </div>

        <div class="checklist">
          <div class="cl-head">
            <h3>âœ… ì˜¤ëŠ˜ ì ê²€</h3>
            <div class="cl-meta">
              <input class="input" id="site" placeholder="í˜„ì¥ëª… (ì˜ˆ: íŒŒì£¼ â—‹â—‹í˜„ì¥)" />
              <input class="input" id="machine" placeholder="ì¥ë¹„ë²ˆí˜¸/í˜¸ê¸° (ì˜ˆ: EX-03)" />
              <input class="input" id="inspector" placeholder="ì ê²€ì (ì˜ˆ: ê¹€ëŒ€í™)" />
            </div>
            <div style="display:flex; gap:10px; flex-wrap:wrap;">
              <button class="btn" id="saveMeta" type="button">ğŸ’¾ ì •ë³´ ì €ì¥</button>
              <button class="btn" id="clearAll" type="button">ğŸ§¹ ì „ì²´ í•´ì œ</button>
              <button class="btn primary" id="exportTxt" type="button">ğŸ“„ ì ê²€ê²°ê³¼ ë³µì‚¬</button>
            </div>
          </div>

          <div class="progress" aria-label="ì ê²€ ì§„í–‰ë¥ ">
            <div class="bar" id="bar"></div>
          </div>

          <div style="height:10px"></div>
          <div class="cl-items" id="cl"></div>

          <p style="margin:12px 0 0; color:var(--muted); font-weight:700; font-size:12px;">
            â€» í•­ëª©ì€ ì§€ì¹¨ì˜ â€œí‘œ 1 êµ´ì°©ê¸° ì•ˆì „ì ê²€ ì²´í¬ë¦¬ìŠ¤íŠ¸â€ë¥¼ í˜„ì¥ ì…ë ¥í˜•ìœ¼ë¡œ ì¬êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
          </p>
        </div>
      </div>
    </section>

    <footer>
      <div class="container">
        <div class="foot">
          <div>
            Â© 2010â€“2025 DONGJIN CONSTRUCTION Co., Ltd. Â· Excavator Safety Guidance UI
          </div>
          <div>
            ìë£Œê¸°ë°˜: KOSHA GUIDE C-105-2022 (2022.12) Â· í˜„ì¥ ì‚¬ìš© ëª©ì ì˜ ìš”ì•½/ì¬êµ¬ì„±
          </div>
        </div>
      </div>
    </footer>
  </main>

  <script>
    // -------------------------------
    // Theme
    // -------------------------------
    const root = document.documentElement;
    const themeBtn = document.getElementById('themeBtn');
    const savedTheme = localStorage.getItem('ex_theme');
    if(savedTheme){ root.setAttribute('data-theme', savedTheme); }
    themeBtn.addEventListener('click', () => {
      const cur = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
      root.setAttribute('data-theme', cur);
      localStorage.setItem('ex_theme', cur);
    });

    // Print
    document.getElementById('printBtn').addEventListener('click', () => window.print());

    // -------------------------------
    // Risk data (from guideline, reorganized)
    // -------------------------------
    const risks = [
      {
        type:"ì „ë„Â·ì „ë½",
        hazard:"ë¹„íƒˆë©´ êµ´ì°© ì¤‘ í† ì‚¬ë¶•ê´´ë¡œ ì¥ë¹„ ì „ë„Â·ì „ë½ ë° ë§¤ëª° ìœ„í—˜",
        measure:"êµ´ì°©ë©´ ê¸°ìš¸ê¸° ìœ ì§€(ì„¤ê³„ë„ì„œ ê¸°ìš¸ê¸° ì¤€ìˆ˜)"
      },
      {
        type:"ì „ë„Â·ì „ë½",
        hazard:"ìš´í–‰ ì¤‘ ë…¸ë©´í­ ë¶€ì¡± ë° ì§€ë°˜ìƒíƒœ ë¶ˆëŸ‰ìœ¼ë¡œ ì „ë„Â·ì „ë½",
        measure:"ë…¸ë©´í­ í™•ë³´ ë° ì§€ë°˜ìƒíƒœ í™•ì¸, ì´ë™ê²½ë¡œ ì‚¬ì „ í™•ì¸"
      },
      {
        type:"ì „ë„Â·ì „ë½",
        hazard:"ê°•ìš° ì‹œ ê²½ì‚¬ì§€ ì‘ì—…ìœ¼ë¡œ ë¯¸ë„ëŸ¼/ì „ë„ ìœ„í—˜",
        measure:"ê°•ìš° ì‹œ(íŠ¹íˆ ê²½ì‚¬ì§€) ì‘ì—… ê¸ˆì§€"
      },
      {
        type:"ì „ë„Â·ì „ë½",
        hazard:"ì¤‘ëŸ‰ë¬¼ ìš´ë°˜ ë“± ëª©ì  ì™¸ ì‚¬ìš©ìœ¼ë¡œ ì „ë„ ìœ„í—˜",
        measure:"ì¥ë¹„ ëª©ì  ì™¸ ì‚¬ìš© ê¸ˆì§€"
      },
      {
        type:"ì „ë„Â·ì „ë½",
        hazard:"ë¬´ìê²© ìš´ì „ ë˜ëŠ” ë¯¸ìˆ™ ì¡°ì‘ìœ¼ë¡œ ì „ë„Â·ì „ë½",
        measure:"ìš´ì „ì› ì™¸ ì¥ë¹„ì¡°ì‘ ê¸ˆì§€(ìê²© í™•ì¸)"
      },
      {
        type:"ì¶©ëŒ",
        hazard:"ë¶Â·ì•”Â·ë²„í‚· ì„ íšŒ ë²”ìœ„ ë‚´ ê·¼ë¡œì ì ‘ê·¼, ìœ ë„ì ë¯¸ë°°ì¹˜",
        measure:"ì‘ì—…ë°˜ê²½ ì¶œì…í†µì œ ë° ìœ ë„ì ë°°ì¹˜"
      },
      {
        type:"ì¶©ëŒ",
        hazard:"í›„ì§„ê²½ë³´ê¸° ë¯¸ì‘ë™, í›„ë°©ì˜ìƒí‘œì‹œì¥ì¹˜/í›„ì‚¬ê²½ íŒŒì†",
        measure:"í›„ì§„ê²½ë³´ê¸° ì‘ë™ í™•ì¸ ë° í›„ë°©ì˜ìƒ/í›„ì‚¬ê²½ ì •ë¹„Â·êµì²´"
      },
      {
        type:"ì¶©ëŒ",
        hazard:"ì‹œë™ ì¤‘ ìš´ì „ì„ ì´íƒˆë¡œ ê°‘ì‘ìŠ¤ëŸ° ì´ë™/ì¶©ëŒ",
        measure:"ì‹œë™ ì¤‘ ìš´ì „ì„ ì´íƒˆ ê¸ˆì§€"
      },
      {
        type:"í˜‘ì°©",
        hazard:"í€µì»¤í”ŒëŸ¬ ì•ˆì „í•€ ë¯¸ì²´ê²°/ë¶ˆëŸ‰ìœ¼ë¡œ ë²„í‚· íƒˆë½ â†’ í˜‘ì°©",
        measure:"í€µì»¤í”ŒëŸ¬ ì•ˆì „í•€ ì²´ê²°ìƒíƒœ í™•ì¸(í‘œì‹ ë“±ìœ¼ë¡œ í™•ì¸ ê°•í™”)"
      },
      {
        type:"ê°ì „",
        hazard:"ë¶ì„ ì˜¬ë¦° ìƒíƒœë¡œ ìš´í–‰ ì¤‘ ê³ ì••ì„  ì ‘ì´‰",
        measure:"ë¶ ì˜¬ë¦° ìƒíƒœ ìš´í–‰ ê¸ˆì§€, ê³ ì••ì„  ì ˆì—°Â·ë°©í˜¸ì„¤ë¹„ ìœ ë¬´ í™•ì¸"
      },
    ];

    const riskBody = document.getElementById('riskBody');
    const q = document.getElementById('q');
    const typeSel = document.getElementById('type');
    const resetBtn = document.getElementById('reset');

    function esc(s){
      return String(s)
        .replaceAll('&','&amp;')
        .replaceAll('<','&lt;')
        .replaceAll('>','&gt;')
        .replaceAll('"','&quot;')
        .replaceAll("'","&#039;");
    }

    function renderRisks(){
      const keyword = q.value.trim().toLowerCase();
      const t = typeSel.value;

      const filtered = risks.filter(r => {
        const okType = !t || r.type === t;
        const hay = (r.type + " " + r.hazard + " " + r.measure).toLowerCase();
        const okKey = !keyword || hay.includes(keyword);
        return okType && okKey;
      });

      riskBody.innerHTML = filtered.map(r => `
        <tr>
          <td><span class="tag">${esc(r.type)}</span></td>
          <td>${esc(r.hazard)}</td>
          <td>${esc(r.measure)}</td>
        </tr>
      `).join('') || `
        <tr><td colspan="3" style="padding:18px;color:var(--muted);font-weight:800;">
          ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ í‚¤ì›Œë“œë¡œ ì‹œë„í•´ë³´ì„¸ìš”.
        </td></tr>
      `;
    }

    q.addEventListener('input', renderRisks);
    typeSel.addEventListener('change', renderRisks);
    resetBtn.addEventListener('click', () => {
      q.value = "";
      typeSel.value = "";
      renderRisks();
    });
    renderRisks();

    // -------------------------------
    // Checklist (from Table 1, reorganized)
    // -------------------------------
    const checklist = [
      {
        title:"ì•ˆì „ì¥ì¹˜ ì„¤ì¹˜ ë° ì‘ë™ìƒíƒœ",
        items:[
          {k:"í€µì»¤í”ŒëŸ¬ ì•ˆì „í•€ ì²´ê²°ì—¬ë¶€", d:"ì‘ì—… ì „/êµì²´ í›„ ì¦‰ì‹œ í™•ì¸"},
          {k:"ì „ì¡°ë“±Â·í›„ì§„ê²½ë³´Â·ê²½ê³ ìŒÂ·í›„ë°©ì¹´ë©”ë¼ ë“±", d:"ì‘ë™ìƒíƒœ ì ê²€ ë° ì´ìƒ ì‹œ ì •ë¹„"},
          {k:"ì†Œí™”ê¸° ë° ê³ ì„ëª© êµ¬ë¹„Â·ì‚¬ìš©ìƒíƒœ", d:"ë¹„ìƒëŒ€ì‘ ì¥ë¹„ í™•ë³´"}
        ]
      },
      {
        title:"ì¥ë¹„ ì´ìƒìœ ë¬´ í™•ì¸",
        items:[
          {k:"ì™¸ê´€/ëˆ„ìˆ˜Â·ëˆ„ìœ  ìƒíƒœ", d:"ì˜¤ì¼Â·ìœ ì•• ëˆ„ìœ  í”ì  í™•ì¸"},
          {k:"ìš´ì „ìì˜ ì‹œì•¼í™•ë³´", d:"í›„ì‚¬ê²½/ì¹´ë©”ë¼ ìƒíƒœ í¬í•¨"},
          {k:"ë¶(ì•”) ìœ ì••ì¥ì¹˜Â·ì„ íšŒì¥ì¹˜ ì´ìƒ", d:"ì‘ë™ ì´ìƒ/ì†ŒìŒ/ì§„ë™ í™•ì¸"},
          {k:"ë¬´í•œê¶¤ë„ íŠ¸ë™Â·ìŠˆ / íƒ€ì´ì–´ ì†ìƒÂ·ë§ˆëª¨", d:"ì£¼í–‰ë¶€ ìƒíƒœ í™•ì¸"},
          {k:"ì¡°ì‘ì¥ì¹˜ ë° ì œë™ì¥ì¹˜ ì´ìƒ", d:"ë¸Œë ˆì´í¬/ë ˆë²„/í˜ë‹¬ ê¸°ëŠ¥ í™•ì¸"}
        ]
      },
      {
        title:"ì˜ˆë°©ì •ë¹„/ì´ë ¥ê´€ë¦¬",
        items:[
          {k:"ì¼ì¼ì ê²€ ë° ì˜ˆë°©ì •ë¹„ ì‹¤ì‹œ", d:"ì •ë¹„ ëˆ„ë½ ë°©ì§€"},
          {k:"ìˆ˜ë¦¬Â·ì ê²€ ì´ë ¥ê´€ë¦¬", d:"ë°˜ë³µ ê³ ì¥ ì›ì¸ ì¶”ì "}
        ]
      },
      {
        title:"ìš´ì „ìê²© ì ì •ì—¬ë¶€",
        items:[
          {k:"ë©´í—ˆ/êµìœ¡ ì ì •", d:"3í†¤ ë¯¸ë§Œ: ì†Œí˜•ê±´ì„¤ê¸°ê³„ì¡°ì¢…êµìœ¡ / 3í†¤ ì´ìƒ: ê±´ì„¤ê¸°ê³„ì¡°ì¢…ì‚¬ë©´í—ˆ"}
        ]
      },
      {
        title:"ì‘ì—…ê³„íšì„œ/í˜„ì¥ì¡°ê±´",
        items:[
          {k:"ì§€í˜•Â·ì§€ë°˜ ì‚¬ì „ì¡°ì‚¬", d:"ì¹¨í•˜/ì „ë„ ìœ„í—˜ í¬ì¸íŠ¸ í™•ì¸"},
          {k:"ì‘ì—…ê³„íšì„œ ì‘ì„± ì ì •", d:"ì‘ì—…ì ˆì°¨Â·í†µì œÂ·ì‹ í˜¸ì²´ê³„ í¬í•¨"}
        ]
      },
      {
        title:"ì•ˆì „ì‘ì—… ì¤€ìˆ˜ì‚¬í•­",
        items:[
          {k:"ì •ê¸°ê²€ì‚¬ ì‹¤ì‹œì—¬ë¶€(3í†¤ ì´ìƒ)", d:"ë²•ì • ê²€ì‚¬"},
          {k:"ìœ ë„ì/ì‹ í˜¸ìˆ˜ ë°°ì¹˜(ì‘ì—…ì§€íœ˜)", d:"ì‹œì•¼ë¶ˆëŸ‰Â·í˜¼ì¬ì‘ì—… ì‹œ í•„ìˆ˜"},
          {k:"ìƒÂ·í•˜ ë™ì‹œì‘ì—… ê¸ˆì§€", d:"ë‚™í•˜/í˜‘ì°© ìœ„í—˜"},
          {k:"ë²„í‚· ê·¼ë¡œì íƒ‘ìŠ¹ ê¸ˆì§€", d:"ì ˆëŒ€ ê¸ˆì§€"},
          {k:"ë…¸í­ ìœ ì§€Â·ë…¸ê²¬ ë¶•ê´´/ì¹¨í•˜ ë°©ì§€", d:"êµ´ì°©ë©´Â·ê²½ì‚¬ë©´ í¬í•¨"},
          {k:"ìš´ì „ì„ ì´íƒˆ ì‹œ ë²„í‚· ì§€ìƒì— ë‚´ë ¤ë†“ê¸°", d:"ê°‘ì‘ìŠ¤ëŸ° ì´ë™Â·ë‚™í•˜ ë°©ì§€"},
          {k:"ìš´ë°˜Â·í•˜ì—­ì‘ì—… ì‚¬ìš© ê¸ˆì§€", d:"ëª©ì  ì™¸ ì‚¬ìš© ê¸ˆì§€ ì›ì¹™"}
        ]
      }
    ];

    const cl = document.getElementById('cl');
    const bar = document.getElementById('bar');

    const KEY = "ex_checklist_v1";
    const META = "ex_meta_v1";

    function loadState(){
      try{ return JSON.parse(localStorage.getItem(KEY) || "{}"); }catch(e){ return {}; }
    }
    function saveState(state){
      localStorage.setItem(KEY, JSON.stringify(state));
    }

    function flatten(){
      const flat = [];
      checklist.forEach((g, gi) => {
        g.items.forEach((it, ii) => flat.push({gi, ii, group:g.title, ...it}));
      });
      return flat;
    }

    function renderChecklist(){
      const state = loadState();
      const flat = flatten();

      cl.innerHTML = checklist.map((g, gi) => {
        const items = g.items.map((it, ii) => {
          const id = `${gi}-${ii}`;
          const checked = !!state[id];
          return `
            <label class="cl-item">
              <input type="checkbox" data-id="${id}" ${checked ? "checked":""} />
              <div>
                <b>${esc(it.k)}</b>
                <small>${esc(it.d)}</small>
              </div>
            </label>
          `;
        }).join("");

        return `
          <div class="card" style="box-shadow:none; margin:0; padding:14px 14px;">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;">
              <div style="font-weight:950">${esc(g.title)}</div>
              <button class="btn" type="button" data-group="${gi}" style="padding:8px 10px;font-size:12px;">ê·¸ë£¹ ì „ì²´ì²´í¬</button>
            </div>
            <div style="height:10px"></div>
            <div style="display:grid; gap:10px;">${items}</div>
          </div>
        `;
      }).join("");

      // bind checkbox
      cl.querySelectorAll('input[type="checkbox"][data-id]').forEach(cb => {
        cb.addEventListener('change', (e) => {
          const id = e.target.getAttribute('data-id');
          const s = loadState();
          s[id] = e.target.checked;
          saveState(s);
          updateProgress();
        });
      });

      // group check
      cl.querySelectorAll('button[data-group]').forEach(btn => {
        btn.addEventListener('click', () => {
          const gi = btn.getAttribute('data-group');
          const s = loadState();
          checklist[gi].items.forEach((_, ii) => { s[`${gi}-${ii}`] = true; });
          saveState(s);
          renderChecklist();
          updateProgress();
        });
      });

      updateProgress();
    }

    function updateProgress(){
      const state = loadState();
      const flat = flatten();
      const total = flat.length;
      const done = flat.filter((_, idx) => state[`${flat[idx].gi}-${flat[idx].ii}`]).length;
      const pct = total ? Math.round((done/total)*100) : 0;
      bar.style.width = pct + "%";
      bar.title = `ì§„í–‰ë¥  ${pct}% (${done}/${total})`;
    }

    // Meta
    const site = document.getElementById('site');
    const machine = document.getElementById('machine');
    const inspector = document.getElementById('inspector');
    const saveMeta = document.getElementById('saveMeta');

    function loadMeta(){
      try{ return JSON.parse(localStorage.getItem(META) || "{}"); }catch(e){ return {}; }
    }
    function applyMeta(){
      const m = loadMeta();
      if(m.site) site.value = m.site;
      if(m.machine) machine.value = m.machine;
      if(m.inspector) inspector.value = m.inspector;
    }
    saveMeta.addEventListener('click', () => {
      localStorage.setItem(META, JSON.stringify({
        site: site.value.trim(),
        machine: machine.value.trim(),
        inspector: inspector.value.trim()
      }));
      alert("ì ê²€ ì •ë³´ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
    });

    // Clear
    document.getElementById('clearAll').addEventListener('click', () => {
      if(!confirm("ì²´í¬ë¥¼ ëª¨ë‘ í•´ì œí• ê¹Œìš”?")) return;
      localStorage.removeItem(KEY);
      renderChecklist();
    });

    // Export text
    document.getElementById('exportTxt').addEventListener('click', async () => {
      const m = loadMeta();
      const metaText = [
        `í˜„ì¥ëª…: ${site.value.trim() || m.site || "-"}`,
        `ì¥ë¹„: ${machine.value.trim() || m.machine || "-"}`,
        `ì ê²€ì: ${inspector.value.trim() || m.inspector || "-"}`,
        `ì¼ì‹œ: ${new Date().toLocaleString()}`
      ].join("\n");

      const state = loadState();
      const flat = flatten();
      const done = [];
      const notyet = [];
      flat.forEach((it) => {
        const id = `${it.gi}-${it.ii}`;
        (state[id] ? done : notyet).push(`- [${state[id] ? "x":" "}] (${it.group}) ${it.k}`);
      });

      const text = [
        "êµ´ì°©ê¸° ì¼ì¼ì ê²€ ê²°ê³¼",
        "====================",
        metaText,
        "",
        "ì™„ë£Œ í•­ëª©",
        "--------",
        done.join("\n") || "(ì—†ìŒ)",
        "",
        "ë¯¸ì™„ë£Œ í•­ëª©",
        "----------",
        notyet.join("\n") || "(ì—†ìŒ)",
        "",
        "â€» ë³¸ ì²´í¬ë¦¬ìŠ¤íŠ¸ëŠ” KOSHA GUIDE C-105-2022 ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ í˜„ì¥ ì ê²€ìš©ìœ¼ë¡œ ì¬êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤."
      ].join("\n");

      try{
        await navigator.clipboard.writeText(text);
        alert("ì ê²€ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤. (ì¹´í†¡/ë¬¸ì„œ/ì¼ì§€ì— ë¶™ì—¬ë„£ê¸° ê°€ëŠ¥)");
      }catch(e){
        // fallback
        const ta = document.createElement('textarea');
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        ta.remove();
        alert("ì ê²€ê²°ê³¼ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
      }
    });

    // Init
    applyMeta();
    renderChecklist();

  // ===============================
  // â˜…â˜…â˜… ì—¬ê¸°ë¶€í„° TBM ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€ â˜…â˜…â˜…
  // ===============================

  const genTBM = document.getElementById("genTBM");
  const copyTBM = document.getElementById("copyTBM");

  genTBM.addEventListener("click", () => {
    const site =
      document.getElementById("tbmSite").value.trim() || "ë³¸ í˜„ì¥";
    const work =
      document.getElementById("tbmWork").value.trim() || "êµ´ì°©ê¸° ì‘ì—…";

    const script = `
ì§€ê¸ˆë¶€í„° ì‘ì—… ì „ ì•ˆì „êµìœ¡ì„ ì‹¤ì‹œí•˜ê² ìŠµë‹ˆë‹¤.

ì—¬ê¸°ëŠ” ${site}ì´ë©°,
ì˜¤ëŠ˜ ì‘ì—…ì€ ${work}ì…ë‹ˆë‹¤.

êµ´ì°©ê¸° ì‘ì—… ì¤‘ì—ëŠ”
â–¶ ì¥ë¹„ ë°˜ê²½ ë‚´ ì ‘ê·¼ ê¸ˆì§€
â–¶ ìœ ë„ì ì‹ í˜¸ ì¤€ìˆ˜
â–¶ ì „ë„Â·í˜‘ì°© ìœ„í—˜ì— íŠ¹íˆ ì£¼ì˜í•˜ì‹­ì‹œì˜¤.

ëª¨ë“  ì‘ì—…ìëŠ” ë³´í˜¸êµ¬ë¥¼ ì² ì €íˆ ì°©ìš©í•˜ê³ ,
ì´ìƒ ë°œìƒ ì‹œ ì¦‰ì‹œ ì‘ì—…ì„ ì¤‘ì§€í•˜ê³  ë³´ê³  ë°”ëë‹ˆë‹¤.
    `.trim();

    document.getElementById("tbmResult").value = script;
  });

  copyTBM.addEventListener("click", async () => {
    const text = document.getElementById("tbmResult").value;
    if (!text) {
      alert("ë¨¼ì € TBM ë¬¸êµ¬ë¥¼ ìƒì„±í•˜ì„¸ìš”.");
      return;
    }
    await navigator.clipboard.writeText(text);
    alert("TBM ë¬¸êµ¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
  });

  </script>
</body>
</html>
