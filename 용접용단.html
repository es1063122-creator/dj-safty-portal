<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ê±´ì„¤í˜„ì¥ ìš©ì ‘Â·ìš©ë‹¨(í™”ê¸°ì‘ì—…) ì•ˆì „ë³´ê±´ì‘ì—… ì§€ì¹¨ | ê°œìš”Â·ìœ„í—˜ìš”ì¸Â·SOPÂ·ì ê²€Â·TBM</title>
<meta name="description" content="KOSHA GUIDE C-108-2017 ê¸°ë°˜. ìš©ì ‘Â·ìš©ë‹¨(í™”ê¸°ì‘ì—…) ì•ˆì „ë³´ê±´ì‘ì—… ì§€ì¹¨: ìœ„í—˜ìš”ì¸ ê²€ìƒ‰/í•„í„°, ì €ì¥í˜• ì²´í¬ë¦¬ìŠ¤íŠ¸, TBM í˜¼í•© ë¶„ê¸°, ì¦‰ì‹œì¤‘ì§€ ê¸°ì¤€."/>
<meta name="theme-color" content="#2563eb"/>

<link rel="stylesheet" as="style" crossorigin
href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css"/>

<style>
:root{
  --blue:#2563eb; --blue2:#60a5fa; --ink:#0b1220; --muted:#5a6477;
  --bg:#f5f8ff; --card:#fff; --line:rgba(37,99,235,.18);
  --shadow:0 18px 60px rgba(37,99,235,.14); --r:18px; --r2:26px;
  --danger:#ef4444; --warn:#f59e0b; --ok:#22c55e;
}
[data-theme="dark"]{
  --ink:#e9f1ff; --muted:#b7c6dd; --bg:#0c1423; --card:#101c33;
  --line:rgba(96,165,250,.26); --shadow:0 18px 60px rgba(0,0,0,.45);
}
*{box-sizing:border-box}
body{
  margin:0; font-family:Pretendard,system-ui,sans-serif; color:var(--ink);
  background:
    radial-gradient(1200px 600px at 15% 0%, rgba(37,99,235,.18), transparent 55%),
    radial-gradient(900px 520px at 85% 0%, rgba(96,165,250,.18), transparent 50%),
    var(--bg);
  line-height:1.72;
}
a{color:inherit;text-decoration:none}
.container{width:min(1200px, calc(100% - 40px)); margin:0 auto}

/* Topbar */
.topbar{position:sticky; top:0; z-index:50; backdrop-filter: blur(14px);
  background:linear-gradient(180deg, rgba(255,255,255,.84), rgba(255,255,255,.62));
  border-bottom:1px solid var(--line);}
[data-theme="dark"] .topbar{
  background:linear-gradient(180deg, rgba(16,28,51,.88), rgba(16,28,51,.66));
}
.topbar-inner{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:12px 0}
.brand{display:flex; align-items:center; gap:12px; font-weight:950}
.logo{width:38px;height:38px;border-radius:12px;background:linear-gradient(135deg,var(--blue),var(--blue2)); box-shadow:0 14px 40px rgba(37,99,235,.35)}
.brand small{display:block; font-size:12px; color:var(--muted); font-weight:800}
.nav{display:flex; gap:14px; font-size:13px; font-weight:900; color:var(--muted)}
.nav a{padding:8px 10px; border-radius:999px}
.nav a:hover{background:rgba(37,99,235,.10); color:var(--ink)}
.actions{display:flex; gap:10px}
.btn{
  border:1px solid var(--line); background:rgba(255,255,255,.70);
  border-radius:999px; padding:10px 12px; font-weight:950; cursor:pointer
}
[data-theme="dark"] .btn{background:rgba(16,28,51,.70)}
.btn.primary{background:linear-gradient(135deg,var(--blue),var(--blue2)); color:#fff; border:none; box-shadow:0 18px 45px rgba(37,99,235,.35)}
.btn.danger{background:linear-gradient(135deg, #ef4444, #fb7185); color:#fff; border:none}
@media(max-width:980px){.nav{display:none}}

/* Hero */
.hero{padding:42px 0 20px}
.hero-grid{display:grid; grid-template-columns:1.12fr .88fr; gap:22px}
@media(max-width:980px){.hero-grid{grid-template-columns:1fr}}
.hero-card{
  background:linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.76));
  border:1px solid var(--line); border-radius:var(--r2); padding:26px; box-shadow:var(--shadow)
}
[data-theme="dark"] .hero-card{background:linear-gradient(180deg, rgba(16,28,51,.92), rgba(16,28,51,.70))}
.badge{display:inline-flex; gap:8px; align-items:center; padding:7px 12px; border-radius:999px;
  background:rgba(37,99,235,.14); border:1px solid var(--line); font-weight:950; font-size:12px}
.dot{width:8px;height:8px;border-radius:99px;background:linear-gradient(135deg,var(--blue),var(--blue2))}
h1{margin:14px 0 10px; font-size:36px; letter-spacing:-.03em}
.lead{color:var(--muted); font-weight:850}
.hero-kpis{display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-top:18px}
.kpi{background:rgba(37,99,235,.12); border:1px solid var(--line); border-radius:16px; padding:12px}
.kpi b{font-size:12px; color:var(--muted)} .kpi strong{display:block; font-size:18px; margin-top:4px}

/* Sections */
section{padding:26px 0}
.section-title{display:flex; justify-content:space-between; align-items:flex-end; gap:14px; margin-bottom:14px}
.section-title h2{margin:0; font-size:22px}
.hint{color:var(--muted); font-weight:850; font-size:13px}
.grid{display:grid; grid-template-columns:repeat(3,1fr); gap:14px}
@media(max-width:980px){.grid{grid-template-columns:1fr}}
.card{background:var(--card); border:1px solid var(--line); border-radius:var(--r);
  padding:18px; box-shadow:0 12px 30px rgba(37,99,235,.14)}
.card h3{margin:0 0 8px; font-size:16px}
.card p{margin:0; color:var(--muted); font-weight:850}
.list{padding-left:18px; color:var(--muted); font-weight:850}
.hr{height:1px; background:rgba(37,99,235,.18); margin:14px 0}

/* Callouts */
.callout{
  border-radius:18px; padding:14px 16px; border:1px solid var(--line);
  background:linear-gradient(180deg, rgba(37,99,235,.10), rgba(37,99,235,.06));
}
.callout.danger{
  border-color:rgba(239,68,68,.35);
  background:linear-gradient(180deg, rgba(239,68,68,.16), rgba(239,68,68,.06));
}
.callout .title{font-weight:950; display:flex; gap:10px; align-items:center}
.callout .desc{color:var(--muted); font-weight:850; margin-top:6px}

/* Toolbar & inputs */
.toolbar{display:flex; gap:10px; flex-wrap:wrap; justify-content:space-between; align-items:center}
.inputs{display:flex; gap:10px; flex-wrap:wrap; width:100%}
.input, select, textarea{
  border:1px solid var(--line); border-radius:12px; padding:10px 12px;
  font-weight:900; background:rgba(255,255,255,.72); color:var(--ink); outline:none}
[data-theme="dark"] .input,[data-theme="dark"] select,[data-theme="dark"] textarea{background:rgba(16,28,51,.72)}
textarea{width:100%; font-weight:850}
.input{flex:1; min-width:220px}
select{min-width:180px}
.mini-actions{display:flex; gap:10px; flex-wrap:wrap}

/* Risk table */
.table-wrap{overflow:auto; border:1px solid var(--line); border-radius:16px; background:var(--card)}
table{border-collapse:separate; border-spacing:0; min-width:1050px; width:100%}
thead th{position:sticky; top:0; background:rgba(37,99,235,.18); padding:12px; font-weight:950; text-align:left}
tbody td{padding:12px; border-bottom:1px solid rgba(37,99,235,.18); color:var(--muted); font-weight:850; vertical-align:top}
.tag{display:inline-flex; padding:6px 10px; border-radius:999px; border:1px solid var(--line);
  background:rgba(37,99,235,.12); font-weight:950; font-size:12px; color:var(--ink)}
.tag.red{background:rgba(239,68,68,.14); border-color:rgba(239,68,68,.32)}
.tag.ylw{background:rgba(245,158,11,.16); border-color:rgba(245,158,11,.34)}
.tag.grn{background:rgba(34,197,94,.14); border-color:rgba(34,197,94,.32)}

/* SOP */
.steps{display:grid; grid-template-columns:repeat(3,1fr); gap:14px}
@media(max-width:980px){.steps{grid-template-columns:1fr}}
.step{background:var(--card); border:1px solid var(--line); border-radius:var(--r); padding:18px; box-shadow:0 12px 30px rgba(37,99,235,.14)}
.no{width:34px;height:34px;border-radius:12px; display:grid;place-items:center; background:linear-gradient(135deg,var(--blue),var(--blue2)); color:#fff; font-weight:950; margin-bottom:10px}
.step h4{margin:0 0 8px; font-size:15px}
.step ul{margin:0; padding-left:18px; color:var(--muted); font-weight:850}

/* Checklist */
.checklist{background:var(--card); border:1px solid var(--line); border-radius:var(--r2); padding:18px; box-shadow:var(--shadow)}
.progress{height:10px; background:rgba(37,99,235,.20); border-radius:999px; overflow:hidden}
.bar{height:100%; width:0%; background:linear-gradient(90deg,var(--blue),var(--blue2))}
.cl-grid{display:grid; grid-template-columns:repeat(2,1fr); gap:10px; margin-top:14px}
@media(max-width:980px){.cl-grid{grid-template-columns:1fr}}
.cl-item{display:flex; gap:10px; align-items:flex-start; padding:12px; border-radius:16px;
  background:rgba(37,99,235,.10); border:1px solid rgba(37,99,235,.16)}
.cl-item input{margin-top:4px; accent-color:var(--blue)}
.cl-item b{display:block} .cl-item span{display:block; color:var(--muted); font-weight:850; font-size:13px}
.group-title{margin:14px 0 6px; font-weight:950; color:var(--ink)}

/* Print */
@media print{
  .topbar,.nav,.actions,.toolbar,.mini-actions{display:none!important}
  body{background:#fff}
  .card,.hero-card,.checklist,.step{box-shadow:none!important}
  .table-wrap{border:1px solid #ddd}
}
</style>
</head>

<body>
<!-- Topbar -->
<div class="topbar">
  <div class="container">
    <div class="topbar-inner">
      <div class="brand">
        <div class="logo"></div>
        <div>
          ê±´ì„¤í˜„ì¥ ìš©ì ‘Â·ìš©ë‹¨(í™”ê¸°ì‘ì—…) ì•ˆì „ë³´ê±´ì‘ì—… ì§€ì¹¨
          <small>í™”ì¬Â·í­ë°œÂ·ê°ì „Â·ì§ˆì‹/í„Â·ìœ í•´ê´‘ì„  ì˜ˆë°© | ê°œìš” Â· ìœ„í—˜ìš”ì¸ Â· SOP Â· ì ê²€ Â· TBM</small>
        </div>
      </div>
      <nav class="nav">
        <a href="#overview">ê°œìš”</a>
        <a href="#risks">ìœ„í—˜ìš”ì¸</a>
        <a href="#sop">SOP</a>
        <a href="#check">ì ê²€</a>
        <a href="#tbm">TBM</a>
      </nav>
      <div class="actions">
        <button class="btn" id="themeBtn" title="ë‹¤í¬ëª¨ë“œ">ğŸŒ™</button>
        <button class="btn" onclick="window.print()" title="ì¸ì‡„/PDF">ğŸ–¨ï¸</button>
        <a class="btn primary" href="#tbm" title="TBMë¡œ ì´ë™">ğŸ™ï¸ TBM</a>
      </div>
    </div>
  </div>
</div>

<!-- Hero -->
<header class="hero" id="top">
  <div class="container">
    <div class="hero-grid">
      <div class="hero-card">
        <span class="badge"><span class="dot"></span> í˜„ì¥ í‘œì¤€(CIP Master)</span>
        <h1>ìš©ì ‘Â·ìš©ë‹¨ ì¬í•´ëŠ”<br/>â€œë¶ˆí‹°Â·ê°€ìŠ¤Â·ì „ê¸°Â·ë°€íê³µê°„â€ì—ì„œ ì‹œì‘í•©ë‹ˆë‹¤.</h1>
        <p class="lead">
          ë³¸ ì§€ì¹¨ì€ ê±´ì„¤í˜„ì¥ ìš©ì ‘Â·ìš©ë‹¨(í™”ê¸°ì‘ì—…)ì—ì„œ ë°˜ë³µë˜ëŠ” í•µì‹¬ ì¬í•´ë¥¼
          <b>í™”ì¬ì˜ˆë°©(11m ê²©ë¦¬Â·í™”ì¬ê°ì‹œì¸) â†’ í­ë°œì˜ˆë°©(ê°€ìŠ¤ëˆ„ì¶œÂ·ì—­í™”) â†’ ê°ì „ì˜ˆë°©(ìë™ì „ê²©ë°©ì§€ê¸°) â†’ ì‘ì—…ìë³´í˜¸(ê°€ìŠ¤ì¸¡ì •Â·í™˜ê¸°Â·í„/ë³´ì•ˆë©´Â·ì†ŒìŒ)</b>
          ìˆœìœ¼ë¡œ ë°”ë¡œ ì ìš©í•˜ë„ë¡ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
        </p>
        <div class="hero-kpis">
          <div class="kpi"><b>ì¤‘ì  ì¬í•´</b><strong>í™”ì¬</strong></div>
          <div class="kpi"><b>ì¤‘ì  ì¬í•´</b><strong>í­ë°œ</strong></div>
          <div class="kpi"><b>ì¤‘ì  ì¬í•´</b><strong>ê°ì „Â·ì§ˆì‹</strong></div>
        </div>
      </div>

      <div class="hero-card">
        <h3 style="margin-top:0;">ğŸš¨ ì¦‰ì‹œì¤‘ì§€(Stop Work) ê¸°ì¤€</h3>
        <div class="callout danger">
          <div class="title">ğŸ›‘ â€œì´ìƒ ì§•í›„â€ê°€ ë³´ì´ë©´ ì¦‰ì‹œ ì¤‘ì§€</div>
          <div class="desc">
            ê°€ìŠ¤ ëƒ„ìƒˆ/ëˆ„ì¶œ, í˜¸ìŠ¤ ê· ì—´Â·ì´íƒˆ, ì—­í™”(ë…¸ì¦ë¡œ í™”ì—¼ ì—­ë¥˜),
            ë¶ˆí‹° ë¹„ì‚° ì œì–´ ë¶ˆê°€, ì‚°ì†ŒÂ·ìœ í•´ê°€ìŠ¤ ë†ë„ ê¸°ì¤€ ë¶ˆë§Œì¡±,
            ì „ê¸° ì ˆì—° ì†ìƒ/ëˆ„ì „ ì˜ì‹¬, ì¸í™”ë¬¼ ê²©ë¦¬ ë¯¸í™•ë³´ ì‹œ<br/>
            <b>ì‘ì—…ì¤‘ì§€ â†’ ê°€ìŠ¤/ì „ì› ì°¨ë‹¨ â†’ ì ‘ê·¼í†µì œ â†’ ë³´ê³  í›„ ì¬ê°œ</b>.
           </div>
        </div>
        <div class="hr"></div>
        <h3 style="margin:0 0 10px;">ğŸ¯ ì¦‰ì‹œ í†µì œ í¬ì¸íŠ¸</h3>
        <ul class="list">
          <li><b>ë™ì¼ ë†’ì´ ë¶ˆí‹° ìˆ˜í‰ ë¹„ì‚° 11m</b> ê²©ë¦¬(ì¸í™”Â·ê°€ì—°ë¬¼)</li>
          <li>ê²©ë¦¬/ë°©í˜¸ ì–´ë ¤ìš°ë©´ <b>í™”ì¬ê°ì‹œì¸ ë°°ì¹˜</b></li>
          <li>ê°€ìŠ¤ìš©ì ‘Â·ìš©ë‹¨ì€ <b>ì—­í™”ë°©ì§€ê¸°</b> ì„¤ì¹˜/ì •ìƒ ì‘ë™ /li>
          <li>ì „ê¸°ìš©ì ‘ì€ <b>ìë™ì „ê²©ë°©ì§€ê¸°(ë¬´ë¶€í•˜ 30Vâ†“)</b></li>
        </ul>
      </div>
    </div>
  </div>
</header>

<main>
<!-- ê°œìš” -->
<section id="overview">
  <div class="container">
    <div class="section-title">
      <h2>ê°œìš”</h2>
      <div class="hint">ëª©ì  Â· ì ìš© Â· ìš©ì–´ Â· í•µì‹¬ ê¸°ì¤€</div>
    </div>

    <div class="grid">
      <div class="card">
        <h3>ëª©ì </h3>
        <p>ê±´ì„¤í˜„ì¥ ìš©ì ‘Â·ìš©ë‹¨ ì‘ì—… ì‹œ ê·¼ë¡œìì˜ ì•ˆì „ë³´ê±´ í™•ë³´ë¥¼ ìœ„í•œ ê¸°ìˆ ì§€ì¹¨.</p>
      </div>
      <div class="card">
        <h3>ì ìš©ë²”ìœ„</h3>
        <p>ë‹¤ë¥¸ ì‘ì—… ì¸ì ‘, ë°€íëœ ì¥ì†Œ, ì¸í™”Â·ê°€ì—°ë¬¼ ì¸ì ‘ ë“±ì—ì„œ ìˆ˜í–‰í•˜ëŠ” ìš©ì ‘Â·ìš©ë‹¨ ì‘ì—….</p>
      </div>
      <div class="card">
        <h3>í•µì‹¬ ê¸°ì¤€(í˜„ì¥)</h3>
        <p><b>11m ê²©ë¦¬</b> + ë°©í˜¸ ì–´ë ¤ìš°ë©´ <b>í™”ì¬ê°ì‹œì¸</b> + <b>ê°€ìŠ¤/ì „ì› ì¦‰ì‹œ ì°¨ë‹¨</b>.</p>
      </div>
    </div>

    <div class="card">
      <h3>ìš©ì–´(ì‹¤ë¬´ í•µì‹¬)</h3>
      <ul class="list">
        <li><b>í™”ê¸°ì‘ì—…</b>: ìš©ì ‘Â·ìš©ë‹¨ ë“± í™”ì—¼/ìŠ¤íŒŒí¬ë¡œ ì¸í™”ì„±Â·ê°€ì—°ì„± ë¬¼ì§ˆ ì í™”ì›ì´ ë  ìˆ˜ ìˆëŠ” ì‘ì—… </li>
        <li><b>ë°€íê³µê°„</b>: í™˜ê¸° ë¶ˆì¶©ë¶„ìœ¼ë¡œ ì‚°ì†Œê²°í•Â·ìœ í•´ê°€ìŠ¤ ì¤‘ë…Â·í™”ì¬Â·í­ë°œ ìœ„í—˜ì´ ìˆëŠ” ì¥ì†Œ(ë³„í‘œ 18)</li>
        <li><b>ì—­í™”</b>: ë…¸ì¦ í™”ì—¼ì´ ì·¨ê´€ ìª½ìœ¼ë¡œ ë˜ëŒì•„ì˜¤ëŠ” í˜„ìƒ :contentReference[oaicite:12]{index=12}</li>
        <li><b>ìš©ì ‘í„</b>: ìš©ì ‘ ì‹œ ê¸ˆì† ì¦ê¸° ì‘ì¶•/ì‚°í™” ë°˜ì‘ ë“±ìœ¼ë¡œ ìƒê¸°ëŠ” ê³ ì²´ ë¯¸ë¦½ì</li>
      </ul>
    </div>
  </div>
</section>

<!-- ìœ„í—˜ìš”ì¸ -->
<section id="risks">
  <div class="container">
    <div class="section-title">
      <h2>ì¤‘ì  ìœ„í—˜ìš”ì¸</h2>
      <div class="hint">ê²€ìƒ‰ Â· í•„í„°</div>
    </div>

    <div class="toolbar">
      <div class="inputs">
        <input class="input" id="q" placeholder="ê²€ìƒ‰(ì˜ˆ: 11m, í™”ì¬ê°ì‹œì¸, ì—­í™”, ëˆ„ì¶œ, ìë™ì „ê²©, ë°€íê³µê°„, í„)">
        <select id="fStep">
          <option value="">êµ¬ë¶„ ì „ì²´</option>
          <option value="í™”ì¬ì˜ˆë°©">í™”ì¬ì˜ˆë°©</option>
          <option value="í­ë°œì˜ˆë°©">í­ë°œì˜ˆë°©</option>
          <option value="ê°ì „ì˜ˆë°©">ê°ì „ì˜ˆë°©</option>
          <option value="ì‘ì—…ìë³´í˜¸">ì‘ì—…ìë³´í˜¸</option>
        </select>
        <select id="fWork">
          <option value="">ì‘ì—…ìœ í˜• ì „ì²´</option>
          <option value="ì „ê¸°ìš©ì ‘">ì „ê¸°ìš©ì ‘</option>
          <option value="ê°€ìŠ¤ìš©ì ‘">ê°€ìŠ¤ìš©ì ‘</option>
          <option value="ê°€ìŠ¤ìš©ë‹¨">ê°€ìŠ¤ìš©ë‹¨</option>
          <option value="ê³µí†µ">ê³µí†µ</option>
        </select>
        <select id="fType">
          <option value="">ì¬í•´ìœ í˜• ì „ì²´</option>
          <option value="í™”ì¬">í™”ì¬</option>
          <option value="í­ë°œ">í­ë°œ</option>
          <option value="ê°ì „">ê°ì „</option>
          <option value="ì§ˆì‹/ì¤‘ë…">ì§ˆì‹/ì¤‘ë…</option>
          <option value="í™”ìƒ/ìœ í•´ê´‘ì„ ">í™”ìƒ/ìœ í•´ê´‘ì„ </option>
          <option value="ì†ŒìŒ">ì†ŒìŒ</option>
        </select>
      </div>

      <div class="mini-actions">
        <button class="btn" id="resetRisk">ì´ˆê¸°í™”</button>
        <button class="btn danger" id="copyRiskTop">í•µì‹¬ 5ì¤„ ë³µì‚¬</button>
      </div>
    </div>

    <div class="table-wrap" style="margin-top:12px;">
      <table id="riskTable">
        <thead>
          <tr>
            <th style="width:130px;">ì¬í•´ìœ í˜•</th>
            <th style="width:120px;">êµ¬ë¶„</th>
            <th style="width:120px;">ì‘ì—…ìœ í˜•</th>
            <th>ìœ„í—˜ìš”ì¸(ìƒí™©)</th>
            <th>í†µì œëŒ€ì±…(í•µì‹¬)</th>
          </tr>
        </thead>
        <tbody>
          <!-- í™”ì¬ì˜ˆë°© -->
          <tr data-step="í™”ì¬ì˜ˆë°©" data-work="ê³µí†µ" data-type="í™”ì¬">
            <td><span class="tag red">í™”ì¬</span></td>
            <td>í™”ì¬ì˜ˆë°©</td><td>ê³µí†µ</td>
            <td>ì‘ì—… ì „ ì¸í™”Â·ê°€ì—°ë¬¼ ì¡´ì¬/ë¶ˆí‹° ì ‘ì´‰</td>
            <td>ìœ„í—˜ì„±í‰ê°€ë¡œ ìœ„í—˜ìš”ì¸ ì œê±°Â·ë°©í˜¸ í›„ ì‘ì—…</td>
          </tr>
          <tr data-step="í™”ì¬ì˜ˆë°©" data-work="ê³µí†µ" data-type="í™”ì¬">
            <td><span class="tag red">í™”ì¬</span></td>
            <td>í™”ì¬ì˜ˆë°©</td><td>ê³µí†µ</td>
            <td>ë¶ˆí‹° ìˆ˜í‰ ë¹„ì‚°/ê°œêµ¬ë¶€ë¡œ ë¶ˆí‹° ìœ ì…</td>
            <td>ë™ì¼ ë†’ì´ ê¸°ì¤€ <b>11m ì´ìƒ ê²©ë¦¬</b>, ê°œêµ¬ë¶€ ë°©ì—¼ì‹œíŠ¸ ë°©í˜¸ </td>
          </tr>
          <tr data-step="í™”ì¬ì˜ˆë°©" data-work="ê³µí†µ" data-type="í™”ì¬">
            <td><span class="tag ylw">í™”ì¬</span></td>
            <td>í™”ì¬ì˜ˆë°©</td><td>ê³µí†µ</td>
            <td>ê²©ë¦¬/íì‡„ ì–´ë ¤ìš´ ì¡°ê±´ì—ì„œ í™”ê¸°ì‘ì—…</td>
            <td><b>í™”ì¬ê°ì‹œì¸ ë°°ì¹˜</b>(ë°˜ê²½ 11m, ê°œêµ¬ë¶€ ë°©í˜¸ ê³¤ë€ ë“±) </td>
          </tr>
          <tr data-step="í™”ì¬ì˜ˆë°©" data-work="ê³µí†µ" data-type="í™”ì¬">
            <td><span class="tag ylw">í™”ì¬</span></td>
            <td>í™”ì¬ì˜ˆë°©</td><td>ê³µí†µ</td>
            <td>ê°€ì—°ì„± ë‹¨ì—´ì¬Â·ìƒŒë“œìœ„ì¹˜íŒ¨ë„Â·í¼ ì¸ì ‘</td>
            <td>ê°€ëŠ¥ ì‹œ ì œê±°, ë¶ˆê½ƒ/ë¶ˆí‹° ì ‘ì´‰ ê¸ˆì§€, ë¶™í‹°ë°›ì´í¬ ì„¤ì¹˜ </td>
          </tr>

          <!-- í­ë°œì˜ˆë°© -->
          <tr data-step="í­ë°œì˜ˆë°©" data-work="ê°€ìŠ¤ìš©ì ‘" data-type="í­ë°œ">
            <td><span class="tag red">í­ë°œ</span></td>
            <td>í­ë°œì˜ˆë°©</td><td>ê°€ìŠ¤ìš©ì ‘</td>
            <td>ê°€ìŠ¤ìš©ê¸°/í˜¸ìŠ¤/ë°¸ë¸Œ ëˆ„ì¶œ</td>
            <td>ì‘ì—… ì „ êµ¬ì„±í’ˆ ì ê²€Â·ê¸°ë°€ì‹œí—˜, ëˆ„ì¶œ ì‹œ ê°œë°©ì¥ì†Œë¡œ ì´ë™ ìˆ˜ë¦¬ </td>
          </tr>
          <tr data-step="í­ë°œì˜ˆë°©" data-work="ê°€ìŠ¤ìš©ë‹¨" data-type="í­ë°œ">
            <td><span class="tag red">í­ë°œ</span></td>
            <td>í­ë°œì˜ˆë°©</td><td>ê°€ìŠ¤ìš©ë‹¨</td>
            <td>ì—­í™”ë¡œ ì¸í•œ í™”ì—¼ ì—­ë¥˜</td>
            <td><b>ì—­í™”ë°©ì§€ê¸° ì„¤ì¹˜</b>(ì••ë ¥ì¡°ì ˆê¸°~í˜¸ìŠ¤ ì‚¬ì´) ë° ì •ìƒ ì‘ë™ í™•ì¸ </td>
          </tr>
          <tr data-step="í­ë°œì˜ˆë°©" data-work="ê°€ìŠ¤ìš©ì ‘" data-type="í­ë°œ">
            <td><span class="tag ylw">í­ë°œ</span></td>
            <td>í­ë°œì˜ˆë°©</td><td>ê°€ìŠ¤ìš©ì ‘</td>
            <td>ê°€ìŠ¤ìš©ê¸° ì „ë„Â·ì¶©ê²©</td>
            <td>ìš©ê¸° ì„¸ì›Œ ë³´ê´€, êµ´ë¦¼/ì–´ê¹¨ ìš´ë°˜ ê¸ˆì§€, ì „ìš© ìš´ë°˜ì¥ë¹„ ì‚¬ìš© </td>
          </tr>

          <!-- ê°ì „ì˜ˆë°© -->
          <tr data-step="ê°ì „ì˜ˆë°©" data-work="ì „ê¸°ìš©ì ‘" data-type="ê°ì „">
            <td><span class="tag red">ê°ì „</span></td>
            <td>ê°ì „ì˜ˆë°©</td><td>ì „ê¸°ìš©ì ‘</td>
            <td>ì –ì€ ì˜ë³µ/ìŠµë„, í™€ë”Â·ì¼€ì´ë¸” ì ˆì—° ë¶ˆëŸ‰</td>
            <td>ê±´ì¡°ìƒíƒœ ìœ ì§€, í›¼ì† ì¼€ì´ë¸” êµì²´/ë³´ìˆ˜, ì ˆì—° í™€ë” ì‚¬ìš©</td>
          </tr>
          <tr data-step="ê°ì „ì˜ˆë°©" data-work="ì „ê¸°ìš©ì ‘" data-type="ê°ì „">
            <td><span class="tag red">ê°ì „</span></td>
            <td>ê°ì „ì˜ˆë°©</td><td>ì „ê¸°ìš©ì ‘</td>
            <td>ë¬´ë¶€í•˜ ì „ì••ìœ¼ë¡œ ê°ì „ ìœ„í—˜</td>
            <td><b>ìë™ì „ê²©ë°©ì§€ê¸°</b>ë¡œ ë¬´ë¶€í•˜ ì „ì•• 30V ì´í•˜ ìœ ì§€, ì‘ë™ ìˆ˜ì‹œ í™•ì¸ </td>
          </tr>

          <!-- ì‘ì—…ìë³´í˜¸ -->
          <tr data-step="ì‘ì—…ìë³´í˜¸" data-work="ê³µí†µ" data-type="ì§ˆì‹/ì¤‘ë…">
            <td><span class="tag red">ì§ˆì‹/ì¤‘ë…</span></td>
            <td>ì‘ì—…ìë³´í˜¸</td><td>ê³µí†µ</td>
            <td>ë°€íê³µê°„ì—ì„œ ì‚°ì†Œê²°í•/ìœ í•´ê°€ìŠ¤</td>
            <td>ì‘ì—… ì „ ì‚°ì†ŒÂ·ìœ í•´ê°€ìŠ¤ ë†ë„ ì¸¡ì •, í™˜ê¸°/ë°°ê¸° ìœ ì§€ </td>
          </tr>
          <tr data-step="ì‘ì—…ìë³´í˜¸" data-work="ê³µí†µ" data-type="ì§ˆì‹/ì¤‘ë…">
            <td><span class="tag ylw">ì§ˆì‹/ì¤‘ë…</span></td>
            <td>ì‘ì—…ìë³´í˜¸</td><td>ê³µí†µ</td>
            <td>ìš©ì ‘ í„/ìœ í•´ê°€ìŠ¤ ë°œìƒ</td>
            <td>êµ­ì†Œ/ì „ì²´ í™˜ê¸°ì‹œì„¤, í˜¸í¡ìš© ë³´í˜¸êµ¬(ë°©ë…/ì†¡ê¸°) ë¹„ì¹˜Â·ì°©ìš©</td>
          </tr>
          <tr data-step="ì‘ì—…ìë³´í˜¸" data-work="ì „ê¸°ìš©ì ‘" data-type="í™”ìƒ/ìœ í•´ê´‘ì„ ">
            <td><span class="tag ylw">í™”ìƒ/ìœ í•´ê´‘ì„ </span></td>
            <td>ì‘ì—…ìë³´í˜¸</td><td>ì „ê¸°ìš©ì ‘</td>
            <td>ì•„í¬ê´‘(ìì™¸ì„ /ì ì™¸ì„ )ìœ¼ë¡œ ëˆˆÂ·í”¼ë¶€ ì†ìƒ</td>
            <td>ì•ˆì „ì¸ì¦ ì°¨ê´‘ ë³´ì•ˆë©´/ë³´ì•ˆê²½, ì¸ì ‘ ê·¼ë¡œì ì°¨íì‹œì„¤ ì„¤ì¹˜</td>
          </tr>
          <tr data-step="ì‘ì—…ìë³´í˜¸" data-work="ê³µí†µ" data-type="ì†ŒìŒ">
            <td><span class="tag grn">ì†ŒìŒ</span></td>
            <td>ì‘ì—…ìë³´í˜¸</td><td>ê³µí†µ</td>
            <td>ìš©ì ‘Â·ìš©ë‹¨ ì†ŒìŒ(ë‚œì²­ ìœ„í—˜)</td>
            <td>ì†ŒìŒ 85 dB ì´ìƒì´ë©´ ê·€ë§ˆê°œ ë“± ì°¨ìŒë³´í˜¸êµ¬ ì°©ìš©</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="card" style="margin-top:14px;">
      <h3>í˜„ì¥ â€œìˆ«ì 3ê°œâ€ë§Œ ê¸°ì–µ</h3>
      <ul class="list">
        <li><b>11m</b>: ì¸í™”Â·ê°€ì—°ë¬¼ ìˆ˜í‰ ê²©ë¦¬(ë¶ˆí‹° ë¹„ì‚°) </li>
        <li><b>30V</b>: ì „ê¸°ìš©ì ‘ ë¬´ë¶€í•˜ ì „ì••(ìë™ì „ê²©ë°©ì§€ê¸°) </li>
        <li><b>ë°€íê³µê°„</b>: ì‚°ì†ŒÂ·ìœ í•´ê°€ìŠ¤ ì¸¡ì •/í™˜ê¸° ì—†ìœ¼ë©´ ì‘ì—… ê¸ˆì§€ </li>
      </ul>
    </div>
  </div>
</section>

<!-- SOP -->
<section id="sop">
  <div class="container">
    <div class="section-title">
      <h2>SOP</h2>
      <div class="hint">í™”ê¸°ì‘ì—… â€œí—ˆê°€â€“ë°©í˜¸â€“ê°ì‹œâ€“ë³µêµ¬â€</div>
    </div>

    <div class="callout">
      <div class="title">âœ… ìš´ì˜ ì›ì¹™</div>
      <div class="desc">
        ìš©ì ‘Â·ìš©ë‹¨ì€ â€œì‘ì—… ìì²´â€ë³´ë‹¤ <b>ì£¼ë³€ ì¡°ê±´(ì¸í™”ë¬¼/ê°œêµ¬ë¶€/ë°€í/ì „ê¸°/ê°€ìŠ¤)</b>ì´ ì‚¬ê³ ë¥¼ ë§Œë“­ë‹ˆë‹¤.
        ë”°ë¼ì„œ SOPëŠ” <b>í™”ì¬ì˜ˆë°© â†’ í­ë°œì˜ˆë°© â†’ ê°ì „ì˜ˆë°© â†’ ì‘ì—…ìë³´í˜¸</b> ìˆœìœ¼ë¡œ ëŠìŠµë‹ˆë‹¤. 
      </div>
    </div>

    <div style="margin-top:14px" class="steps">
      <div class="step">
        <div class="no">1</div>
        <h4>ì‘ì—… ì „(í—ˆê°€Â·ê²©ë¦¬Â·ë°©í˜¸)</h4>
        <ul>
          <li>ì‘ì—…ì¡°ê±´/ì£¼ë³€ ì¸í™”Â·ê°€ì—°ë¬¼ ì¡°ì‚¬ í›„ ìœ„í—˜ì„±í‰ê°€</li>
          <li>ì‘ì—…êµ¬ì—­ ì„¤ì •Â·ì¶œì…í†µì œÂ·ê²½ê³ í‘œì§€ ì„¤ì¹˜ </li>
          <li>11m ê²©ë¦¬(ë¶ˆí‹° ë¹„ì‚°), ê°œêµ¬ë¶€ ë°©ì—¼ì‹œíŠ¸ ë°©í˜¸</li>
        </ul>
      </div>

      <div class="step">
        <div class="no">2</div>
        <h4>ì‘ì—… ì¤€ë¹„(ê°€ìŠ¤/ì „ê¸° ì¥ë¹„ì ê²€)</h4>
        <ul>
          <li>ê°€ìŠ¤ìš©ê¸°Â·í˜¸ìŠ¤Â·ë°¸ë¸Œ ëˆ„ì¶œ ì ê²€(ê¸°ë°€) </li>
          <li>ì—­í™”ë°©ì§€ê¸° ì„¤ì¹˜ ë° ì‘ë™ í™•ì¸</li>
          <li>ì „ê¸°ìš©ì ‘ ì¼€ì´ë¸”/í™€ë” ì ˆì—° í™•ì¸, ìë™ì „ê²©ë°©ì§€ê¸° í™•ì¸</li>
        </ul>
      </div>

      <div class="step">
        <div class="no">3</div>
        <h4>ì‘ì—… ì¤‘(ê°ì‹œÂ·í†µì œÂ·ë¶ˆí‹°ê´€ë¦¬)</h4>
        <ul>
          <li>ê²©ë¦¬/ë°©í˜¸ ê³¤ë€ ì¡°ê±´ì´ë©´ <b>í™”ì¬ê°ì‹œì¸ ë°°ì¹˜</b> </li>
          <li>ë¶ˆí‹° ë¹„ì‚° ì°¨ë‹¨ë§‰/ë°©ì—¼ì‹œíŠ¸ ì„¤ì¹˜(ê°€ìŠ¤ìš©ë‹¨ì€ ë¹„ì‚° í™•ëŒ€) </li>
          <li>ì•„í¬ê´‘ ì°¨íì‹œì„¤ë¡œ ì¸ì ‘ ê·¼ë¡œì ë³´í˜¸ </li>
        </ul>
      </div>

      <div class="step">
        <div class="no">4</div>
        <h4>ë°€íê³µê°„(ê°€ìŠ¤ì¸¡ì •Â·í™˜ê¸°Â·ëŒ€ì‘)</h4>
        <ul>
          <li>ì‘ì—… ì „/ì¤‘ ì‚°ì†ŒÂ·ìœ í•´ê°€ìŠ¤ ë†ë„ ì¸¡ì • </li>
          <li>í™˜ê¸°/ë°°ê¸° ì¤‘ë‹¨ ê¸ˆì§€, ë¹„ìƒ ì—°ë½/ì‚¬ë‹¤ë¦¬/ë¡œí”„ ì¤€ë¹„ </li>
          <li>ë°©ë…/ì†¡ê¸°ë§ˆìŠ¤í¬ ë“± í˜¸í¡ë³´í˜¸êµ¬ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥ ìƒíƒœ ìœ ì§€ </li>
        </ul>
      </div>

      <div class="step">
        <div class="no">5</div>
        <h4>ì‘ì—… ì¢…ë£Œ(ì°¨ë‹¨Â·ì •ë¦¬Â·ì”ë¶ˆ í™•ì¸)</h4>
        <ul>
          <li>ê°€ìŠ¤ ì°¨ë‹¨ ë˜ëŠ” ì „ì› ì°¨ë‹¨ í›„ ì •ë¦¬, ì”ë¶ˆ/í›ˆì†Œ ì—¬ë¶€ í™•ì¸ </li>
          <li>ë¶ˆí‹° ìœ ì… ê°€ëŠ¥ ê°œêµ¬ë¶€/ë•íŠ¸ ì£¼ë³€ ì¬í™•ì¸(í™”ì¬ê°ì‹œ í¬í•¨)</li>
        </ul>
      </div>

      <div class="step">
        <div class="no">6</div>
        <h4>ë¹„ìƒëŒ€ì‘(ê³µí†µ)</h4>
        <ul>
          <li>ìœ„í—˜ ë†’ìœ¼ë©´ ì¦‰ì‹œ ì‘ì—…ì¤‘ë‹¨, ê°€ìŠ¤/ì „ì› ì°¨ë‹¨ í›„ ëŒ€í”¼ </li>
          <li>ê²½ë³´ ì„¤ë¹„/ë„êµ¬ ë¹„ì¹˜ë¡œ ì‹ ì† ì „íŒŒ </li>
        </ul>
      </div>
    </div>
  </div>
</section>

<!-- ì ê²€ -->
<section id="check">
  <div class="container">
    <div class="section-title">
      <h2>ì¼ì¼ ì ê²€(ì €ì¥í˜•)</h2>
      <div class="hint">ì§„í–‰ë¥  Â· ì €ì¥ Â· ë³µì‚¬</div>
    </div>

    <div class="checklist">
      <div class="toolbar">
        <div id="progressText">0 / 0</div>
        <div class="mini-actions">
          <button class="btn" id="clearChecklist">ì´ˆê¸°í™”</button>
          <button class="btn primary" id="copyChecklist">ë³µì‚¬</button>
        </div>
      </div>

      <div class="progress"><div class="bar" id="bar"></div></div>

      <div class="group-title">A. í™”ì¬ì˜ˆë°©(11mÂ·ë°©í˜¸Â·ê°ì‹œì¸)</div>
      <div class="cl-grid" id="clGridA"></div>

      <div class="group-title">B. í­ë°œì˜ˆë°©(ëˆ„ì¶œÂ·ì—­í™”Â·ìš©ê¸°ê´€ë¦¬)</div>
      <div class="cl-grid" id="clGridB"></div>

      <div class="group-title">C. ê°ì „ì˜ˆë°©(ì ˆì—°Â·ìë™ì „ê²©Â·ì ‘ì§€)</div>
      <div class="cl-grid" id="clGridC"></div>

      <div class="group-title">D. ì‘ì—…ìë³´í˜¸(ë°€íê³µê°„Â·í™˜ê¸°Â·ë³´í˜¸êµ¬)</div>
      <div class="cl-grid" id="clGridD"></div>

      <div class="hr"></div>

      <div class="callout danger">
        <div class="title">ğŸ§¨ ì¹˜ëª… í•­ëª© 1ê°œë¼ë„ ë¯¸ì¶©ì¡±ì´ë©´?</div>
        <div class="desc"><b>ì‘ì—…ì¤‘ì§€ â†’ ê°€ìŠ¤/ì „ì› ì°¨ë‹¨ â†’ í†µì œ/ë³´ê³  â†’ ì¡°ì¹˜ í›„ ì¬ê°œ</b>ê°€ ì›ì¹™ì…ë‹ˆë‹¤.</div>
      </div>
    </div>
  </div>
</section>

<!-- TBM -->
<section id="tbm">
  <div class="container">
    <div class="section-title">
      <h2>TBM (10ì´ˆ ìë™ ìƒì„±)</h2>
      <div class="hint">ì‘ì—…ìœ í˜• + ì¥ì†Œ + ì¡°ê±´ í˜¼í•© ë¶„ê¸°</div>
    </div>

    <div class="card">
      <div class="toolbar">
        <div class="inputs">
          <input class="input" id="tbmSite" placeholder="í˜„ì¥ëª… (ì˜ˆ: â—‹â—‹ í˜„ì¥)">
          <select id="tbmWork">
            <option value="ì „ê¸°ìš©ì ‘">ì „ê¸°ìš©ì ‘(ì•„í¬)</option>
            <option value="ê°€ìŠ¤ìš©ì ‘">ê°€ìŠ¤ìš©ì ‘</option>
            <option value="ê°€ìŠ¤ìš©ë‹¨">ê°€ìŠ¤ìš©ë‹¨(ì ˆë‹¨)</option>
          </select>
          <select id="tbmPlace">
            <option value="ì¼ë°˜">ì¼ë°˜ ì‘ì—…ì¥</option>
            <option value="ì¸í™”ë¬¼ì¸ì ‘">ì¸í™”Â·ê°€ì—°ë¬¼ ì¸ì ‘</option>
            <option value="ê°œêµ¬ë¶€/ë•íŠ¸">ê°œêµ¬ë¶€/ë•íŠ¸/í‹ˆìƒˆ ì¡´ì¬</option>
            <option value="ê³ ì†Œ">ê³ ì†Œ/ìƒë¶€ ì‘ì—…</option>
            <option value="ë°€íê³µê°„">ë°€íê³µê°„</option>
          </select>
          <select id="tbmCond">
            <option value="">íŠ¹ì´ì¡°ê±´ ì—†ìŒ</option>
            <option value="ì•¼ê°„">ì•¼ê°„</option>
            <option value="ë°”ëŒ">ë°”ëŒ(ë¶ˆí‹° ë¹„ì‚°)</option>
            <option value="ìŠµìœ¤">ìŠµìœ¤(ê°ì „ ìœ„í—˜)</option>
            <option value="ë™ì‹œì‘ì—…">ë™ì‹œì‘ì—…(ì¸ì ‘ê³µì •)</option>
          </select>
        </div>

        <div class="mini-actions">
          <button class="btn primary" id="genTBM">ìƒì„±</button>
          <button class="btn" id="copyTBM">ë³µì‚¬</button>
        </div>
      </div>

      <textarea id="tbmOut" rows="9" placeholder="TBM ìƒì„± ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤."></textarea>

      <div class="hr"></div>
      <div class="callout">
        <div class="title">ğŸ’¡ íŒ</div>
        <div class="desc">í™”ê¸°ì‘ì—…ì€ <b>11m ê²©ë¦¬</b> + <b>í™”ì¬ê°ì‹œì¸</b> + <b>ê°€ìŠ¤/ì „ì› ì°¨ë‹¨</b> 3ê°œë¥¼ TBMì— ë°˜ë“œì‹œ í¬í•¨í•˜ì„¸ìš”.</div>
      </div>
    </div>
  </div>
</section>
</main>

<script>
/* Theme */
const root=document.documentElement, THEME="hotwork_theme";
const themeBtn=document.getElementById("themeBtn");
if(localStorage.getItem(THEME)==="dark") root.setAttribute("data-theme","dark");
themeBtn.onclick=()=>{
  const dark = root.getAttribute("data-theme")==="dark";
  dark ? root.removeAttribute("data-theme") : root.setAttribute("data-theme","dark");
  localStorage.setItem(THEME, dark ? "light" : "dark");
};

/* Risk Filter */
const q=document.getElementById("q");
const fStep=document.getElementById("fStep");
const fWork=document.getElementById("fWork");
const fType=document.getElementById("fType");
const rows=[...document.querySelectorAll("#riskTable tbody tr")];

function applyRisk(){
  const kw=(q.value||"").trim();
  rows.forEach(tr=>{
    const okQ = !kw || tr.innerText.includes(kw);
    const okS = !fStep.value || tr.dataset.step===fStep.value;
    const okW = !fWork.value || tr.dataset.work===fWork.value;
    const okT = !fType.value || tr.dataset.type===fType.value;
    tr.style.display = (okQ && okS && okW && okT) ? "" : "none";
  });
}
[q,fStep,fWork,fType].forEach(el=>el.addEventListener("input", applyRisk));
document.getElementById("resetRisk").onclick=()=>{
  q.value=""; fStep.value=""; fWork.value=""; fType.value="";
  applyRisk();
};
document.getElementById("copyRiskTop").onclick = async ()=>{
  const visible = rows.filter(tr=>tr.style.display!=="none");
  const top = visible.slice(0,5).map(tr=>{
    const tds=[...tr.querySelectorAll("td")].map(td=>td.innerText.trim());
    return `- [${tds[1]}/${tds[2]}] ${tds[3]} â†’ ${tds[4]}`;
  }).join("\n") || "(í‘œì‹œëœ í•­ëª© ì—†ìŒ)";
  await navigator.clipboard.writeText(top);
  alert("í•µì‹¬ ìœ„í—˜ 5ì¤„ ë³µì‚¬ ì™„ë£Œ");
};

/* Checklist (Saved) */
const CL="hotwork_check_v1";
const groups = {
  A: [
    {t:"ì‘ì—… ì „ ìœ„í—˜ì„±í‰ê°€(ì¸í™”Â·ê°€ì—°ë¬¼/ê°œêµ¬ë¶€/ë™ì‹œì‘ì—…) ì™„ë£Œ", d:"ì¡°ê±´ ì¡°ì‚¬ í›„ ì‘ì—…"},
    {t:"ì‘ì—…êµ¬ì—­ ì„¤ì •Â·ì¶œì…í†µì œÂ·ê²½ê³ í‘œì§€ ì„¤ì¹˜", d:"ì¸ì ‘ ì‘ì—…ì ë³´í˜¸"},
    {t:"ì¸í™”Â·ê°€ì—°ë¬¼ 11m ì´ìƒ ê²©ë¦¬(ë˜ëŠ” ë°©ì—¼ì‹œíŠ¸ ë°©í˜¸)", d:"ë¶ˆí‹° ìˆ˜í‰ ë¹„ì‚°"},
    {t:"ê²©ë¦¬/ë°©í˜¸ ê³¤ë€ ì¡°ê±´ì´ë©´ í™”ì¬ê°ì‹œì¸ ë°°ì¹˜", d:"ë°˜ê²½/ê°œêµ¬ë¶€/ì—´ì „ë„ ì¡°ê±´ ë“±"},
    {t:"ë¶™í‹°ë°›ì´í¬/ì°¨ë‹¨ë§‰ ì„¤ì¹˜(íŠ¹íˆ ê³ ì†Œ/ìš©ë‹¨)", d:"ë¶ˆí‹° ë‚™í•˜Â·ë¹„ì‚° ì°¨ë‹¨"},
  ],
  B: [
    {t:"ê°€ìŠ¤ìš©ê¸°Â·ì••ë ¥ì¡°ì ˆê¸°Â·í˜¸ìŠ¤Â·ì·¨ê´€ ëˆ„ì¶œ ì ê²€(ê¸°ë°€)", d:"ì‘ì—… ì „ ì ê²€"},
    {t:"í˜¸ìŠ¤ ì—°ê²°ë¶€ ì¡°ì„ë¬¼ë¡œ ê²¬ê³ íˆ, ê· ì—´/ì—´í™” ì¦‰ì‹œ êµì²´", d:"ëˆ„ì¶œ ë°©ì§€"},
    {t:"ì—­í™”ë°©ì§€ê¸° ì„¤ì¹˜ ë° ì •ìƒ ì‘ë™ í™•ì¸", d:"ì—­í™” ì°¨ë‹¨"},
    {t:"ê°€ìŠ¤ìš©ê¸° ì„¸ì›Œ ë³´ê´€Â·ì „ë„ë°©ì§€Â·ì „ìš© ìš´ë°˜ì¥ë¹„ ì‚¬ìš©", d:"êµ´ë¦¼/ì–´ê¹¨ ìš´ë°˜ ê¸ˆì§€"},
  ],
  C: [
    {t:"ì¼€ì´ë¸”/í™€ë”/ìš©ì ‘ë´‰ ë“± ê±´ì¡° ìƒíƒœ ìœ ì§€", d:"ìŠµìœ¤ ê°ì „ ì˜ˆë°©"},
    {t:"ìë™ì „ê²©ë°©ì§€ê¸° ì„¤ì¹˜Â·ì‘ë™ í™•ì¸(ë¬´ë¶€í•˜ 30Vâ†“)", d:"ê°ì „ í•µì‹¬"},
    {t:"í”¼ë³µ ì†ìƒ ì¼€ì´ë¸” êµì²´/ì ˆì—° ë³´ìˆ˜", d:"ê³¼ì „ë¥˜ ì—´ì†ìƒ í¬í•¨"},
    {t:"ì ‘ì§€í´ë¨í”„ëŠ” ëª¨ì¬ì— ì ‘ì§€(ì£¼ë³€ êµ¬ì¡°ë¬¼ X)", d:"ëˆ„ì„¤ì „ë¥˜ ë°©ì§€"},
  ],
  D: [
    {t:"ë°€íê³µê°„ì€ ì‘ì—… ì „ ì‚°ì†ŒÂ·ìœ í•´ê°€ìŠ¤ ë†ë„ ì¸¡ì •", d:"ì•ˆì „ í™•ì¸ í›„ ì‘ì—…"},
    {t:"í™˜ê¸°/ë°°ê¸° ì§€ì† ìœ ì§€(ì „ì› ì¤‘ë‹¨ ë°©ì§€)", d:"ê· ì¼ í™˜ê¸°"},
    {t:"í˜¸í¡ë³´í˜¸êµ¬(ë°©ë…/ì†¡ê¸°) ë¹„ì¹˜Â·ì°©ìš© ê´€ë¦¬", d:"ìœ í•´ê°€ìŠ¤/í„ ëŒ€ì‘"},
    {t:"ë³´ì•ˆë©´/ë³´ì•ˆê²½/ë³´í˜¸ë³µ/ë‚´ì—´ì¥ê°‘ ì§€ê¸‰Â·ì°©ìš©", d:"í™”ìƒÂ·ì•„í¬ê´‘ ë°©í˜¸"},
    {t:"ì†ŒìŒ 85dBâ†‘ ì‹œ ê·€ë§ˆê°œ ì°©ìš©", d:"ë‚œì²­ ì˜ˆë°©"},
  ]
};

function loadChecklist(){ return JSON.parse(localStorage.getItem(CL) || "[]"); }
function saveChecklist(arr){ localStorage.setItem(CL, JSON.stringify(arr)); }

const groupIndex = { A:0, B:100, C:200, D:300 };

function allKeys(){
  return [
    ...groups.A.map((_,i)=>groupIndex.A+i),
    ...groups.B.map((_,i)=>groupIndex.B+i),
    ...groups.C.map((_,i)=>groupIndex.C+i),
    ...groups.D.map((_,i)=>groupIndex.D+i),
  ];
}

function renderGroup(gridId, baseIndex, items){
  const grid=document.getElementById(gridId);
  grid.innerHTML="";
  const saved=loadChecklist();
  items.forEach((it,idx)=>{
    const key=baseIndex+idx;
    const checked=saved.includes(key);
    const el=document.createElement("label");
    el.className="cl-item";
    el.innerHTML = `
      <input type="checkbox" data-k="${key}" ${checked?"checked":""}/>
      <div>
        <b>${it.t}</b>
        <span>${it.d||""}</span>
      </div>`;
    grid.appendChild(el);
  });

  grid.querySelectorAll("input").forEach(inp=>{
    inp.onchange=()=>{
      let saved=loadChecklist();
      const k=+inp.dataset.k;
      if(inp.checked){ if(!saved.includes(k)) saved.push(k); }
      else saved=saved.filter(x=>x!==k);
      saveChecklist(saved);
      updateProgress();
    };
  });
}

function updateProgress(){
  const saved=loadChecklist();
  const keys=allKeys();
  const done=keys.filter(k=>saved.includes(k)).length;
  const total=keys.length;
  const pct=Math.round(done/total*100);
  document.getElementById("bar").style.width = pct+"%";
  document.getElementById("progressText").textContent = `${done} / ${total} (${pct}%)`;
}

function initChecklist(){
  renderGroup("clGridA", groupIndex.A, groups.A);
  renderGroup("clGridB", groupIndex.B, groups.B);
  renderGroup("clGridC", groupIndex.C, groups.C);
  renderGroup("clGridD", groupIndex.D, groups.D);
  updateProgress();
}

document.getElementById("clearChecklist").onclick=()=>{
  localStorage.removeItem(CL);
  initChecklist();
};

document.getElementById("copyChecklist").onclick=async()=>{
  const saved=loadChecklist();
  const lines=[];
  const push=(title, base, arr)=>{
    const checked = arr
      .map((it,i)=>({it, key:base+i}))
      .filter(x=>saved.includes(x.key))
      .map(x=>`[âœ“] ${x.it.t}`);
    lines.push(`â–  ${title}`);
    lines.push(checked.length?checked.join("\n"):"(ì²´í¬ ì—†ìŒ)");
    lines.push("");
  };
  push("A. í™”ì¬ì˜ˆë°©", groupIndex.A, groups.A);
  push("B. í­ë°œì˜ˆë°©", groupIndex.B, groups.B);
  push("C. ê°ì „ì˜ˆë°©", groupIndex.C, groups.C);
  push("D. ì‘ì—…ìë³´í˜¸", groupIndex.D, groups.D);

  await navigator.clipboard.writeText(lines.join("\n").trim());
  alert("ì ê²€ ê²°ê³¼ ë³µì‚¬ ì™„ë£Œ");
};
initChecklist();

/* TBM Generator (Branching) */
const tbmSite=document.getElementById("tbmSite");
const tbmWork=document.getElementById("tbmWork");
const tbmPlace=document.getElementById("tbmPlace");
const tbmCond=document.getElementById("tbmCond");
const tbmOut=document.getElementById("tbmOut");

function controlsByWork(work){
  const map = {
    "ì „ê¸°ìš©ì ‘": [
      "ì¼€ì´ë¸”/í™€ë” ì ˆì—° ìƒíƒœ í™•ì¸, ìë™ì „ê²©ë°©ì§€ê¸° ì‘ë™ í™•ì¸(30Vâ†“)",
      "ì ‘ì§€í´ë¨í”„ëŠ” ëª¨ì¬ì— ì ‘ì§€(êµ¬ì¡°ë¬¼ ì ‘ì§€ ê¸ˆì§€)",
      "ë³´ì•ˆë©´/ì°¨ê´‘ë³´ì•ˆê²½ ì°©ìš© ë° ì•„í¬ê´‘ ì°¨í"
    ],
    "ê°€ìŠ¤ìš©ì ‘": [
      "ìš©ê¸°Â·ì••ë ¥ì¡°ì ˆê¸°Â·í˜¸ìŠ¤Â·ì·¨ê´€ ëˆ„ì¶œ ì ê²€(ê¸°ë°€)",
      "ì—­í™”ë°©ì§€ê¸° ì„¤ì¹˜ ë° ì •ìƒ ì‘ë™ í™•ì¸",
      "ìš©ê¸° ì „ë„ë°©ì§€, ê¸°ë¦„ ë¬»ì€ ì†/ì¥ê°‘ìœ¼ë¡œ ì‚°ì†Œê³„í†µ ì·¨ê¸‰ ê¸ˆì§€"
    ],
    "ê°€ìŠ¤ìš©ë‹¨": [
      "ë¶ˆí‹° ë¹„ì‚° ì°¨ë‹¨ë§‰/ë°©ì—¼ì‹œíŠ¸ ì„¤ì¹˜(ë¹„ì‚° í™•ëŒ€)",
      "ìš©ê¸°Â·í˜¸ìŠ¤Â·ë°¸ë¸Œ ëˆ„ì¶œ ì ê²€ + ì—­í™”ë°©ì§€ê¸° í™•ì¸",
      "ì‘ì—…ë°˜ê²½ í†µì œ ë° ë¶™í‹°ë°›ì´í¬ ì„¤ì¹˜"
    ]
  };
  return map[work] || ["ì‘ì—…ì¡°ê±´ í™•ì¸", "ê²©ë¦¬/í†µì œ", "ì´ìƒ ì‹œ ì¤‘ì§€"];
}

function controlsByPlace(place){
  const map = {
    "ì¸í™”ë¬¼ì¸ì ‘": [
      "ì¸í™”Â·ê°€ì—°ë¬¼ 11m ê²©ë¦¬ ë˜ëŠ” ë°©ì—¼ì‹œíŠ¸ ë°©í˜¸",
      "ê²©ë¦¬/ë°©í˜¸ ê³¤ë€ ì‹œ í™”ì¬ê°ì‹œì¸ ë°°ì¹˜",
      "ìœ¤í™œìœ /ìœ ë¥˜ ì˜¤ì—¼ í‘œë©´ì—ì„œëŠ” ì‘ì—… ê¸ˆì§€"
    ],
    "ê°œêµ¬ë¶€/ë•íŠ¸": [
      "ê°œêµ¬ë¶€/í‹ˆìƒˆë¥¼ ë°©ì—¼ì‹œíŠ¸ë¡œ ë¹ˆí‹ˆì—†ì´ ë°©í˜¸",
      "ë¶ˆí‹° ìœ ì… ê°€ëŠ¥ë¶€ ì£¼ë³€ ì”ë¶ˆ í™•ì¸",
      "í†µí–‰ì ë³´í˜¸ë¥¼ ìœ„í•´ êµ¬ì—­ ì„¤ì •Â·í‘œì§€"
    ],
    "ê³ ì†Œ": [
      "ë¶™í‹°ë°›ì´í¬ ì„¤ì¹˜ë¡œ ë¶ˆí‹° ë‚™í•˜ ë°©ì§€",
      "ì¶”ë½ë°©ì§€(ë‚œê°„/ì•ˆì „ëŒ€) í™•ë³´",
      "í•˜ë¶€ ì¶œì…í†µì œ ë° ì‹ í˜¸ìˆ˜"
    ],
    "ë°€íê³µê°„": [
      "ì‘ì—… ì „/ì¤‘ ì‚°ì†ŒÂ·ìœ í•´ê°€ìŠ¤ ë†ë„ ì¸¡ì •",
      "í™˜ê¸°/ë°°ê¸° ì§€ì† ìœ ì§€(ì „ì› ì¤‘ë‹¨ ë°©ì§€)",
      "í˜¸í¡ìš© ë³´í˜¸êµ¬(ë°©ë…/ì†¡ê¸°) ì¤€ë¹„ ë° ë¹„ìƒì—°ë½/ì‚¬ë‹¤ë¦¬/ë¡œí”„"
    ],
    "ì¼ë°˜": [
      "ì‘ì—…êµ¬ì—­ ì„¤ì •Â·ì¶œì…í†µì œÂ·ê²½ê³ í‘œì§€",
      "ë³´í˜¸êµ¬ ì°©ìš©(ë‚´ì—´ì¥ê°‘Â·ë³´í˜¸ë³µÂ·ë³´ì•ˆë©´)",
      "ì´ìƒ ì§•í›„ ì‹œ ì¦‰ì‹œ ì¤‘ì§€"
    ]
  };
  return map[place] || ["êµ¬ì—­ ì„¤ì •", "ë³´í˜¸êµ¬", "ì¤‘ì§€ ê¸°ì¤€ ê³µìœ "];
}

function addByCond(cond){
  if(cond==="ì•¼ê°„") return "ì•¼ê°„ì´ë¯€ë¡œ ì¡°ëª…/ê²½ê´‘ë“± í™•ë³´, ì‹œì•¼ë¶ˆëŸ‰ êµ¬ê°„ í†µì œ.";
  if(cond==="ë°”ëŒ") return "ë°”ëŒìœ¼ë¡œ ë¶ˆí‹° ë¹„ì‚° ê°€ëŠ¥ â†’ ë¹„ì‚° ì°¨ë‹¨ë§‰ ê°•í™”, ì œì–´ ë¶ˆê°€ ì‹œ ì‘ì—… ì¤‘ì§€.";
  if(cond==="ìŠµìœ¤") return "ìŠµìœ¤ ìƒíƒœëŠ” ê°ì „ ìœ„í—˜ ì¦ê°€ â†’ ê±´ì¡° ì¡°ì¹˜, ì ˆì—°/ì „ê²©ë°©ì§€ ì¬í™•ì¸.";
  if(cond==="ë™ì‹œì‘ì—…") return "ì¸ì ‘ ë™ì‹œì‘ì—… â†’ êµ¬ì—­ ë¶„ë¦¬, í†µí–‰ì ì°¨ë‹¨, í™”ì¬ê°ì‹œì¸ ìš´ì˜.";
  return "";
}

document.getElementById("genTBM").onclick=()=>{
  const site=(tbmSite.value||"ë³¸ í˜„ì¥").trim();
  const work=tbmWork.value;
  const place=tbmPlace.value;
  const cond=tbmCond.value;

  const w = controlsByWork(work);
  const p = controlsByPlace(place);
  const extra = addByCond(cond);

  const toLine = (arr)=>arr.map((v,i)=>`${i+1}) ${v}`).join(" ");

  tbmOut.value =
`ì§€ê¸ˆë¶€í„° ì‘ì—… ì „ TBM ì‹¤ì‹œí•©ë‹ˆë‹¤.
í˜„ì¥: ${site} / ì‘ì—…: ${work} / ì¥ì†Œ: ${place}${cond?` / ì¡°ê±´: ${cond}`:""}
ì˜¤ëŠ˜ í•µì‹¬ ìœ„í—˜ì€ í™”ì¬Â·í­ë°œÂ·ê°ì „Â·ì§ˆì‹(ë°€íê³µê°„)ì…ë‹ˆë‹¤.
[ì‘ì—…ìœ í˜• í†µì œ] ${toLine(w)}
[ì¥ì†Œ í†µì œ] ${toLine(p)}
${extra?`[ì¶”ê°€ì£¼ì˜] ${extra}`:""}
ê°€ìŠ¤ ëˆ„ì¶œÂ·ì—­í™”Â·ë¶ˆí‹° ì œì–´ ë¶ˆê°€Â·ê°€ìŠ¤ë†ë„ ë¶€ì í•©Â·ì ˆì—° ì†ìƒ ë“± ì´ìƒ ì‹œ ì¦‰ì‹œ ì‘ì—…ì¤‘ì§€í•˜ê³  ê°€ìŠ¤/ì „ì›ì„ ì°¨ë‹¨í•œ ë’¤ ë³´ê³ í•˜ê² ìŠµë‹ˆë‹¤.`;
};

document.getElementById("copyTBM").onclick=async()=>{
  await navigator.clipboard.writeText(tbmOut.value || "");
  alert("TBM ë³µì‚¬ ì™„ë£Œ");
};

applyRisk();
</script>
</body>
</html>
