<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë™ì§„ì•ˆì „ í†µí•© í¬í„¸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">

  <!-- í°íŠ¸ -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    /* ===== ê¸°ë³¸ ì´ˆê¸°í™” ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
    }

    body {
      font-family: "Noto Sans KR", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f7ff;
      color: #0b1b3b;
      text-align: center;
    }

    /* ===== ì¢Œì¸¡ ìƒë‹¨ ë¡œê³  ===== */
    .top-logo {
      position: fixed;
      top: 12px;
      left: 12px;
      z-index: 1000;
    }

    .top-logo img {
      height: 42px;
      opacity: 0.95;
      filter: brightness(1.2);
    }

    /* ===== í™ˆ ë²„íŠ¼ (ìš°ì¸¡ ìƒë‹¨) ===== */
    .home-btn {
      position: fixed;
      top: 12px;
      right: 12px;
      z-index: 1000;
      padding: 8px 14px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.96);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
      font-size: 14px;
      text-decoration: none;
      color: #0b1b3b;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      backdrop-filter: blur(8px);
    }

    .home-btn:hover {
      background: #0b4ea2;
      color: #ffffff;
    }

    /* ===== ë©”ì¸ ë¹„ì£¼ì–¼ ===== */
    .main-visual {
      width: 100%;
      margin-top: 70px;
      padding: 0 16px;
      display: flex;
      justify-content: center;
    }

    .main-visual img {
      width: 100%;
      max-width: 520px;
      border-radius: 20px;
      box-shadow: 0 12px 28px rgba(15, 23, 42, 0.22);
    }

    /* ===== ì»¨í…Œì´ë„ˆ ===== */
    .container {
      width: 100%;
      max-width: 520px;
      margin: 22px auto 24px;
      padding: 26px 20px 30px;
      background: #ffffff;
      border-radius: 24px;
      box-shadow: 0 16px 40px rgba(15, 23, 42, 0.18);
      text-align: center;
      position: relative;
    }

    .container h2 {
      font-size: 24px;
      margin-bottom: 6px;
      letter-spacing: 1px;
    }

    .container > p {
      font-size: 14px;
      color: #64748b;
      margin-bottom: 16px;
    }

    /* ===== ë©”ë‰´ ===== */
    .menu {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 14px;
      margin: 10px 0 18px;
    }

    .item {
      position: relative;
      background: linear-gradient(135deg, #0f5dd9 0%, #1e88e5 45%, #00c6ff 100%);
      color: #ffffff;
      padding: 16px 10px 14px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 10px 24px rgba(15, 76, 129, 0.45);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      transition: transform 0.16s ease, box-shadow 0.16s ease, opacity 0.16s ease;
    }

    .item:hover {
      transform: translateY(-3px);
      box-shadow: 0 14px 30px rgba(15, 76, 129, 0.6);
    }

    /* ===== ì†Œê°œ ===== */
    .intro {
      margin-top: 10px;
      padding-top: 12px;
      border-top: 1px solid rgba(148, 163, 184, 0.35);
      text-align: left;
    }

    /* ===== ë™ì˜ìƒ ===== */
    .video-container {
      width: 100%;
      max-width: 520px;
      margin: 24px auto;
      padding: 0 16px;
      position: relative;
    }

    .video-container video {
      width: 100%;
      height: auto;
      border-radius: 20px;
      box-shadow: 0 12px 28px rgba(15, 23, 42, 0.22);
    }

    /* ===== í‘¸í„° ===== */
    footer {
      width: 100%;
      text-align: center;
      font-size: 12px;
      color: #64748b;
      padding: 10px 0 22px;
      line-height: 1.5;
    }

    /* ===== AIë´‡ í´ë¦­ ë ˆì´ë¸” ===== */
    #bot-label {
      position: fixed;
      z-index: 1000;
      color: #ffffff;
      font-size: 12px;
      font-weight: 700;
      text-shadow: 0 1px 6px rgba(0,0,0,0.7), 0 0 12px rgba(0,0,0,0.5);
      pointer-events: none;
      text-align: center;
      white-space: nowrap;
      letter-spacing: 0.5px;
      background: rgba(0,0,0,0.28);
      border-radius: 20px;
      padding: 3px 10px;
    }

    /* ===== AI ì±—ë´‡ íŒì—… (ì¹´ì¹´ì˜¤í†¡ ìŠ¤íƒ€ì¼) ===== */
    #bot-popup {
      display: none;
      position: fixed;
      z-index: 2000;
      background: #b2c7d9;   /* ì¹´ì¹´ì˜¤í†¡ ë°°ê²½ */
      border-radius: 16px;
      box-shadow: 0 16px 48px rgba(0,0,0,0.32);
      overflow: hidden;
      flex-direction: column;
      resize: both;
      min-width: 300px;
      min-height: 400px;
      width: 700px;
      height: 650px;
      top: 120px;
      right: 210px;
    }

    #bot-popup.open {
      display: flex;
    }

    /* íŒì—… í—¤ë” */
    #bot-popup-header {
      background: #fee500;
      color: #3c1e1e;
      font-weight: 700;
      font-size: 15px;
      padding: 12px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: move;
      user-select: none;
      flex-shrink: 0;
    }

    #bot-popup-header .header-left {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    #bot-popup-header .header-avatar {
      width: 28px;
      height: 28px;
      border-radius: 8px;
      background: #f0a500;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
    }

    #bot-popup-close {
      background: none;
      border: none;
      font-size: 20px;
      cursor: pointer;
      color: #3c1e1e;
      line-height: 1;
      padding: 0 4px;
      font-weight: 700;
    }

    #bot-popup-close:hover {
      opacity: 0.6;
    }

    /* iframe ì˜ì—­ */
    #bot-popup iframe {
      flex: 1;
      width: 100%;
      border: none;
      background: #b2c7d9;
    }

    /* í¬ê¸° ì¡°ì ˆ íŒíŠ¸ */
    #bot-popup::after {
      content: '';
      position: absolute;
      bottom: 4px;
      right: 4px;
      width: 12px;
      height: 12px;
      border-right: 2px solid rgba(0,0,0,0.25);
      border-bottom: 2px solid rgba(0,0,0,0.25);
      pointer-events: none;
    }
  </style>
</head>

<body>

  <!-- ì¢Œì¸¡ ìƒë‹¨ ë¡œê³  -->
  <div class="top-logo">
    <img src="https://raw.githubusercontent.com/es1063122-creator/ani/main/djlogo.png" alt="ë™ì§„ì•ˆì „ ë¡œê³ ">
  </div>

  <!-- í™ˆ ë²„íŠ¼ -->
  <a href="https://es1063122-creator.github.io/djweb2/" class="home-btn" target="_blank">ğŸ  í™ˆìœ¼ë¡œ ê°€ê¸°</a>

  <!-- ë©”ì¸ ì´ë¯¸ì§€ -->
  <div class="main-visual">
    <img src="https://raw.githubusercontent.com/es1063122-creator/dj-safty-portal/main/safe-main.png" alt="ë™ì§„ ìŠ¤ë§ˆíŠ¸ ì•ˆì „ ë©”ì¸">
  </div>

  <div class="container">

    <h2>ë™ì§„ì•ˆì „ í†µí•© í¬í„¸</h2>
    <p>í˜„ì¥ì˜ ëª¨ë“  ì•ˆì „ ê¸°ëŠ¥ì„ í•œ ê³³ì—</p>

    <div class="menu">

      <div class="item" onclick="openApp('https://es1063122-creator.github.io/dj-Supervisor-Check/')">
        <div class="icon">ğŸ“‹</div>
        ê´€ë¦¬ê°ë…ì ì ê²€
      </div>

      <div class="item" onclick="openApp('https://script.google.com/macros/s/AKfycbwgQ__21svWi9J1NvtDODXlRj-HpIJ4kW40eZe1LWbq_vwP3CqjrmU4pVVk3DqjV_PAkA/exec')">
        <div class="icon">ğŸ› </div>
        ìŠ¤ë§ˆíŠ¸ ì•ˆì „ì ê²€
      </div>

      <div class="item" onclick="openApp('https://script.google.com/macros/s/AKfycbwZSI4Y2MbPQq14IPpDTAINoSyE4ifCPzbfhwnXEU-wNnUrsmj-G-bN4_GVXlRLdD7P1g/exec')">
        <div class="icon">â“</div>
        ê´€ë¦¬ê°ë…ì í€´ì¦ˆ
      </div>

      <div class="item" onclick="openApp('https://es1063122-creator.github.io/dj-machine-safety/')">
        <div class="icon">ğŸšœ</div>
        ê±´ì„¤ê¸°ê³„ ì¼ì¼ì ê²€
      </div>

      <div class="item" onclick="openApp('https://es1063122-creator.github.io/dongjin-safety-check/')">
        <div class="icon">ğŸ”</div>
        í˜„ì¥ ì•ˆì „ì ê²€
      </div>

      <div class="item" onclick="openApp('https://es1063122-creator.github.io/dj-kohsa-guide/')">
        <div class="icon">ğŸ“˜</div>
        ì•ˆì „ë³´ê±´ì‘ì—…ì§€ì¹¨
      </div>

      <div class="item" onclick="openApp('https://es1063122-creator.github.io/kdh-safety/')">
        <div class="icon">ğŸ¤–</div>
        AI ìœ„í—˜ì„±í‰ê°€
      </div>

      <div class="item" onclick="openApp('https://es1063122-creator.github.io/dj-risk-Sharing/')">
        <div class="icon">ğŸ“¤</div>
        ìœ„í—˜ì„±í‰ê°€ ê³µìœ 
      </div>

      <div class="item" onclick="openApp('https://es1063122-creator.github.io/dj-risk-system/')">
        <div class="icon">âš ï¸</div>
        ìœ„í—˜ì„±í‰ê°€ ì‹œìŠ¤í…œ
      </div>

      <div class="item" onclick="openApp('https://script.google.com/macros/s/AKfycbwLxyQuuAro7xHe2Jfm7wlf1FLDyS3XNhw_yFfjhE_86AXcERMP8_si_-AXlDg_WjxwvA/exec')">
        ğŸ“ ì§ë¬´êµìœ¡ ê´€ë¦¬
      </div>

<div class="item" onclick="openApp('https://es1063122-creator.github.io/safety-education/')">
  <div class="icon">ğŸš§</div>
  íŠ¹ë³„ì•ˆì „êµìœ¡ ì‹œìŠ¤í…œ
</div>

      <div class="item" onclick="openBotPopup()">
        <div class="icon">ğŸ¤–</div>
        ë™ì§„ AI ì±—ë´‡
      </div>

    </div>

    <div class="intro">
      <h2>ë™ì§„ì•ˆì „ ì†Œê°œ</h2>
      <p>
        ë™ì§„ì•ˆì „ì€ ìŠ¤ë§ˆíŠ¸ ì•ˆì „ê¸°ìˆ ì„ í†µí•´ í˜„ì¥ ìœ„í—˜ìš”ì¸ì„ ì‹ ì†í•˜ê³  ì •í™•í•˜ê²Œ íŒŒì•…í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.<br>
        ë³¸ í¬í„¸ì€ ë‹¤ì–‘í•œ ì•ˆì „ ì‹œìŠ¤í…œì„ í•œ ê³³ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ëœ í†µí•© í”Œë«í¼ì…ë‹ˆë‹¤.
      </p>
    </div>

  </div>

  <div class="video-container">
    <video autoplay muted loop playsinline>
      <source src="https://raw.githubusercontent.com/es1063122-creator/dj-safty-portal/main/dj-aibot.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>

  <!-- AI ë´‡ í´ë¦­ ë ˆì´ë¸” -->
  <div id="bot-label">ğŸ¤– AI ë´‡ í´ë¦­</div>

  <!-- ì¹´ì¹´ì˜¤í†¡ ìŠ¤íƒ€ì¼ AI ì±—ë´‡ íŒì—… -->
  <div id="bot-popup">
    <div id="bot-popup-header">
      <div class="header-left">
        <div class="header-avatar">ğŸ¤–</div>
        <span>ë™ì§„ AI ì±—ë´‡</span>
      </div>
      <button id="bot-popup-close" onclick="closeBotPopup()">âœ•</button>
    </div>
    <iframe
      src="https://es1063122-creator.github.io/ai-bot/"
      allow="microphone"
      title="ë™ì§„ AI ì±—ë´‡"
    ></iframe>
  </div>

  <footer>
    â“’ 2025 Dongjin Safety(KDH). All Rights Reserved.<br>
    ë¬¸ì˜: es5183@djenc.co.kr / 031-792-8361
  </footer>

  <script>
    function openApp(url) {
      window.open(url, "_blank");
    }

    /* ===== íŒì—… ì—´ê¸° (ë©”ë‰´ ë²„íŠ¼ì—ì„œë„ í˜¸ì¶œ ê°€ëŠ¥) ===== */
    function openBotPopup() {
      const popup = document.getElementById("bot-popup");
      popup.classList.add("open");
    }

    /* ===== íŒì—… ë‹«ê¸° ===== */
    function closeBotPopup() {
      document.getElementById("bot-popup").classList.remove("open");
    }

    /* ===== íŒì—… ë“œë˜ê·¸ ì´ë™ ===== */
    (function () {
      const popup  = document.getElementById("bot-popup");
      const header = document.getElementById("bot-popup-header");
      let isDragging = false, startX, startY, origLeft, origTop;

      header.addEventListener("mousedown", e => {
        if (e.target.id === "bot-popup-close") return;
        isDragging = true;
        const rect = popup.getBoundingClientRect();
        startX   = e.clientX;
        startY   = e.clientY;
        origLeft = rect.left;
        origTop  = rect.top;
        popup.style.left  = origLeft + "px";
        popup.style.right = "";
        e.preventDefault();
      });

      document.addEventListener("mousemove", e => {
        if (!isDragging) return;
        popup.style.left = (origLeft + e.clientX - startX) + "px";
        popup.style.top  = (origTop  + e.clientY - startY) + "px";
      });

      document.addEventListener("mouseup", () => { isDragging = false; });

      /* í„°ì¹˜ ë“œë˜ê·¸ (ëª¨ë°”ì¼) */
      header.addEventListener("touchstart", e => {
        if (e.target.id === "bot-popup-close") return;
        isDragging = true;
        const touch = e.touches[0];
        const rect  = popup.getBoundingClientRect();
        startX   = touch.clientX;
        startY   = touch.clientY;
        origLeft = rect.left;
        origTop  = rect.top;
        popup.style.left  = origLeft + "px";
        popup.style.right = "";
      }, { passive: true });

      document.addEventListener("touchmove", e => {
        if (!isDragging) return;
        const touch = e.touches[0];
        popup.style.left = (origLeft + touch.clientX - startX) + "px";
        popup.style.top  = (origTop  + touch.clientY - startY) + "px";
      }, { passive: true });

      document.addEventListener("touchend", () => { isDragging = false; });
    })();
  </script>

  <!-- Three.js 3D ìºë¦­í„° -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>

  <script>
  window.addEventListener("load", () => {
    if (!window.THREE) return;

    const scene  = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(60, 1, 0.1, 1000);
    camera.position.set(0, 0, 8);

    const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
    const BOT_SIZE = 170;
    renderer.setSize(BOT_SIZE, BOT_SIZE);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

    Object.assign(renderer.domElement.style, {
      position    : "fixed",
      top         : "100px",
      left        : "0px",   /* positionBot()ì—ì„œ ê³„ì‚° í›„ ë®ì–´ì”€ */
      zIndex      : "999",
      cursor      : "pointer",
      pointerEvents: "auto"
    });

    document.body.appendChild(renderer.domElement);

    /* ìºë¦­í„° í´ë¦­ â†’ íŒì—… ì—´ê¸° */
    renderer.domElement.addEventListener("click", () => {
      openBotPopup();
      /* íŒì—… ìœ„ì¹˜: ìºë¦­í„° ì™¼ìª½ */
      const popup = document.getElementById("bot-popup");
      const rect  = renderer.domElement.getBoundingClientRect();
      popup.style.width  = "700px";
      popup.style.height = "650px";
      popup.style.top    = rect.top + "px";
      popup.style.right  = "";
      popup.style.left   = Math.max(8, rect.left - 355) + "px";
    });

    /* ì¡°ëª… */
    scene.add(new THREE.AmbientLight(0xffffff, 1.4));

    /* ìºë¦­í„° í…ìŠ¤ì²˜ */
    const loader  = new THREE.TextureLoader();
    const texture = loader.load(
      "https://raw.githubusercontent.com/es1063122-creator/ai-bot/main/dj-ai-default.png"
    );
    const material = new THREE.MeshBasicMaterial({ map: texture, transparent: true });
    const geometry = new THREE.PlaneGeometry(8, 8);
    const bot      = new THREE.Mesh(geometry, material);
    scene.add(bot);

    /* ë§ˆìš°ìŠ¤ ì¶”ì  */
    const mouse = { x: 0, y: 0 };
    window.addEventListener("mousemove", e => {
      mouse.x =  (e.clientX / window.innerWidth)  * 2 - 1;
      mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
    });

    /* ì• ë‹ˆë©”ì´ì…˜ */
    let t = 0;
    function animate() {
      requestAnimationFrame(animate);
      t += 0.02;
      bot.position.y = Math.sin(t * 2) * 0.4;
      bot.position.x += (mouse.x * 0.8 - bot.position.x) * 0.05;
      bot.position.z += (mouse.y * 0.4 - bot.position.z) * 0.05;
      bot.lookAt(camera.position);
      renderer.render(scene, camera);
    }
    animate();

    /* ===== ë ˆì´ë¸” + ìºë¦­í„° ìœ„ì¹˜ ë™ê¸°í™” ===== */
    const label = document.getElementById("bot-label");

    function positionBot() {
      /* ì»¨í…Œì´ë„ˆ(.container)ì˜ ìš°ì¸¡ ë ê¸°ì¤€ìœ¼ë¡œ ìºë¦­í„° ìœ„ì¹˜ ê³„ì‚° */
      const container = document.querySelector(".container");
      const cRect = container ? container.getBoundingClientRect() : null;

      /* ì»¨í…Œì´ë„ˆ ìš°ì¸¡ + 10px ê°„ê²©ì— ìºë¦­í„° ë°°ì¹˜, ì—†ìœ¼ë©´ ìš°ì¸¡ 16px */
      const leftPos = cRect
        ? Math.min(cRect.right + 10, window.innerWidth - BOT_SIZE - 8)
        : window.innerWidth - BOT_SIZE - 16;

      renderer.domElement.style.left  = leftPos + "px";
      renderer.domElement.style.right = "auto";

      /* ë ˆì´ë¸”: ìºë¦­í„° ìœ„ 3.4px ê°„ê²© */
      const bRect = renderer.domElement.getBoundingClientRect();
      label.style.top   = (bRect.top - label.offsetHeight - 3.4) + "px";
      label.style.left  = leftPos + "px";
      label.style.right = "auto";
      label.style.width = BOT_SIZE + "px";
    }

    positionBot();
    window.addEventListener("resize", positionBot);
    window.addEventListener("scroll", positionBot);
    /* ì²« í”„ë ˆì„ í›„ ì¬ê³„ì‚° (ë ˆì´ë¸” offsetHeight í™•ë³´) */
    requestAnimationFrame(positionBot);
  });
  </script>

</body>
</html>