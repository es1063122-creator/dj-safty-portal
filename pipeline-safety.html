<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ê´€ë¡œê³µì‚¬ ì•ˆì „ë³´ê±´ ì‘ì—…ì§€ì¹¨ | SOP Â· ìœ„í—˜ìš”ì¸ Â· ì²´í¬ë¦¬ìŠ¤íŠ¸ Â· TBM</title>
  <meta name="description" content="ì¤‘ì†Œê·œëª¨ ê´€ë¡œê³µì‚¬(êµ´ì°©Â·í™ë§‰ì´Â·ê´€ë¡œë¶€ì„¤Â·ë˜ë©”ìš°ê¸°Â·ë§¨í™€) ì•ˆì „ë³´ê±´ ì‘ì—…ì§€ì¹¨. ìœ„í—˜ìš”ì¸ ê²€ìƒ‰, SOP, ì¼ì¼ì ê²€ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì €ì¥, 10ì´ˆ TBM ìë™ìƒì„±." />
  <meta name="theme-color" content="#004080" />

  <!-- Pretendard -->
  <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css" />

  <style>
    :root{
      --blue:#004080;
      --blue2:#007bff;
      --ink:#0b1220;
      --muted:#5a6477;
      --bg:#f5f8ff;
      --card:#ffffff;
      --line:rgba(0,64,128,.14);
      --shadow:0 18px 60px rgba(0,64,128,.10);
      --radius:18px;
      --radius2:26px;
    }
    [data-theme="dark"]{
      --ink:#eaf1ff;
      --muted:#b8c4da;
      --bg:#071225;
      --card:#0b1b33;
      --line:rgba(127,170,255,.18);
      --shadow:0 18px 60px rgba(0,0,0,.35);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Pretendard, -apple-system, BlinkMacSystemFont, system-ui, "Segoe UI", Roboto, "Noto Sans KR", Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 600px at 18% 10%, rgba(0,123,255,.18), transparent 55%),
        radial-gradient(900px 520px at 80% 0%, rgba(0,64,128,.22), transparent 50%),
        var(--bg);
      line-height:1.7;
      overflow-x:hidden;
    }
    a{color:inherit; text-decoration:none}
    .container{width:min(1200px, calc(100% - 40px)); margin:0 auto}

    /* Topbar */
    .topbar{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(14px);
      background:linear-gradient(180deg, rgba(255,255,255,.72), rgba(255,255,255,.52));
      border-bottom:1px solid rgba(0,64,128,.10);
    }
    [data-theme="dark"] .topbar{
      background:linear-gradient(180deg, rgba(11,27,51,.78), rgba(11,27,51,.55));
      border-bottom:1px solid rgba(127,170,255,.14);
    }
    .topbar-inner{
      display:flex; align-items:center; justify-content:space-between;
      padding:12px 0;
      gap:16px;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
      font-weight:900;
      letter-spacing:-.02em;
    }
    .logo{
      width:38px; height:38px; border-radius:12px;
      background:linear-gradient(135deg, var(--blue), var(--blue2));
      box-shadow:0 14px 40px rgba(0,64,128,.25);
      position:relative;
      overflow:hidden;
    }
    .logo:before{
      content:"";
      position:absolute; inset:-40%;
      background:conic-gradient(from 120deg, rgba(255,255,255,.0), rgba(255,255,255,.55), rgba(255,255,255,.0));
      animation:spin 4.5s linear infinite;
    }
    @keyframes spin{to{transform:rotate(360deg)}}
    .brand small{display:block; font-size:12px; color:var(--muted); font-weight:700; margin-top:2px}

    .nav{
      display:flex; gap:14px; flex-wrap:wrap; justify-content:flex-end;
      font-size:13px; font-weight:800; color:var(--muted);
    }
    .nav a{
      padding:8px 10px; border-radius:999px;
      border:1px solid transparent;
    }
    .nav a:hover{border-color:var(--line); background:rgba(0,64,128,.06); color:var(--ink)}

    .actions{display:flex; align-items:center; gap:10px}
    .btn{
      border:1px solid var(--line);
      background:rgba(255,255,255,.65);
      color:var(--ink);
      border-radius:999px;
      padding:10px 12px;
      font-weight:900;
      cursor:pointer;
      transition:.18s ease;
      display:inline-flex; align-items:center; gap:8px;
    }
    [data-theme="dark"] .btn{background:rgba(11,27,51,.65)}
    .btn:hover{transform:translateY(-1px); box-shadow:0 10px 22px rgba(0,64,128,.12)}
    .btn.primary{
      background:linear-gradient(135deg,var(--blue),var(--blue2));
      border-color:transparent;
      color:#fff;
      box-shadow:0 18px 45px rgba(0,64,128,.22);
    }
    .btn.primary:hover{box-shadow:0 22px 55px rgba(0,64,128,.28)}

    /* Hero */
    .hero{padding:42px 0 22px}
    .hero-grid{
      display:grid; gap:22px;
      grid-template-columns: 1.15fr .85fr;
      align-items:stretch;
    }
    @media (max-width: 980px){
      .hero-grid{grid-template-columns:1fr}
      .nav{display:none}
    }

    .hero-card{
      background:linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.70));
      border:1px solid rgba(0,64,128,.14);
      border-radius:var(--radius2);
      box-shadow:var(--shadow);
      padding:26px;
      position:relative;
      overflow:hidden;
    }
    [data-theme="dark"] .hero-card{
      background:linear-gradient(180deg, rgba(11,27,51,.86), rgba(11,27,51,.66));
    }
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding:7px 12px; border-radius:999px;
      background:rgba(0,64,128,.08);
      border:1px solid rgba(0,64,128,.14);
      color:var(--ink);
      font-weight:900; font-size:12px;
    }
    [data-theme="dark"] .badge{
      background:rgba(127,170,255,.10);
      border:1px solid rgba(127,170,255,.18);
    }
    .dot{width:8px; height:8px; border-radius:99px; background:linear-gradient(135deg,var(--blue),var(--blue2))}
    h1{
      margin:14px 0 10px;
      font-size:36px;
      letter-spacing:-.03em;
      line-height:1.15;
    }
    @media (max-width: 560px){ h1{font-size:28px} }
    .lead{margin:0; color:var(--muted); font-weight:700}
    .hero-kpis{
      display:grid; grid-template-columns:repeat(3,1fr); gap:12px;
      margin-top:18px;
    }
    .kpi{
      background:rgba(0,64,128,.06);
      border:1px solid rgba(0,64,128,.12);
      border-radius:16px;
      padding:12px;
    }
    [data-theme="dark"] .kpi{
      background:rgba(127,170,255,.08);
      border-color:rgba(127,170,255,.16);
    }
    .kpi b{display:block; font-size:12px; color:var(--muted)}
    .kpi strong{display:block; margin-top:4px; font-size:18px}

    .hero-side{
      display:grid; gap:14px;
      align-content:start;
    }
    .mini{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:0 12px 34px rgba(0,64,128,.08);
      padding:16px;
    }
    .mini h3{margin:0 0 8px; font-size:14px}
    .mini p{margin:0; color:var(--muted); font-weight:650; font-size:13px}

    /* Sections */
    section{padding:26px 0}
    .section-title{
      display:flex; align-items:flex-end; justify-content:space-between; gap:16px;
      margin:0 0 14px;
    }
    .section-title h2{
      margin:0;
      font-size:22px;
      letter-spacing:-.02em;
    }
    .section-title .hint{color:var(--muted); font-weight:700; font-size:13px}

    .grid{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:14px;
    }
    @media (max-width: 980px){ .grid{grid-template-columns:1fr} }

    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:18px;
      box-shadow:0 12px 30px rgba(0,64,128,.08);
    }
    .card h3{margin:0 0 10px; font-size:16px}
    .card p{margin:0; color:var(--muted); font-weight:650}
    .list{margin:10px 0 0; padding-left:18px; color:var(--muted); font-weight:650}
    .list li{margin:6px 0}

    /* Risk table */
    .toolbar{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between;
      margin:10px 0 12px;
    }
    .search{
      flex:1;
      display:flex; gap:10px; flex-wrap:wrap;
      align-items:center;
    }
    .input, select, textarea{
      border:1px solid var(--line);
      background:rgba(255,255,255,.7);
      color:var(--ink);
      border-radius:12px;
      padding:10px 12px;
      font-weight:800;
      outline:none;
      min-width: 180px;
      font-family:inherit;
    }
    [data-theme="dark"] .input, [data-theme="dark"] select, [data-theme="dark"] textarea{
      background:rgba(11,27,51,.7);
    }
    .input{flex:1; min-width:220px}
    .table-wrap{
      overflow:auto;
      border-radius:16px;
      border:1px solid var(--line);
      background:var(--card);
    }
    table{
      border-collapse:separate;
      border-spacing:0;
      width:100%;
      min-width:900px;
      font-size:13px;
    }
    thead th{
      position:sticky; top:0;
      background:linear-gradient(180deg, rgba(0,64,128,.10), rgba(0,64,128,.06));
      color:var(--ink);
      text-align:left;
      padding:12px 12px;
      border-bottom:1px solid var(--line);
      font-weight:950;
      z-index:1;
    }
    tbody td{
      padding:12px 12px;
      border-bottom:1px solid rgba(0,64,128,.10);
      color:var(--muted);
      vertical-align:top;
      font-weight:650;
    }
    tbody tr:hover td{background:rgba(0,64,128,.04); color:var(--ink)}
    .tag{
      display:inline-flex; align-items:center; gap:6px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(0,64,128,.14);
      background:rgba(0,64,128,.06);
      color:var(--ink);
      font-weight:950;
      font-size:12px;
      white-space:nowrap;
    }

    /* Steps */
    .steps{
      display:grid; gap:14px;
      grid-template-columns:repeat(3,1fr);
    }
    @media (max-width: 980px){ .steps{grid-template-columns:1fr} }
    .step{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:18px;
      box-shadow:0 12px 30px rgba(0,64,128,.08);
    }
    .step .no{
      width:34px; height:34px; border-radius:12px;
      display:grid; place-items:center;
      background:linear-gradient(135deg,var(--blue),var(--blue2));
      color:#fff; font-weight:950;
      box-shadow:0 14px 30px rgba(0,64,128,.18);
    }
    .step h3{margin:10px 0 8px; font-size:16px}
    .step ul{margin:0; padding-left:18px; color:var(--muted); font-weight:650}
    .step li{margin:6px 0}

    /* Checklist */
    .checklist{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius2);
      padding:18px;
      box-shadow:var(--shadow);
    }
    .cl-head{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      flex-wrap:wrap;
      margin-bottom:12px;
    }
    .cl-head h3{margin:0; font-size:16px}
    .cl-meta{
      display:flex; gap:10px; flex-wrap:wrap;
    }
    .cl-meta .input{min-width:180px; flex:unset}
    .cl-items{
      display:grid; gap:10px;
    }
    .cl-item{
      display:flex; gap:10px; align-items:flex-start;
      padding:12px 12px;
      border-radius:16px;
      border:1px solid rgba(0,64,128,.12);
      background:rgba(0,64,128,.05);
    }
    [data-theme="dark"] .cl-item{
      border-color:rgba(127,170,255,.16);
      background:rgba(127,170,255,.08);
    }
    .cl-item input[type="checkbox"]{
      margin-top:4px;
      width:18px; height:18px;
      accent-color: var(--blue2);
      cursor:pointer;
    }
    .cl-item b{display:block; font-size:13px}
    .cl-item small{display:block; color:var(--muted); font-weight:650; margin-top:2px}
    .progress{
      height:10px;
      background:rgba(0,64,128,.10);
      border:1px solid rgba(0,64,128,.12);
      border-radius:999px;
      overflow:hidden;
    }
    .bar{
      height:100%;
      width:0%;
      background:linear-gradient(90deg,var(--blue),var(--blue2));
      transition:width .25s ease;
    }

    /* TBM */
    .tbm{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius2);
      padding:18px;
      box-shadow:var(--shadow);
    }
    .tbm-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 980px){ .tbm-grid{grid-template-columns:1fr} }

    /* Footer */
    footer{
      padding:26px 0 40px;
      color:var(--muted);
      font-weight:700;
      font-size:12px;
    }
    .foot{
      display:flex; align-items:flex-start; justify-content:space-between; gap:16px;
      flex-wrap:wrap;
      border-top:1px solid rgba(0,64,128,.12);
      padding-top:16px;
    }

    /* Print */
    @media print{
      .topbar, .actions, .nav, .btn, .toolbar, .hint, .hero-side { display:none !important; }
      body{background:#fff}
      .hero{padding:0}
      .hero-card, .card, .step, .checklist, .tbm { box-shadow:none !important; }
      .container{width:100%}
      a{color:#000}
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="container">
      <div class="topbar-inner">
        <div class="brand">
          <div class="logo" aria-hidden="true"></div>
          <div>
            ê´€ë¡œê³µì‚¬ ì•ˆì „ë³´ê±´ ì‘ì—…ì§€ì¹¨
            <small>êµ´ì°©Â·í™ë§‰ì´Â·ê´€ë¡œë¶€ì„¤Â·ë˜ë©”ìš°ê¸°Â·ë§¨í™€ | SOP Â· ì²´í¬ë¦¬ìŠ¤íŠ¸ Â· TBM</small>
          </div>
        </div>

        <nav class="nav" aria-label="ì£¼ìš” ë©”ë‰´">
          <a href="#overview">ê°œìš”</a>
          <a href="#risks">ìœ„í—˜ìš”ì¸/ëŒ€ì±…</a>
          <a href="#procedure">ì‘ì—…ì ˆì°¨(SOP)</a>
          <a href="#checklist">ì¼ì¼ì ê²€</a>
          <a href="#tbm">TBM 10ì´ˆ</a>
        </nav>

        <div class="actions">
          <button class="btn" id="themeBtn" type="button" title="ë‹¤í¬ëª¨ë“œ ì „í™˜">ğŸŒ™ í…Œë§ˆ</button>
          <button class="btn" id="printBtn" type="button" title="ì¸ì‡„/ì €ì¥(PDF)">ğŸ–¨ï¸ ì¸ì‡„</button>
          <a class="btn primary" href="#tbm" title="ë°”ë¡œ TBM">ğŸ™ï¸ TBM</a>
        </div>
      </div>
    </div>
  </div>

  <header class="hero">
    <div class="container">
      <div class="hero-grid">
        <div class="hero-card">
          <span class="badge"><span class="dot"></span> í˜„ì¥ ì ìš©í˜• Â· ê´€ë¡œê³µì‚¬ í‘œì¤€ ì•ˆì „ì‘ì—…</span>
          <h1>ê´€ë¡œê³µì‚¬ ì¬í•´ë¥¼<br/>â€œë¶•ê´´Â·ì¶©ëŒÂ·ì§ˆì‹â€ë¶€í„° ëŠìŠµë‹ˆë‹¤.</h1>
          <p class="lead">
            êµ´ì°©Â·í™ë§‰ì´Â·ê´€ë¡œë¶€ì„¤Â·ë˜ë©”ìš°ê¸° ê³µì •ì€ <b>í† ì‚¬ ë¶•ê´´(ë§¤ëª°)</b>ì™€ <b>ì¥ë¹„ ì¶©ëŒ</b>,
            ë§¨í™€Â·ê´€ë‚´ëŠ” <b>ì‚°ì†Œê²°í•Â·ìœ í•´ê°€ìŠ¤</b>ê°€ í•µì‹¬ ìœ„í—˜ì…ë‹ˆë‹¤.
            ì´ í˜ì´ì§€ëŠ” <b>ì‘ì—…ê³„íšâ†’í†µì œâ†’ì ê²€â†’TBM</b> ìˆœìœ¼ë¡œ ë°”ë¡œ ì“°ê²Œ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
          </p>

          <div class="hero-kpis" role="list">
            <div class="kpi" role="listitem">
              <b>ì¤‘ì  ì¬í•´ìœ í˜•</b>
              <strong>ë¶•ê´´Â·ë§¤ëª°</strong>
            </div>
            <div class="kpi" role="listitem">
              <b>ì¤‘ì  ì¬í•´ìœ í˜•</b>
              <strong>ì¶©ëŒÂ·ë¼ì„</strong>
            </div>
            <div class="kpi" role="listitem">
              <b>ì¤‘ì  ì¬í•´ìœ í˜•</b>
              <strong>ì§ˆì‹</strong>
            </div>
          </div>

          <div style="margin-top:16px; display:flex; gap:10px; flex-wrap:wrap;">
            <a class="btn" href="#risks">âš ï¸ ìœ„í—˜ìš”ì¸ ë³´ê¸°</a>
            <a class="btn" href="#procedure">ğŸ§­ SOP ë³´ê¸°</a>
            <a class="btn" href="#checklist">ğŸ§¾ ì ê²€ ì‹œì‘</a>
          </div>

          <p style="margin:14px 0 0; color:var(--muted); font-weight:700; font-size:12px;">
            â€» ë³¸ í˜ì´ì§€ëŠ” â€œê´€ë¡œê³µì‚¬â€ í˜„ì¥ ìš´ì˜ì„ ìœ„í•´ ì§€ì¹¨ì„ ì‹¤ë¬´í˜•(êµìœ¡/ì ê²€/TBM)ìœ¼ë¡œ ì¬êµ¬ì„±í•œ í…œí”Œë¦¿ì…ë‹ˆë‹¤.
          </p>
        </div>

        <aside class="hero-side" aria-label="í•µì‹¬ ìš´ì˜ í¬ì¸íŠ¸">
          <div class="mini">
            <h3>ğŸ¯ ì‘ì—…ê³„íš í•µì‹¬</h3>
            <p>ì§€í•˜ë§¤ì„¤ë¬¼ í™•ì¸ â†’ êµ´ì°©ë°©ë²•/í™ë§‰ì´ ê³„íš â†’ êµí†µì²˜ë¦¬ â†’ ë°€íê³µê°„ ì—¬ë¶€ íŒë‹¨</p>
          </div>
          <div class="mini">
            <h3>ğŸ›‘ ì¦‰ì‹œ í†µì œ 3ê°€ì§€</h3>
            <p>â‘  êµ´ì°©ë¶€ ì ‘ê·¼ í†µì œ â‘¡ ì¥ë¹„ í›„ì§„ ìœ ë„ â‘¢ ë§¨í™€ ì‚°ì†Œì¸¡ì •Â·í™˜ê¸°</p>
          </div>
          <div class="mini">
            <h3>ğŸ“Œ í˜„ì¥ ê¸°ì¤€</h3>
            <p>â€œê·¼ë¡œì ì ‘ê·¼ ê°€ëŠ¥í•œ êµ´ì°©ë¶€â€ëŠ” ë°˜ë“œì‹œ í™ë§‰ì´/ì¶œì…í†µì œ/ìŠ¹ê°•ì„¤ë¹„ë¥¼ ì„¸íŠ¸ë¡œ ìš´ì˜</p>
          </div>
        </aside>
      </div>
    </div>
  </header>

  <main>
    <!-- OVERVIEW -->
    <section id="overview">
      <div class="container">
        <div class="section-title">
          <h2>ê°œìš”</h2>
          <div class="hint">ëª©ì Â·ì ìš©ë²”ìœ„Â·í•µì‹¬ ê³µì •</div>
        </div>

        <div class="grid">
          <div class="card">
            <h3>1) ëª©ì </h3>
            <p>ê´€ë¡œê³µì‚¬ ì¤‘ í† ì‚¬ ë¶•ê´´(ë§¤ëª°), ì¥ë¹„ ì¶©ëŒ, ì¤‘ëŸ‰ë¬¼ ì·¨ê¸‰ ë¼ì„, ë§¨í™€ ì§ˆì‹ ë“± ì¤‘ëŒ€ì¬í•´ë¥¼ ì˜ˆë°©í•©ë‹ˆë‹¤.</p>
          </div>
          <div class="card">
            <h3>2) ì ìš©ë²”ìœ„</h3>
            <p>ìƒÂ·í•˜ìˆ˜ë„, í†µì‹ , ì „ê¸°, ê°€ìŠ¤ ë“± ê´€ë¡œ ë§¤ì„¤ ê³µì‚¬ ì „ ê³µì •(êµ´ì°©Â·í™ë§‰ì´Â·ë¶€ì„¤Â·ë˜ë©”ìš°ê¸°Â·ë³µêµ¬) ë° ë§¨í™€ ì‘ì—….</p>
          </div>
          <div class="card">
            <h3>3) ê³µì • íë¦„</h3>
            <p>ì¡°ì‚¬Â·ê³„íš â†’ êµ´ì°© â†’ í™ë§‰ì´ â†’ ê´€ë¡œ ì¸ì–‘/ë¶€ì„¤ â†’ ë˜ë©”ìš°ê¸°/ë‹¤ì§ â†’ í¬ì¥ë³µêµ¬ â†’ ì •ë¦¬/ê¸°ë¡.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- RISKS -->
    <section id="risks">
      <div class="container">
        <div class="section-title">
          <h2>ì¤‘ì  ìœ„í—˜ìš”ì¸ ë° ì•ˆì „ëŒ€ì±…</h2>
          <div class="hint">TBM/êµìœ¡ì— ë°”ë¡œ ì“°ëŠ” ê²€ìƒ‰ í‘œ</div>
        </div>

        <div class="toolbar">
          <div class="search">
            <input class="input" id="q" placeholder="ì˜ˆ) ë¶•ê´´, í™ë§‰ì´, í›„ì§„, í¬ë ˆì¸, ë§¨í™€, ì‚°ì†Œê²°í•â€¦" />
            <select id="type">
              <option value="">ì¬í•´ìœ í˜•(ì „ì²´)</option>
              <option value="ë¶•ê´´Â·ë§¤ëª°">ë¶•ê´´Â·ë§¤ëª°</option>
              <option value="ì¶©ëŒ">ì¶©ëŒ</option>
              <option value="ë¼ì„">ë¼ì„</option>
              <option value="ì§ˆì‹">ì§ˆì‹</option>
              <option value="ë‚™í•˜Â·ë¹„ë˜">ë‚™í•˜Â·ë¹„ë˜</option>
              <option value="ê°ì „">ê°ì „</option>
              <option value="í™”ì¬Â·í­ë°œ">í™”ì¬Â·í­ë°œ</option>
            </select>
            <select id="phase">
              <option value="">ê³µì •(ì „ì²´)</option>
              <option value="ì‚¬ì „ì¡°ì‚¬/ê³„íš">ì‚¬ì „ì¡°ì‚¬/ê³„íš</option>
              <option value="êµ´ì°©">êµ´ì°©</option>
              <option value="í™ë§‰ì´">í™ë§‰ì´</option>
              <option value="ê´€ë¡œë¶€ì„¤">ê´€ë¡œë¶€ì„¤</option>
              <option value="ë˜ë©”ìš°ê¸°/ë³µêµ¬">ë˜ë©”ìš°ê¸°/ë³µêµ¬</option>
              <option value="ë§¨í™€/ê´€ë‚´">ë§¨í™€/ê´€ë‚´</option>
              <option value="ìš´ë°˜/í•˜ì—­">ìš´ë°˜/í•˜ì—­</option>
            </select>
          </div>
          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn" id="reset" type="button">â†º ì´ˆê¸°í™”</button>
          </div>
        </div>

        <div class="table-wrap" role="region" aria-label="ìœ„í—˜ìš”ì¸ ë° ì•ˆì „ëŒ€ì±… í‘œ" tabindex="0">
          <table>
            <thead>
              <tr>
                <th style="width:140px">ì¬í•´ìœ í˜•</th>
                <th style="width:140px">ê³µì •</th>
                <th>ìœ„í—˜ìš”ì¸(í˜„ì¥ ìƒí™©)</th>
                <th>ì•ˆì „ëŒ€ì±…(í•µì‹¬ í†µì œ)</th>
              </tr>
            </thead>
            <tbody id="riskBody"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- PROCEDURE -->
    <section id="procedure">
      <div class="container">
        <div class="section-title">
          <h2>ì‘ì—…ì ˆì°¨(SOP)</h2>
          <div class="hint">ì‘ì—…ê³„íš â†’ ì‘ì—… ì „ â†’ ì‘ì—… ì¤‘</div>
        </div>

        <div class="steps">
          <div class="step">
            <div class="no">1</div>
            <h3>ì‘ì—…ê³„íš ìˆ˜ë¦½</h3>
            <ul>
              <li>ì§€í•˜ë§¤ì„¤ë¬¼(ìƒÂ·í•˜ìˆ˜/ê°€ìŠ¤/ì „ê¸°/í†µì‹ ) ìœ„ì¹˜ í™•ì¸ ë° í‘œì‹œ</li>
              <li>êµ´ì°©ê¹Šì´Â·ì§€ë°˜ìƒíƒœì— ë”°ë¥¸ êµ´ì°©ë°©ë²•/í™ë§‰ì´ ê³„íš ìˆ˜ë¦½</li>
              <li>êµí†µì²˜ë¦¬ê³„íš(ì°¨ë‹¨Â·ìš°íšŒÂ·ì‹ í˜¸ìˆ˜)ê³¼ ì¶œì…í†µì œêµ¬ì—­ ì„¤ì •</li>
              <li>ë§¨í™€/ê´€ë‚´ëŠ” ë°€íê³µê°„ ì—¬ë¶€ íŒë‹¨ ë° í™˜ê¸°Â·ì¸¡ì •Â·êµ¬ì¡°ê³„íš ì¤€ë¹„</li>
            </ul>
          </div>

          <div class="step">
            <div class="no">2</div>
            <h3>ì‘ì—… ì „ ì¤€ìˆ˜ì‚¬í•­</h3>
            <ul>
              <li>ê´€ë¦¬ê°ë…ì: TBM ì‹¤ì‹œ(ì˜¤ëŠ˜ ê³µì •Â·ìœ„í—˜Â·í†µì œÂ·ë¹„ìƒì ˆì°¨)</li>
              <li>ì¥ë¹„/ì°¨ëŸ‰ í›„ì§„ê²½ë³´ê¸°Â·ê²½ê´‘ë“±Â·í›„ë°©ì¹´ë©”ë¼ ì ê²€</li>
              <li>êµ´ì°©ë¶€ ì£¼ë³€ ë‚™í•˜ ë°©ì§€(ë°©í˜¸ìš¸/ì½˜/ë°”ë¦¬ì¼€ì´ë“œ) ì„¤ì¹˜</li>
              <li>í™ë§‰ì´ ìì¬Â·ì§€ë³´ì¬ ìƒíƒœ í™•ì¸(ë³€í˜•/ê²°ì†/ë¶€ì‹)</li>
              <li>ë§¨í™€ ì‘ì—…ì€ ì‚°ì†Œ/ê°€ìŠ¤ ì¸¡ì •ê¸°, ì†¡í’ê¸°, êµ¬ì¡°ì¥ë¹„ ì¤€ë¹„</li>
            </ul>
          </div>

          <div class="step">
            <div class="no">3</div>
            <h3>ì‘ì—… ì¤‘ ì¤€ìˆ˜ì‚¬í•­</h3>
            <ul>
              <li>êµ´ì°©ë©´ ë¶•ê´´ ì§•í›„(ê· ì—´Â·ì¹¨í•˜Â·ìš©ìˆ˜) ë°œê²¬ ì‹œ ì¦‰ì‹œ ì¤‘ì§€</li>
              <li>ì‘ì—…ë°˜ê²½ ì¶œì…í†µì œ + ì¥ë¹„ í›„ì§„ ì‹œ ìœ ë„ì ì‹ í˜¸ ì¤€ìˆ˜</li>
              <li>ì¤‘ëŸ‰ ê´€ë¡œ ì¸ì–‘Â·í•˜ì—­ ì‹œ í•˜ë¶€ ì¶œì… ê¸ˆì§€(ì‹ í˜¸ìˆ˜ ë°°ì¹˜)</li>
              <li>ë§¨í™€/ê´€ë‚´: ì¸¡ì •â†’í™˜ê¸°â†’ê°ì‹œì¸ ë°°ì¹˜â†’ë¹„ìƒêµ¬ì¡°ì²´ê³„ ìœ ì§€</li>
              <li>ë˜ë©”ìš°ê¸°/ë‹¤ì§ ì¥ë¹„ ìš´í–‰ë¡œ ë¶„ë¦¬(ê·¼ë¡œì ë™ì„  ë¶„ë¦¬)</li>
            </ul>
          </div>
        </div>

        <div style="margin-top:14px" class="card">
          <h3>ì‘ì—… ì¢…ë£Œ</h3>
          <ul class="list">
            <li>êµ´ì°©ë¶€ ê°œêµ¬ë¶€ ë°©í˜¸(ë®ê°œ/ë‚œê°„/ì¡°ëª…) ìœ ì§€, ì•¼ê°„ ê²½ê³ ë“± ì„¤ì¹˜</li>
            <li>ì¥ë¹„ëŠ” í‰íƒ„í•œ ì¥ì†Œ ì£¼ì°¨, ë²„í‚·/ë¸”ë ˆì´ë“œ í•˜ê°• í›„ í‚¤ ì œê±°</li>
            <li>ë‹¹ì¼ ì´ìƒì§•í›„Â·ë³€ê²½ì‚¬í•­ ê¸°ë¡(ë¶•ê´´ì§•í›„/ì§€í•˜ìˆ˜/ë¯¼ì›/êµí†µ)</li>
            <li>ì •ë¦¬ì •ëˆ(ìì¬ ì ì¹˜, í†µë¡œ í™•ë³´, ë¯¸ë„ëŸ¼ ìš”ì¸ ì œê±°)</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- CHECKLIST -->
    <section id="checklist">
      <div class="container">
        <div class="section-title">
          <h2>ê´€ë¡œê³µì‚¬ ì•ˆì „ì ê²€ ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>
          <div class="hint">ì²´í¬ ìƒíƒœëŠ” ë¸Œë¼ìš°ì €ì— ì €ì¥ë©ë‹ˆë‹¤</div>
        </div>

        <div class="checklist">
          <div class="cl-head">
            <h3>âœ… ì˜¤ëŠ˜ ì ê²€</h3>
            <div class="cl-meta">
              <input class="input" id="site" placeholder="í˜„ì¥ëª… (ì˜ˆ: â—‹â—‹ì‹œ í•˜ìˆ˜ê´€ë¡œ)" />
              <input class="input" id="zone" placeholder="êµ¬ê°„/ê³µêµ¬ (ì˜ˆ: A-3êµ¬ê°„)" />
              <input class="input" id="inspector" placeholder="ì ê²€ì (ì˜ˆ: ê¹€ëŒ€í™)" />
            </div>
            <div style="display:flex; gap:10px; flex-wrap:wrap;">
              <button class="btn" id="saveMeta" type="button">ğŸ’¾ ì •ë³´ ì €ì¥</button>
              <button class="btn" id="clearAll" type="button">ğŸ§¹ ì „ì²´ í•´ì œ</button>
              <button class="btn primary" id="exportTxt" type="button">ğŸ“„ ê²°ê³¼ ë³µì‚¬</button>
            </div>
          </div>

          <div class="progress" aria-label="ì ê²€ ì§„í–‰ë¥ ">
            <div class="bar" id="bar"></div>
          </div>

          <div style="height:10px"></div>
          <div class="cl-items" id="cl"></div>

          <p style="margin:12px 0 0; color:var(--muted); font-weight:700; font-size:12px;">
            â€» ì²´í¬ë¦¬ìŠ¤íŠ¸ëŠ” ê´€ë¡œê³µì •(êµ´ì°©/í™ë§‰ì´/ë¶€ì„¤/ë˜ë©”ìš°ê¸°/ë§¨í™€) ê¸°ì¤€ìœ¼ë¡œ ì‹¤ë¬´í˜•ìœ¼ë¡œ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
          </p>
        </div>
      </div>
    </section>

    <!-- TBM -->
    <section id="tbm">
      <div class="container">
        <div class="section-title">
          <h2>ì‘ì—… ì „ ì•ˆì „êµìœ¡(TBM) 10ì´ˆ ìŠ¤í¬ë¦½íŠ¸</h2>
          <div class="hint">í˜„ì¥ëª…/ì‘ì—…ë‚´ìš© ì…ë ¥ â†’ ì¦‰ì‹œ ìƒì„±/ë³µì‚¬</div>
        </div>

        <div class="tbm">
          <div class="tbm-grid">
            <input class="input" id="tbmSite" placeholder="í˜„ì¥ëª… (ì˜ˆ: â—‹â—‹ì‹œ í•˜ìˆ˜ê´€ë¡œ ê³µì‚¬)" />
            <input class="input" id="tbmWork" placeholder="ì˜¤ëŠ˜ ì‘ì—…ë‚´ìš© (ì˜ˆ: ê´€ë¡œ ë¶€ì„¤ ë° ë˜ë©”ìš°ê¸°)" />
          </div>

          <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:12px;">
            <select class="input" id="tbmType" style="flex:1; min-width:260px;">
              <option value="general">ì¼ë°˜ ê´€ë¡œê³µì‚¬(í˜¼ì¬)</option>
              <option value="excavation">êµ´ì°© ì‘ì—…</option>
              <option value="shoring">í™ë§‰ì´ì§€ë³´ê³µ ì„¤ì¹˜Â·í•´ì²´</option>
              <option value="laying">ê´€ë¡œ ì¸ì–‘Â·ë¶€ì„¤Â·ì—°ê²°</option>
              <option value="backfill">ë˜ë©”ìš°ê¸°Â·ë‹¤ì§Â·ë³µêµ¬</option>
              <option value="manhole">ë§¨í™€Â·ê´€ë‚´(ë°€íê³µê°„)</option>
              <option value="traffic">ë„ë¡œ/êµí†µ í†µì œ ì‘ì—…</option>
            </select>

            <button class="btn primary" id="genTBM" type="button">ğŸ™ï¸ 10ì´ˆ TBM ìƒì„±</button>
            <button class="btn" id="copyTBM" type="button">ğŸ“‹ ë¬¸êµ¬ ë³µì‚¬</button>
          </div>

          <textarea id="tbmResult" rows="7"
            style="margin-top:12px; width:100%; border-radius:14px; padding:12px; font-weight:800; line-height:1.6;"
            placeholder="ì—¬ê¸°ì— TBM ë¬¸êµ¬ê°€ ìƒì„±ë©ë‹ˆë‹¤."></textarea>

          <p style="margin:10px 0 0; color:var(--muted); font-weight:700; font-size:12px;">
            íŒ: â€œì˜¤ëŠ˜ ì‘ì—…ë‚´ìš©â€ì„ êµ¬ì²´ì ìœ¼ë¡œ(ì˜ˆ: â€˜í™ë§‰ì´ ë²„íŒ€ëŒ€ í•´ì²´â€™, â€˜ë§¨í™€ ë‚´ë¶€ ì ê²€â€™) ì“°ë©´ ë¬¸êµ¬ê°€ ë” ì •í™•í•´ì§‘ë‹ˆë‹¤.
          </p>
        </div>
      </div>
    </section>

    <footer>
      <div class="container">
        <div class="foot">
          <div>Â© 2010â€“2025 DONGJIN CONSTRUCTION Co., Ltd. Â· Pipeline Safety Guidance UI</div>
          <div>ë³¸ í˜ì´ì§€ëŠ” í˜„ì¥ ìš´ì˜(êµìœ¡/ì ê²€/TBM) ëª©ì ì˜ í…œí”Œë¦¿ì…ë‹ˆë‹¤.</div>
        </div>
      </div>
    </footer>
  </main>

  <script>
    // -------------------------------
    // Theme / Print
    // -------------------------------
    const root = document.documentElement;
    const themeBtn = document.getElementById('themeBtn');
    const savedTheme = localStorage.getItem('pl_theme');
    if(savedTheme){ root.setAttribute('data-theme', savedTheme); }
    themeBtn.addEventListener('click', () => {
      const cur = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
      root.setAttribute('data-theme', cur);
      localStorage.setItem('pl_theme', cur);
    });
    document.getElementById('printBtn').addEventListener('click', () => window.print());

    // -------------------------------
    // Risk data
    // -------------------------------
    const risks = [
      { type:"ë¶•ê´´Â·ë§¤ëª°", phase:"êµ´ì°©", hazard:"êµ´ì°©ë©´ ê· ì—´Â·ì¹¨í•˜Â·ìš©ìˆ˜ ë°œìƒ í›„ ê³„ì† ì‘ì—…", measure:"ì§•í›„ ë°œìƒ ì¦‰ì‹œ ì‘ì—…ì¤‘ì§€ â†’ ë°°ìˆ˜/ë³´ê°•/í™ë§‰ì´ ì¬ê²€í†  í›„ ì¬ê°œ" },
      { type:"ë¶•ê´´Â·ë§¤ëª°", phase:"êµ´ì°©", hazard:"êµ´ì°©í† /ìì¬ë¥¼ êµ´ì°©ë©´ ê°€ì¥ìë¦¬ì— ì ì¹˜", measure:"êµ´ì°©ë©´ ìƒë‹¨ ì ì¹˜ ê¸ˆì§€, ì´ê²© ì ì¹˜ ë° ë‚™í•˜ë°©ì§€" },
      { type:"ë¶•ê´´Â·ë§¤ëª°", phase:"í™ë§‰ì´", hazard:"í™ë§‰ì´ ì§€ë³´ì¬(ë²„íŒ€ëŒ€/í† ë¥˜íŒ) ë³€í˜•Â·í’€ë¦¼ ìƒíƒœ ë°©ì¹˜", measure:"ì„¤ì¹˜ ìƒíƒœ ìˆ˜ì‹œì ê²€, ë³€í˜•/í’€ë¦¼ ì‹œ ì¦‰ì‹œ ë³´ê°•Â·êµì²´" },
      { type:"ë¶•ê´´Â·ë§¤ëª°", phase:"ì‚¬ì „ì¡°ì‚¬/ê³„íš", hazard:"ì§€í•˜ë§¤ì„¤ë¬¼ ë¯¸í™•ì¸ìœ¼ë¡œ êµ´ì°© ì¤‘ íŒŒì†/ë¶•ê´´ ìœ„í—˜", measure:"ë„ë©´/íƒì‚¬ë¡œ ìœ„ì¹˜ í™•ì¸ í›„ í‘œì§€, ê·¼ì ‘ë¶€ëŠ” ìˆ˜ì‘ì—… ë³‘í–‰" },
      { type:"ì¶©ëŒ", phase:"ìš´ë°˜/í•˜ì—­", hazard:"ë¤í”„Â·ì¥ë¹„ í›„ì§„ ì¤‘ ìœ ë„ì ì—†ì´ ì´ë™", measure:"ìœ ë„ì ë°°ì¹˜Â·ì‹ í˜¸ì²´ê³„ í†µì¼, í›„ì§„ê²½ë³´ê¸°/í›„ë°©ì¹´ë©”ë¼ í™•ì¸" },
      { type:"ì¶©ëŒ", phase:"ë˜ë©”ìš°ê¸°/ë³µêµ¬", hazard:"ë‹¤ì§ì¥ë¹„/ë¡¤ëŸ¬ì™€ ê·¼ë¡œì ë™ì„  í˜¼ì¬", measure:"ì¥ë¹„ ìš´í–‰ë¡œÂ·ë³´í–‰ë¡œ ë¶„ë¦¬, ì‘ì—…êµ¬ê°„ ì¶œì…í†µì œ" },
      { type:"ë¼ì„", phase:"ê´€ë¡œë¶€ì„¤", hazard:"ê´€ë¡œ ì‚½ì…/ì—°ê²° ì¤‘ ì† ë¼ì„(ê°€ìŠ¤ì¼“/ë²¨/í´ë¨í”„)", measure:"ì† ë¼ì„ êµ¬ê°„ í‘œì‹œ, ì§€ê·¸/ë ˆë²„/ë¡œí”„ ì‚¬ìš©, ì† ìœ„ì¹˜ ì›ì¹™ êµìœ¡" },
      { type:"ë‚™í•˜Â·ë¹„ë˜", phase:"ê´€ë¡œë¶€ì„¤", hazard:"ê´€ë¡œ ì¸ì–‘ ì¤‘ í•˜ë¶€ì— ê·¼ë¡œì ìœ„ì¹˜", measure:"ì¸ì–‘í•˜ë¶€ ì¶œì…ê¸ˆì§€, ì‹ í˜¸ìˆ˜ ë°°ì¹˜, ì²´ê²°ìƒíƒœ(ìƒ¤í´/ì™€ì´ì–´) ì ê²€" },
      { type:"ì§ˆì‹", phase:"ë§¨í™€/ê´€ë‚´", hazard:"ì‚°ì†Œê²°í•Â·ìœ í•´ê°€ìŠ¤ í™˜ê²½ì—ì„œ ë¬´ì¸¡ì • ì§„ì…", measure:"ì¸¡ì •â†’í™˜ê¸°â†’ê°ì‹œì¸ ë°°ì¹˜â†’êµ¬ì¡°ì¥ë¹„ ì¤€ë¹„, í•„ìš” ì‹œ ì†¡ê¸°ë§ˆìŠ¤í¬" },
      { type:"ì§ˆì‹", phase:"ë§¨í™€/ê´€ë‚´", hazard:"ë§¨í™€ ì‘ì—… ì¤‘ 2ì°¨ êµ¬ì¡°ì íˆ¬ì…(ë¬´ë°©ë¹„)ìœ¼ë¡œ ì—°ì‡„ì¬í•´", measure:"êµ¬ì¡°ê³„íš/ë¹„ìƒì—°ë½ì²´ê³„ í™•ë¦½, êµ¬ì¡°ì¥ë¹„ë¡œ êµ¬ì¡°(ë¬´ì‘ì • ì§„ì… ê¸ˆì§€)" },
      { type:"ê°ì „", phase:"êµ´ì°©", hazard:"ì „ê¸°/í†µì‹  ê´€ë¡œ ê·¼ì ‘ë¶€ ê¸°ê³„êµ´ì°©", measure:"ê·¼ì ‘ë¶€ëŠ” ìˆ˜ì‘ì—… ë³‘í–‰, ê´€ë¡œ í‘œì‹œÂ·ê°ì‹œì ë°°ì¹˜, ì ˆì—° ë³´í˜¸" },
      { type:"í™”ì¬Â·í­ë°œ", phase:"ë§¨í™€/ê´€ë‚´", hazard:"ê°€ìŠ¤ê´€ ì¸ê·¼/ë°€íê³µê°„ì—ì„œ ë¶ˆê½ƒ ì‘ì—…", measure:"ê°€ìŠ¤ë†ë„ í™•ì¸, ì í™”ì› í†µì œ, í—ˆê°€ì ˆì°¨(Hot Work) ì ìš©" },
      { type:"ì¶©ëŒ", phase:"ë„ë¡œ/êµí†µ í†µì œ ì‘ì—…", hazard:"ì°¨ëŸ‰ í†µí–‰ ë„ë¡œì—ì„œ ì‘ì—…êµ¬ê°„ í‘œì§€/ì½˜ ë¶€ì¡±", measure:"êµí†µì²˜ë¦¬ê³„íš(ì°¨ë‹¨Â·ìš°íšŒÂ·ì‹ í˜¸ìˆ˜), ì•¼ê°„ ê²½ê´‘ë“±Â·ì¡°ëª… ì„¤ì¹˜" },
    ];

    const riskBody = document.getElementById('riskBody');
    const q = document.getElementById('q');
    const typeSel = document.getElementById('type');
    const phaseSel = document.getElementById('phase');
    const resetBtn = document.getElementById('reset');

    function esc(s){
      return String(s)
        .replaceAll('&','&amp;')
        .replaceAll('<','&lt;')
        .replaceAll('>','&gt;')
        .replaceAll('"','&quot;')
        .replaceAll("'","&#039;");
    }

    function renderRisks(){
      const keyword = q.value.trim().toLowerCase();
      const t = typeSel.value;
      const p = phaseSel.value;

      const filtered = risks.filter(r => {
        const okType = !t || r.type === t;
        const okPhase = !p || r.phase === p;
        const hay = (r.type + " " + r.phase + " " + r.hazard + " " + r.measure).toLowerCase();
        const okKey = !keyword || hay.includes(keyword);
        return okType && okPhase && okKey;
      });

      riskBody.innerHTML = filtered.map(r => `
        <tr>
          <td><span class="tag">${esc(r.type)}</span></td>
          <td><span class="tag">${esc(r.phase)}</span></td>
          <td>${esc(r.hazard)}</td>
          <td>${esc(r.measure)}</td>
        </tr>
      `).join('') || `
        <tr><td colspan="4" style="padding:18px;color:var(--muted);font-weight:800;">
          ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ í‚¤ì›Œë“œë¡œ ì‹œë„í•´ë³´ì„¸ìš”.
        </td></tr>
      `;
    }

    q.addEventListener('input', renderRisks);
    typeSel.addEventListener('change', renderRisks);
    phaseSel.addEventListener('change', renderRisks);
    resetBtn.addEventListener('click', () => {
      q.value = "";
      typeSel.value = "";
      phaseSel.value = "";
      renderRisks();
    });
    renderRisks();

    // -------------------------------
    // Checklist (localStorage)
    // -------------------------------
    const checklist = [
      {
        title:"ì‘ì—…ê³„íš/ì‚¬ì „ì¡°ì‚¬",
        items:[
          {k:"ì§€í•˜ë§¤ì„¤ë¬¼(ê°€ìŠ¤/ì „ê¸°/í†µì‹ /ìƒí•˜ìˆ˜) ìœ„ì¹˜ í™•ì¸Â·í‘œì‹œ", d:"ë„ë©´+íƒì‚¬, ê·¼ì ‘ë¶€ ìˆ˜ì‘ì—… ê³„íš"},
          {k:"êµ´ì°©ê¹Šì´/ì§€ë°˜ìƒíƒœì— ë”°ë¥¸ êµ´ì°©ë°©ë²•Â·í™ë§‰ì´ ê³„íš ìˆ˜ë¦½", d:"ë³€ê²½ ì‹œ ì¬ê²€í† "},
          {k:"êµí†µì²˜ë¦¬ê³„íš(ì°¨ë‹¨Â·ìš°íšŒÂ·ì‹ í˜¸ìˆ˜) ìˆ˜ë¦½", d:"ë„ë¡œ ì‘ì—… ì‹œ í•„ìˆ˜"},
          {k:"ë§¨í™€/ê´€ë‚´ ì‘ì—… â€˜ë°€íê³µê°„â€™ ì—¬ë¶€ íŒë‹¨ ë° ê³„íš", d:"ì¸¡ì •Â·í™˜ê¸°Â·ê°ì‹œì¸Â·êµ¬ì¡°"},
        ]
      },
      {
        title:"êµ´ì°©/í™ë§‰ì´(ë¶•ê´´Â·ë§¤ëª°)",
        items:[
          {k:"êµ´ì°©ë©´ ì£¼ë³€ ì¶œì…í†µì œ(ë°”ë¦¬ì¼€ì´ë“œ/ì½˜/í‘œì§€)", d:"ë‚™í•˜Â·ì¶”ë½Â·ì ‘ê·¼ ì˜ˆë°©"},
          {k:"êµ´ì°©í† Â·ìì¬ë¥¼ êµ´ì°©ë©´ ê°€ì¥ìë¦¬ ì ì¹˜ ê¸ˆì§€", d:"ì´ê²© ì ì¹˜"},
          {k:"ê· ì—´Â·ì¹¨í•˜Â·ìš©ìˆ˜ ìœ ì… ì§•í›„ ìˆ˜ì‹œ í™•ì¸", d:"ì§•í›„ ì‹œ ì¦‰ì‹œ ì¤‘ì§€"},
          {k:"í™ë§‰ì´ ì§€ë³´ì¬ ë³€í˜•/í’€ë¦¼/ë¶€ì‹ ì ê²€", d:"ë³´ê°•Â·êµì²´"},
          {k:"ìŠ¹ê°•ì„¤ë¹„(ì‚¬ë‹¤ë¦¬ ë“±) í™•ë³´ ë° í†µë¡œ ìœ ì§€", d:"ì¶œì… ì•ˆì „"},
        ]
      },
      {
        title:"ìš´ë°˜/í•˜ì—­/ì¥ë¹„(ì¶©ëŒÂ·ë¼ì„)",
        items:[
          {k:"í›„ì§„ê²½ë³´ê¸°Â·ê²½ê´‘ë“±Â·í›„ë°©ì¹´ë©”ë¼Â·í›„ì‚¬ê²½ ì‘ë™ í™•ì¸", d:"ì°¨ëŸ‰/ì¥ë¹„ ê³µí†µ"},
          {k:"í›„ì§„/íšŒì „ ì‘ì—… ì‹œ ìœ ë„ì ë°°ì¹˜ ë° ì‹ í˜¸ì²´ê³„ í†µì¼", d:"ë¬´ìœ ë„ í›„ì§„ ê¸ˆì§€"},
          {k:"ì¥ë¹„ ìš´í–‰ë¡œì™€ ë³´í–‰ë¡œ ë¶„ë¦¬", d:"ë˜ë©”ìš°ê¸°/ë‹¤ì§ í¬í•¨"},
          {k:"ì‘ì—…ë°˜ê²½ ë‚´ ê´€ê³„ì ì™¸ ì¶œì… ê¸ˆì§€", d:"í˜¼ì¬ì‘ì—… í†µì œ"},
        ]
      },
      {
        title:"ê´€ë¡œ ì¸ì–‘Â·ë¶€ì„¤Â·ì—°ê²°(ë‚™í•˜Â·ë¼ì„)",
        items:[
          {k:"ì¸ì–‘ ì¥ë¹„(í¬ë ˆì¸/ì²´ê²°êµ¬) ìƒíƒœ ì ê²€", d:"ìƒ¤í´Â·ì™€ì´ì–´Â·í›… í•´ì§€ì¥ì¹˜"},
          {k:"ì¸ì–‘ í•˜ë¶€ ì¶œì…ê¸ˆì§€ ë° ì‹ í˜¸ìˆ˜ ë°°ì¹˜", d:"ë‚™í•˜Â·ë§ìŒ ì˜ˆë°©"},
          {k:"ì—°ê²° ì‘ì—… ì‹œ ì† ë¼ì„ êµ¬ê°„ ê´€ë¦¬", d:"ì§€ê·¸/ë ˆë²„/ë¡œí”„ í™œìš©"},
          {k:"ê´€ë¡œ ì ì¹˜ì¥ì€ êµ´ì°©ë©´ì—ì„œ ì´ê²©Â·í‰íƒ„ ìœ ì§€", d:"ì „ë„Â·ë‚™í•˜ ì˜ˆë°©"},
        ]
      },
      {
        title:"ë§¨í™€/ê´€ë‚´(ì§ˆì‹Â·í­ë°œ)",
        items:[
          {k:"ì‚°ì†Œ/ìœ í•´ê°€ìŠ¤ ì¸¡ì • í›„ ì‘ì—…(ê¸°ë¡)", d:"ì¸¡ì •â†’í™˜ê¸°â†’ì¬ì¸¡ì •"},
          {k:"ì†¡í’ê¸° ë“± í™˜ê¸°ì„¤ë¹„ ì„¤ì¹˜ ë° ì§€ì† í™˜ê¸°", d:"ì‘ì—… ì¤‘ ìœ ì§€"},
          {k:"ê°ì‹œì¸ ë°°ì¹˜ ë° ë¹„ìƒì—°ë½/êµ¬ì¡°ì¥ë¹„ í™•ë³´", d:"ì—°ì‡„ì¬í•´ ë°©ì§€"},
          {k:"í•„ìš” ì‹œ í˜¸í¡ë³´í˜¸êµ¬(ì†¡ê¸°ë§ˆìŠ¤í¬ ë“±) ì ìš©", d:"ì‘ì—…í—ˆê°€ í¬í•¨"},
          {k:"ë¶ˆê½ƒì‘ì—…(Hot Work) ì í™”ì› í†µì œ", d:"ê°€ìŠ¤ê´€ ì¸ê·¼/ë°€íê³µê°„ ì£¼ì˜"},
        ]
      },
    ];

    const cl = document.getElementById('cl');
    const bar = document.getElementById('bar');

    const KEY = "pl_checklist_v2";
    const META = "pl_meta_v2";

    function loadState(){
      try{ return JSON.parse(localStorage.getItem(KEY) || "{}"); }catch(e){ return {}; }
    }
    function saveState(state){
      localStorage.setItem(KEY, JSON.stringify(state));
    }

    function flatten(){
      const flat = [];
      checklist.forEach((g, gi) => {
        g.items.forEach((it, ii) => flat.push({gi, ii, group:g.title, ...it}));
      });
      return flat;
    }

    function renderChecklist(){
      const state = loadState();

      cl.innerHTML = checklist.map((g, gi) => {
        const items = g.items.map((it, ii) => {
          const id = `${gi}-${ii}`;
          const checked = !!state[id];
          return `
            <label class="cl-item">
              <input type="checkbox" data-id="${id}" ${checked ? "checked":""} />
              <div>
                <b>${esc(it.k)}</b>
                <small>${esc(it.d)}</small>
              </div>
            </label>
          `;
        }).join("");

        return `
          <div class="card" style="box-shadow:none; margin:0; padding:14px 14px;">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;">
              <div style="font-weight:950">${esc(g.title)}</div>
              <button class="btn" type="button" data-group="${gi}" style="padding:8px 10px;font-size:12px;">ê·¸ë£¹ ì „ì²´ì²´í¬</button>
            </div>
            <div style="height:10px"></div>
            <div style="display:grid; gap:10px;">${items}</div>
          </div>
        `;
      }).join("");

      cl.querySelectorAll('input[type="checkbox"][data-id]').forEach(cb => {
        cb.addEventListener('change', (e) => {
          const id = e.target.getAttribute('data-id');
          const s = loadState();
          s[id] = e.target.checked;
          saveState(s);
          updateProgress();
        });
      });

      cl.querySelectorAll('button[data-group]').forEach(btn => {
        btn.addEventListener('click', () => {
          const gi = btn.getAttribute('data-group');
          const s = loadState();
          checklist[gi].items.forEach((_, ii) => { s[`${gi}-${ii}`] = true; });
          saveState(s);
          renderChecklist();
          updateProgress();
        });
      });

      updateProgress();
    }

    function updateProgress(){
      const state = loadState();
      const flat = flatten();
      const total = flat.length;
      const done = flat.filter(x => state[`${x.gi}-${x.ii}`]).length;
      const pct = total ? Math.round((done/total)*100) : 0;
      bar.style.width = pct + "%";
      bar.title = `ì§„í–‰ë¥  ${pct}% (${done}/${total})`;
    }

    // Meta
    const site = document.getElementById('site');
    const zone = document.getElementById('zone');
    const inspector = document.getElementById('inspector');

    function loadMeta(){
      try{ return JSON.parse(localStorage.getItem(META) || "{}"); }catch(e){ return {}; }
    }
    function applyMeta(){
      const m = loadMeta();
      if(m.site) site.value = m.site;
      if(m.zone) zone.value = m.zone;
      if(m.inspector) inspector.value = m.inspector;
    }
    document.getElementById('saveMeta').addEventListener('click', () => {
      localStorage.setItem(META, JSON.stringify({
        site: site.value.trim(),
        zone: zone.value.trim(),
        inspector: inspector.value.trim()
      }));
      alert("ì ê²€ ì •ë³´ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
    });

    document.getElementById('clearAll').addEventListener('click', () => {
      if(!confirm("ì²´í¬ë¥¼ ëª¨ë‘ í•´ì œí• ê¹Œìš”?")) return;
      localStorage.removeItem(KEY);
      renderChecklist();
    });

    document.getElementById('exportTxt').addEventListener('click', async () => {
      const m = loadMeta();
      const metaText = [
        `í˜„ì¥ëª…: ${site.value.trim() || m.site || "-"}`,
        `êµ¬ê°„/ê³µêµ¬: ${zone.value.trim() || m.zone || "-"}`,
        `ì ê²€ì: ${inspector.value.trim() || m.inspector || "-"}`,
        `ì¼ì‹œ: ${new Date().toLocaleString()}`
      ].join("\n");

      const state = loadState();
      const flat = flatten();
      const done = [];
      const notyet = [];
      flat.forEach((it) => {
        const id = `${it.gi}-${it.ii}`;
        (state[id] ? done : notyet).push(`- [${state[id] ? "x":" "}] (${it.group}) ${it.k}`);
      });

      const text = [
        "ê´€ë¡œê³µì‚¬ ì•ˆì „ì ê²€ ê²°ê³¼",
        "====================",
        metaText,
        "",
        "ì™„ë£Œ í•­ëª©",
        "--------",
        done.join("\n") || "(ì—†ìŒ)",
        "",
        "ë¯¸ì™„ë£Œ í•­ëª©",
        "----------",
        notyet.join("\n") || "(ì—†ìŒ)",
      ].join("\n");

      try{
        await navigator.clipboard.writeText(text);
        alert("ì ê²€ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
      }catch(e){
        const ta = document.createElement('textarea');
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        ta.remove();
        alert("ì ê²€ê²°ê³¼ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
      }
    });

    // -------------------------------
    // TBM Generator
    // -------------------------------
    const tbmTemplates = {
      general: [
        "ì˜¤ëŠ˜ ê³µì •ì€ ê´€ë¡œê³µì‚¬(êµ´ì°©Â·í™ë§‰ì´Â·ë¶€ì„¤Â·ë˜ë©”ìš°ê¸° í˜¼ì¬)ì…ë‹ˆë‹¤.",
        "í•µì‹¬ ìœ„í—˜ì€ í† ì‚¬ ë¶•ê´´(ë§¤ëª°), ì¥ë¹„ ì¶©ëŒ, ì¤‘ëŸ‰ë¬¼ ë‚™í•˜, ë§¨í™€ ì§ˆì‹ì…ë‹ˆë‹¤.",
        "êµ´ì°©ë¶€ ì ‘ê·¼ í†µì œ, ì¥ë¹„ í›„ì§„ ìœ ë„, ì¸ì–‘ í•˜ë¶€ ì¶œì…ê¸ˆì§€, ë§¨í™€ ì¸¡ì •Â·í™˜ê¸°ë¥¼ ì² ì €íˆ í•˜ì‹­ì‹œì˜¤."
      ],
      excavation: [
        "ì˜¤ëŠ˜ ê³µì •ì€ êµ´ì°© ì‘ì—…ì…ë‹ˆë‹¤.",
        "í•µì‹¬ ìœ„í—˜ì€ êµ´ì°©ë©´ ë¶•ê´´ë¡œ ì¸í•œ ë§¤ëª°ì…ë‹ˆë‹¤.",
        "êµ´ì°©ë©´ ê· ì—´Â·ì¹¨í•˜Â·ìš©ìˆ˜ ìœ ì… ì‹œ ì¦‰ì‹œ ì¤‘ì§€í•˜ê³ , ì¶œì…í†µì œÂ·ì´ê²©ì ì¹˜Â·ìŠ¹ê°•ì„¤ë¹„ë¥¼ í™•ì¸í•˜ì‹­ì‹œì˜¤."
      ],
      shoring: [
        "ì˜¤ëŠ˜ ê³µì •ì€ í™ë§‰ì´ì§€ë³´ê³µ ì„¤ì¹˜/í•´ì²´ ì‘ì—…ì…ë‹ˆë‹¤.",
        "í•µì‹¬ ìœ„í—˜ì€ ë¶•ê´´ ë° ì§€ë³´ì¬ ë‚™í•˜Â·ë¼ì„ì…ë‹ˆë‹¤.",
        "ì„¤ì¹˜ ìˆœì„œ ì¤€ìˆ˜, ë³€í˜•/í’€ë¦¼ ì ê²€, í•´ì²´ êµ¬ì—­ ì¶œì…í†µì œ, ì‹ í˜¸ì²´ê³„ë¥¼ ì² ì €íˆ í•˜ì‹­ì‹œì˜¤."
      ],
      laying: [
        "ì˜¤ëŠ˜ ê³µì •ì€ ê´€ë¡œ ì¸ì–‘Â·ë¶€ì„¤Â·ì—°ê²° ì‘ì—…ì…ë‹ˆë‹¤.",
        "í•µì‹¬ ìœ„í—˜ì€ ì¸ì–‘ë¬¼ ë‚™í•˜Â·ë§ìŒê³¼ ì† ë¼ì„ì…ë‹ˆë‹¤.",
        "ì¸ì–‘ í•˜ë¶€ ì¶œì…ê¸ˆì§€, ì‹ í˜¸ìˆ˜ ë°°ì¹˜, ì²´ê²°êµ¬ ì ê²€, ë¼ì„ êµ¬ê°„ ì† ìœ„ì¹˜ ì›ì¹™ì„ ì¤€ìˆ˜í•˜ì‹­ì‹œì˜¤."
      ],
      backfill: [
        "ì˜¤ëŠ˜ ê³µì •ì€ ë˜ë©”ìš°ê¸°Â·ë‹¤ì§Â·ë³µêµ¬ ì‘ì—…ì…ë‹ˆë‹¤.",
        "í•µì‹¬ ìœ„í—˜ì€ ì¥ë¹„ ì¶©ëŒê³¼ ë™ì„  í˜¼ì¬ì…ë‹ˆë‹¤.",
        "ì¥ë¹„ ìš´í–‰ë¡œ/ë³´í–‰ë¡œ ë¶„ë¦¬, ìœ ë„ì ë°°ì¹˜, ì‘ì—…êµ¬ê°„ ì¶œì…í†µì œë¥¼ ì² ì €íˆ í•˜ì‹­ì‹œì˜¤."
      ],
      manhole: [
        "ì˜¤ëŠ˜ ê³µì •ì€ ë§¨í™€/ê´€ë‚´ ì‘ì—…(ë°€íê³µê°„)ì…ë‹ˆë‹¤.",
        "í•µì‹¬ ìœ„í—˜ì€ ì‚°ì†Œê²°í• ë° ìœ í•´ê°€ìŠ¤ë¡œ ì¸í•œ ì§ˆì‹ì…ë‹ˆë‹¤.",
        "ì¸¡ì •â†’í™˜ê¸°â†’ê°ì‹œì¸ ë°°ì¹˜â†’êµ¬ì¡°ì¥ë¹„ ì¤€ë¹„ ìˆœì„œë¥¼ ì§€í‚¤ê³ , ì´ìƒ ì‹œ ì¦‰ì‹œ ì¤‘ì§€Â·ë³´ê³ í•˜ì‹­ì‹œì˜¤."
      ],
      traffic: [
        "ì˜¤ëŠ˜ ê³µì •ì€ ë„ë¡œ/êµí†µ í†µì œ êµ¬ê°„ ì‘ì—…ì…ë‹ˆë‹¤.",
        "í•µì‹¬ ìœ„í—˜ì€ ì¼ë°˜ì°¨ëŸ‰ê³¼ì˜ ì¶©ëŒ ë° ì•¼ê°„ ì‹œì•¼ ë¶ˆëŸ‰ì…ë‹ˆë‹¤.",
        "êµí†µì²˜ë¦¬ê³„íš ì¤€ìˆ˜, ì½˜Â·í‘œì§€Â·ê²½ê´‘ë“± ì„¤ì¹˜, ì‹ í˜¸ìˆ˜ ë°°ì¹˜ë¡œ ì‘ì—…êµ¬ê°„ì„ í™•ì‹¤íˆ ë¶„ë¦¬í•˜ì‹­ì‹œì˜¤."
      ],
    };

    const genTBM = document.getElementById("genTBM");
    const copyTBM = document.getElementById("copyTBM");

    genTBM.addEventListener("click", () => {
      const site = document.getElementById("tbmSite").value.trim() || "ë³¸ í˜„ì¥";
      const work = document.getElementById("tbmWork").value.trim() || "ê´€ë¡œê³µì‚¬ ì‘ì—…";
      const type = document.getElementById("tbmType").value;
      const lines = tbmTemplates[type] || tbmTemplates.general;

      const script = `
ì§€ê¸ˆë¶€í„° ì‘ì—… ì „ ì•ˆì „êµìœ¡(TBM)ì„ ì‹¤ì‹œí•˜ê² ìŠµë‹ˆë‹¤.

ì—¬ê¸°ëŠ” ${site}ì´ë©°,
ì˜¤ëŠ˜ ì‘ì—…ì€ ${work}ì…ë‹ˆë‹¤.

${lines.join("\n")}

ëª¨ë“  ì‘ì—…ìëŠ” ë³´í˜¸êµ¬ë¥¼ ì² ì €íˆ ì°©ìš©í•˜ê³ ,
ì´ìƒ ë°œìƒ ì‹œ ì¦‰ì‹œ ì‘ì—…ì„ ì¤‘ì§€í•˜ê³  ë³´ê³  ë°”ëë‹ˆë‹¤.
      `.trim();

      document.getElementById("tbmResult").value = script;
    });

    copyTBM.addEventListener("click", async () => {
      const text = document.getElementById("tbmResult").value;
      if (!text) {
        alert("ë¨¼ì € TBM ë¬¸êµ¬ë¥¼ ìƒì„±í•˜ì„¸ìš”.");
        return;
      }
      try{
        await navigator.clipboard.writeText(text);
        alert("TBM ë¬¸êµ¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
      }catch(e){
        const ta = document.createElement('textarea');
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        ta.remove();
        alert("TBM ë¬¸êµ¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
      }
    });

    // Init
    applyMeta();
    renderChecklist();
  </script>
</body>
</html>
